require=function r(a,s,c){function l(t,e){if(!s[t]){if(!a[t]){var o="function"==typeof require&&require;if(!e&&o)return o(t,!0);if(u)return u(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var i=s[t]={exports:{}};a[t][0].call(i.exports,function(e){return l(a[t][1][e]||e)},i,i.exports,r,a,s,c)}return s[t].exports}for(var u="function"==typeof require&&require,e=0;e<c.length;e++)l(c[e]);return l}({1:[function(e,t,o){"use strict";o.byteLength=function(e){return 3*e.length/4-h(e)},o.toByteArray=function(e){var t,o,n,i,r,a=e.length;i=h(e),r=new u(3*a/4-i),o=0<i?a-4:a;var s=0;for(t=0;t<o;t+=4)n=c[e.charCodeAt(t)]<<18|c[e.charCodeAt(t+1)]<<12|c[e.charCodeAt(t+2)]<<6|c[e.charCodeAt(t+3)],r[s++]=n>>16&255,r[s++]=n>>8&255,r[s++]=255&n;2===i?(n=c[e.charCodeAt(t)]<<2|c[e.charCodeAt(t+1)]>>4,r[s++]=255&n):1===i&&(n=c[e.charCodeAt(t)]<<10|c[e.charCodeAt(t+1)]<<4|c[e.charCodeAt(t+2)]>>2,r[s++]=n>>8&255,r[s++]=255&n);return r},o.fromByteArray=function(e){for(var t,o=e.length,n=o%3,i="",r=[],a=16383,s=0,c=o-n;s<c;s+=a)r.push(p(e,s,c<s+a?c:s+a));1===n?(t=e[o-1],i+=l[t>>2],i+=l[t<<4&63],i+="=="):2===n&&(t=(e[o-2]<<8)+e[o-1],i+=l[t>>10],i+=l[t>>4&63],i+=l[t<<2&63],i+="=");return r.push(i),r.join("")};for(var l=[],c=[],u="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,r=n.length;i<r;++i)l[i]=n[i],c[n.charCodeAt(i)]=i;function h(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function p(e,t,o){for(var n,i,r=[],a=t;a<o;a+=3)n=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),r.push(l[(i=n)>>18&63]+l[i>>12&63]+l[i>>6&63]+l[63&i]);return r.join("")}c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},{}],2:[function(t,e,x){(function(e){"use strict";var n=t("base64-js"),r=t("ieee754"),a=t("isarray");function o(){return h.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return h.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=h.prototype:(null===e&&(e=new h(t)),e.length=t),e}function h(e,t,o){if(!(h.TYPED_ARRAY_SUPPORT||this instanceof h))return new h(e,t,o);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return l(this,e)}return i(this,e,t,o)}function i(e,t,o,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,o,n){if(t.byteLength,o<0||t.byteLength<o)throw new RangeError("'offset' is out of bounds");if(t.byteLength<o+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===o&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,o):new Uint8Array(t,o,n);h.TYPED_ARRAY_SUPPORT?(e=t).__proto__=h.prototype:e=u(e,t);return e}(e,t,o,n):"string"==typeof t?function(e,t,o){"string"==typeof o&&""!==o||(o="utf8");if(!h.isEncoding(o))throw new TypeError('"encoding" must be a valid string encoding');var n=0|d(t,o),i=(e=s(e,n)).write(t,o);i!==n&&(e=e.slice(0,i));return e}(e,t,o):function(e,t){if(h.isBuffer(t)){var o=0|p(t.length);return 0===(e=s(e,o)).length||t.copy(e,0,0,o),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?s(e,0):u(e,t);if("Buffer"===t.type&&a(t.data))return u(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function l(e,t){if(c(t),e=s(e,t<0?0:0|p(t)),!h.TYPED_ARRAY_SUPPORT)for(var o=0;o<t;++o)e[o]=0;return e}function u(e,t){var o=t.length<0?0:0|p(t.length);e=s(e,o);for(var n=0;n<o;n+=1)e[n]=255&t[n];return e}function p(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function d(e,t){if(h.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var o=e.length;if(0===o)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return o;case"utf8":case"utf-8":case void 0:return k(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*o;case"hex":return o>>>1;case"base64":return D(e).length;default:if(n)return k(e).length;t=(""+t).toLowerCase(),n=!0}}function f(e,t,o){var n=e[t];e[t]=e[o],e[o]=n}function g(e,t,o,n,i){if(0===e.length)return-1;if("string"==typeof o?(n=o,o=0):2147483647<o?o=2147483647:o<-2147483648&&(o=-2147483648),o=+o,isNaN(o)&&(o=i?0:e.length-1),o<0&&(o=e.length+o),o>=e.length){if(i)return-1;o=e.length-1}else if(o<0){if(!i)return-1;o=0}if("string"==typeof t&&(t=h.from(t,n)),h.isBuffer(t))return 0===t.length?-1:m(e,t,o,n,i);if("number"==typeof t)return t&=255,h.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,o):Uint8Array.prototype.lastIndexOf.call(e,t,o):m(e,[t],o,n,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,o,n,i){var r,a=1,s=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s/=a=2,c/=2,o/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var u=-1;for(r=o;r<s;r++)if(l(e,r)===l(t,-1===u?0:r-u)){if(-1===u&&(u=r),r-u+1===c)return u*a}else-1!==u&&(r-=r-u),u=-1}else for(s<o+c&&(o=s-c),r=o;0<=r;r--){for(var h=!0,p=0;p<c;p++)if(l(e,r+p)!==l(t,p)){h=!1;break}if(h)return r}return-1}function C(e,t,o,n){o=Number(o)||0;var i=e.length-o;n?i<(n=Number(n))&&(n=i):n=i;var r=t.length;if(r%2!=0)throw new TypeError("Invalid hex string");r/2<n&&(n=r/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[o+a]=s}return a}function _(e,t,o,n){return F(function(e){for(var t=[],o=0;o<e.length;++o)t.push(255&e.charCodeAt(o));return t}(t),e,o,n)}function b(e,t,o){return 0===t&&o===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,o))}function v(e,t,o){o=Math.min(e.length,o);for(var n=[],i=t;i<o;){var r,a,s,c,l=e[i],u=null,h=239<l?4:223<l?3:191<l?2:1;if(i+h<=o)switch(h){case 1:l<128&&(u=l);break;case 2:128==(192&(r=e[i+1]))&&127<(c=(31&l)<<6|63&r)&&(u=c);break;case 3:r=e[i+1],a=e[i+2],128==(192&r)&&128==(192&a)&&2047<(c=(15&l)<<12|(63&r)<<6|63&a)&&(c<55296||57343<c)&&(u=c);break;case 4:r=e[i+1],a=e[i+2],s=e[i+3],128==(192&r)&&128==(192&a)&&128==(192&s)&&65535<(c=(15&l)<<18|(63&r)<<12|(63&a)<<6|63&s)&&c<1114112&&(u=c)}null===u?(u=65533,h=1):65535<u&&(u-=65536,n.push(u>>>10&1023|55296),u=56320|1023&u),n.push(u),i+=h}return function(e){var t=e.length;if(t<=E)return String.fromCharCode.apply(String,e);var o="",n=0;for(;n<t;)o+=String.fromCharCode.apply(String,e.slice(n,n+=E));return o}(n)}x.Buffer=h,x.SlowBuffer=function(e){+e!=e&&(e=0);return h.alloc(+e)},x.INSPECT_MAX_BYTES=50,h.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),x.kMaxLength=o(),h.poolSize=8192,h._augment=function(e){return e.__proto__=h.prototype,e},h.from=function(e,t,o){return i(null,e,t,o)},h.TYPED_ARRAY_SUPPORT&&(h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0})),h.alloc=function(e,t,o){return n=null,r=t,a=o,c(i=e),i<=0?s(n,i):void 0!==r?"string"==typeof a?s(n,i).fill(r,a):s(n,i).fill(r):s(n,i);var n,i,r,a},h.allocUnsafe=function(e){return l(null,e)},h.allocUnsafeSlow=function(e){return l(null,e)},h.isBuffer=function(e){return!(null==e||!e._isBuffer)},h.compare=function(e,t){if(!h.isBuffer(e)||!h.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var o=e.length,n=t.length,i=0,r=Math.min(o,n);i<r;++i)if(e[i]!==t[i]){o=e[i],n=t[i];break}return o<n?-1:n<o?1:0},h.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return h.alloc(0);var o;if(void 0===t)for(o=t=0;o<e.length;++o)t+=e[o].length;var n=h.allocUnsafe(t),i=0;for(o=0;o<e.length;++o){var r=e[o];if(!h.isBuffer(r))throw new TypeError('"list" argument must be an Array of Buffers');r.copy(n,i),i+=r.length}return n},h.byteLength=d,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)f(this,t,t+1);return this},h.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)f(this,t,t+3),f(this,t+1,t+2);return this},h.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)f(this,t,t+7),f(this,t+1,t+6),f(this,t+2,t+5),f(this,t+3,t+4);return this},h.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?v(this,0,e):function(e,t,o){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===o||o>this.length)&&(o=this.length),o<=0)return"";if((o>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,o);case"utf8":case"utf-8":return v(this,t,o);case"ascii":return y(this,t,o);case"latin1":case"binary":return P(this,t,o);case"base64":return b(this,t,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,o);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}.apply(this,arguments)},h.prototype.equals=function(e){if(!h.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===h.compare(this,e)},h.prototype.inspect=function(){var e="",t=x.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},h.prototype.compare=function(e,t,o,n,i){if(!h.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===o&&(o=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||o>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(i<=n&&o<=t)return 0;if(i<=n)return-1;if(o<=t)return 1;if(this===e)return 0;for(var r=(i>>>=0)-(n>>>=0),a=(o>>>=0)-(t>>>=0),s=Math.min(r,a),c=this.slice(n,i),l=e.slice(t,o),u=0;u<s;++u)if(c[u]!==l[u]){r=c[u],a=l[u];break}return r<a?-1:a<r?1:0},h.prototype.includes=function(e,t,o){return-1!==this.indexOf(e,t,o)},h.prototype.indexOf=function(e,t,o){return g(this,e,t,o,!0)},h.prototype.lastIndexOf=function(e,t,o){return g(this,e,t,o,!1)},h.prototype.write=function(e,t,o,n){if(void 0===t)n="utf8",o=this.length,t=0;else if(void 0===o&&"string"==typeof t)n=t,o=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(o)?(o|=0,void 0===n&&(n="utf8")):(n=o,o=void 0)}var i=this.length-t;if((void 0===o||i<o)&&(o=i),0<e.length&&(o<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var r,a,s,c,l,u,h,p,d,f=!1;;)switch(n){case"hex":return C(this,e,t,o);case"utf8":case"utf-8":return p=t,d=o,F(k(e,(h=this).length-p),h,p,d);case"ascii":return _(this,e,t,o);case"latin1":case"binary":return _(this,e,t,o);case"base64":return c=this,l=t,u=o,F(D(e),c,l,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a=t,s=o,F(function(e,t){for(var o,n,i,r=[],a=0;a<e.length&&!((t-=2)<0);++a)o=e.charCodeAt(a),n=o>>8,i=o%256,r.push(i),r.push(n);return r}(e,(r=this).length-a),r,a,s);default:if(f)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),f=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var E=4096;function y(e,t,o){var n="";o=Math.min(e.length,o);for(var i=t;i<o;++i)n+=String.fromCharCode(127&e[i]);return n}function P(e,t,o){var n="";o=Math.min(e.length,o);for(var i=t;i<o;++i)n+=String.fromCharCode(e[i]);return n}function T(e,t,o){var n=e.length;(!t||t<0)&&(t=0),(!o||o<0||n<o)&&(o=n);for(var i="",r=t;r<o;++r)i+=L(e[r]);return i}function S(e,t,o){for(var n=e.slice(t,o),i="",r=0;r<n.length;r+=2)i+=String.fromCharCode(n[r]+256*n[r+1]);return i}function N(e,t,o){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(o<e+t)throw new RangeError("Trying to access beyond buffer length")}function M(e,t,o,n,i,r){if(!h.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<t||t<r)throw new RangeError('"value" argument is out of bounds');if(o+n>e.length)throw new RangeError("Index out of range")}function G(e,t,o,n){t<0&&(t=65535+t+1);for(var i=0,r=Math.min(e.length-o,2);i<r;++i)e[o+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function I(e,t,o,n){t<0&&(t=4294967295+t+1);for(var i=0,r=Math.min(e.length-o,4);i<r;++i)e[o+i]=t>>>8*(n?i:3-i)&255}function R(e,t,o,n,i,r){if(o+n>e.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("Index out of range")}function A(e,t,o,n,i){return i||R(e,0,o,4),r.write(e,t,o,n,23,4),o+4}function w(e,t,o,n,i){return i||R(e,0,o,8),r.write(e,t,o,n,52,8),o+8}h.prototype.slice=function(e,t){var o,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e),h.TYPED_ARRAY_SUPPORT)(o=this.subarray(e,t)).__proto__=h.prototype;else{var i=t-e;o=new h(i,void 0);for(var r=0;r<i;++r)o[r]=this[r+e]}return o},h.prototype.readUIntLE=function(e,t,o){e|=0,t|=0,o||N(e,t,this.length);for(var n=this[e],i=1,r=0;++r<t&&(i*=256);)n+=this[e+r]*i;return n},h.prototype.readUIntBE=function(e,t,o){e|=0,t|=0,o||N(e,t,this.length);for(var n=this[e+--t],i=1;0<t&&(i*=256);)n+=this[e+--t]*i;return n},h.prototype.readUInt8=function(e,t){return t||N(e,1,this.length),this[e]},h.prototype.readUInt16LE=function(e,t){return t||N(e,2,this.length),this[e]|this[e+1]<<8},h.prototype.readUInt16BE=function(e,t){return t||N(e,2,this.length),this[e]<<8|this[e+1]},h.prototype.readUInt32LE=function(e,t){return t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},h.prototype.readUInt32BE=function(e,t){return t||N(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},h.prototype.readIntLE=function(e,t,o){e|=0,t|=0,o||N(e,t,this.length);for(var n=this[e],i=1,r=0;++r<t&&(i*=256);)n+=this[e+r]*i;return(i*=128)<=n&&(n-=Math.pow(2,8*t)),n},h.prototype.readIntBE=function(e,t,o){e|=0,t|=0,o||N(e,t,this.length);for(var n=t,i=1,r=this[e+--n];0<n&&(i*=256);)r+=this[e+--n]*i;return(i*=128)<=r&&(r-=Math.pow(2,8*t)),r},h.prototype.readInt8=function(e,t){return t||N(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},h.prototype.readInt16LE=function(e,t){t||N(e,2,this.length);var o=this[e]|this[e+1]<<8;return 32768&o?4294901760|o:o},h.prototype.readInt16BE=function(e,t){t||N(e,2,this.length);var o=this[e+1]|this[e]<<8;return 32768&o?4294901760|o:o},h.prototype.readInt32LE=function(e,t){return t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},h.prototype.readInt32BE=function(e,t){return t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},h.prototype.readFloatLE=function(e,t){return t||N(e,4,this.length),r.read(this,e,!0,23,4)},h.prototype.readFloatBE=function(e,t){return t||N(e,4,this.length),r.read(this,e,!1,23,4)},h.prototype.readDoubleLE=function(e,t){return t||N(e,8,this.length),r.read(this,e,!0,52,8)},h.prototype.readDoubleBE=function(e,t){return t||N(e,8,this.length),r.read(this,e,!1,52,8)},h.prototype.writeUIntLE=function(e,t,o,n){(e=+e,t|=0,o|=0,n)||M(this,e,t,o,Math.pow(2,8*o)-1,0);var i=1,r=0;for(this[t]=255&e;++r<o&&(i*=256);)this[t+r]=e/i&255;return t+o},h.prototype.writeUIntBE=function(e,t,o,n){(e=+e,t|=0,o|=0,n)||M(this,e,t,o,Math.pow(2,8*o)-1,0);var i=o-1,r=1;for(this[t+i]=255&e;0<=--i&&(r*=256);)this[t+i]=e/r&255;return t+o},h.prototype.writeUInt8=function(e,t,o){return e=+e,t|=0,o||M(this,e,t,1,255,0),h.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},h.prototype.writeUInt16LE=function(e,t,o){return e=+e,t|=0,o||M(this,e,t,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):G(this,e,t,!0),t+2},h.prototype.writeUInt16BE=function(e,t,o){return e=+e,t|=0,o||M(this,e,t,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):G(this,e,t,!1),t+2},h.prototype.writeUInt32LE=function(e,t,o){return e=+e,t|=0,o||M(this,e,t,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):I(this,e,t,!0),t+4},h.prototype.writeUInt32BE=function(e,t,o){return e=+e,t|=0,o||M(this,e,t,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):I(this,e,t,!1),t+4},h.prototype.writeIntLE=function(e,t,o,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*o-1);M(this,e,t,o,i-1,-i)}var r=0,a=1,s=0;for(this[t]=255&e;++r<o&&(a*=256);)e<0&&0===s&&0!==this[t+r-1]&&(s=1),this[t+r]=(e/a>>0)-s&255;return t+o},h.prototype.writeIntBE=function(e,t,o,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*o-1);M(this,e,t,o,i-1,-i)}var r=o-1,a=1,s=0;for(this[t+r]=255&e;0<=--r&&(a*=256);)e<0&&0===s&&0!==this[t+r+1]&&(s=1),this[t+r]=(e/a>>0)-s&255;return t+o},h.prototype.writeInt8=function(e,t,o){return e=+e,t|=0,o||M(this,e,t,1,127,-128),h.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},h.prototype.writeInt16LE=function(e,t,o){return e=+e,t|=0,o||M(this,e,t,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):G(this,e,t,!0),t+2},h.prototype.writeInt16BE=function(e,t,o){return e=+e,t|=0,o||M(this,e,t,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):G(this,e,t,!1),t+2},h.prototype.writeInt32LE=function(e,t,o){return e=+e,t|=0,o||M(this,e,t,4,2147483647,-2147483648),h.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):I(this,e,t,!0),t+4},h.prototype.writeInt32BE=function(e,t,o){return e=+e,t|=0,o||M(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),h.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):I(this,e,t,!1),t+4},h.prototype.writeFloatLE=function(e,t,o){return A(this,e,t,!0,o)},h.prototype.writeFloatBE=function(e,t,o){return A(this,e,t,!1,o)},h.prototype.writeDoubleLE=function(e,t,o){return w(this,e,t,!0,o)},h.prototype.writeDoubleBE=function(e,t,o){return w(this,e,t,!1,o)},h.prototype.copy=function(e,t,o,n){if(o||(o=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),0<n&&n<o&&(n=o),n===o)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(o<0||o>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-o&&(n=e.length-t+o);var i,r=n-o;if(this===e&&o<t&&t<n)for(i=r-1;0<=i;--i)e[i+t]=this[i+o];else if(r<1e3||!h.TYPED_ARRAY_SUPPORT)for(i=0;i<r;++i)e[i+t]=this[i+o];else Uint8Array.prototype.set.call(e,this.subarray(o,o+r),t);return r},h.prototype.fill=function(e,t,o,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,o=this.length):"string"==typeof o&&(n=o,o=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!h.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<o)throw new RangeError("Out of range index");if(o<=t)return this;var r;if(t>>>=0,o=void 0===o?this.length:o>>>0,e||(e=0),"number"==typeof e)for(r=t;r<o;++r)this[r]=e;else{var a=h.isBuffer(e)?e:k(new h(e,n).toString()),s=a.length;for(r=0;r<o-t;++r)this[r+t]=a[r%s]}return this};var O=/[^+\/0-9A-Za-z-_]/g;function L(e){return e<16?"0"+e.toString(16):e.toString(16)}function k(e,t){var o;t=t||1/0;for(var n=e.length,i=null,r=[],a=0;a<n;++a){if(55295<(o=e.charCodeAt(a))&&o<57344){if(!i){if(56319<o){-1<(t-=3)&&r.push(239,191,189);continue}if(a+1===n){-1<(t-=3)&&r.push(239,191,189);continue}i=o;continue}if(o<56320){-1<(t-=3)&&r.push(239,191,189),i=o;continue}o=65536+(i-55296<<10|o-56320)}else i&&-1<(t-=3)&&r.push(239,191,189);if(i=null,o<128){if((t-=1)<0)break;r.push(o)}else if(o<2048){if((t-=2)<0)break;r.push(o>>6|192,63&o|128)}else if(o<65536){if((t-=3)<0)break;r.push(o>>12|224,o>>6&63|128,63&o|128)}else{if(!(o<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;r.push(o>>18|240,o>>12&63|128,o>>6&63|128,63&o|128)}}return r}function D(e){return n.toByteArray(function(e){var t;if((e=(t=e,t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(O,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function F(e,t,o,n){for(var i=0;i<n&&!(i+o>=t.length||i>=e.length);++i)t[i+o]=e[i];return i}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":1,ieee754:4,isarray:3}],3:[function(e,t,o){var n={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},{}],4:[function(e,t,o){o.read=function(e,t,o,n,i){var r,a,s=8*i-n-1,c=(1<<s)-1,l=c>>1,u=-7,h=o?i-1:0,p=o?-1:1,d=e[t+h];for(h+=p,r=d&(1<<-u)-1,d>>=-u,u+=s;0<u;r=256*r+e[t+h],h+=p,u-=8);for(a=r&(1<<-u)-1,r>>=-u,u+=n;0<u;a=256*a+e[t+h],h+=p,u-=8);if(0===r)r=1-l;else{if(r===c)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,n),r-=l}return(d?-1:1)*a*Math.pow(2,r-n)},o.write=function(e,t,o,n,i,r){var a,s,c,l=8*r-i-1,u=(1<<l)-1,h=u>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:r-1,f=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),2<=(t+=1<=a+h?p/c:p*Math.pow(2,1-h))*c&&(a++,c/=2),u<=a+h?(s=0,a=u):1<=a+h?(s=(t*c-1)*Math.pow(2,i),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),a=0));8<=i;e[o+d]=255&s,d+=f,s/=256,i-=8);for(a=a<<i|s,l+=i;0<l;e[o+d]=255&a,d+=f,a/=256,l-=8);e[o+d-f]|=128*g}},{}],Algo:[function(e,t,o){"use strict";cc._RF.push(t,"d18ccVTPSlPKasd+dtGaYsS","Algo");var h={cipher:function(e,t){for(var o=t.length/4-1,n=[[],[],[],[]],i=0;i<16;i++)n[i%4][Math.floor(i/4)]=e[i];n=h.addRoundKey(n,t,0,4);for(var r=1;r<o;r++)n=h.subBytes(n,4),n=h.shiftRows(n,4),n=h.mixColumns(n,4),n=h.addRoundKey(n,t,r,4);n=h.subBytes(n,4),n=h.shiftRows(n,4),n=h.addRoundKey(n,t,o,4);for(var a=new Array(16),s=0;s<16;s++)a[s]=n[s%4][Math.floor(s/4)];return a},keyExpansion:function(e){for(var t=e.length/4,o=t+6,n=new Array(4*(o+1)),i=new Array(4),r=0;r<t;r++){var a=[e[4*r],e[4*r+1],e[4*r+2],e[4*r+3]];n[r]=a}for(var s=t;s<4*(o+1);s++){n[s]=new Array(4);for(var c=0;c<4;c++)i[c]=n[s-1][c];if(s%t==0){i=h.subWord(h.rotWord(i));for(var l=0;l<4;l++)i[l]^=h.rCon[s/t][l]}else 6<t&&s%t==4&&(i=h.subWord(i));for(var u=0;u<4;u++)n[s][u]=n[s-t][u]^i[u]}return n},subBytes:function(e,t){for(var o=0;o<4;o++)for(var n=0;n<t;n++)e[o][n]=h.sBox[e[o][n]];return e},shiftRows:function(e,t){for(var o=new Array(4),n=1;n<4;n++){for(var i=0;i<4;i++)o[i]=e[n][(i+n)%t];for(var r=0;r<4;r++)e[n][r]=o[r]}return e},mixColumns:function(e,t){for(var o=0;o<4;o++){for(var n=new Array(4),i=new Array(4),r=0;r<4;r++)n[r]=e[r][o],i[r]=128&e[r][o]?e[r][o]<<1^283:e[r][o]<<1;e[0][o]=i[0]^n[1]^i[1]^n[2]^n[3],e[1][o]=n[0]^i[1]^n[2]^i[2]^n[3],e[2][o]=n[0]^n[1]^i[2]^n[3]^i[3],e[3][o]=n[0]^i[0]^n[1]^n[2]^i[3]}return e},addRoundKey:function(e,t,o,n){for(var i=0;i<4;i++)for(var r=0;r<n;r++)e[i][r]^=t[4*o+r][i];return e},subWord:function(e){for(var t=0;t<4;t++)e[t]=h.sBox[e[t]];return e},rotWord:function(e){for(var t=e[0],o=0;o<3;o++)e[o]=e[o+1];return e[3]=t,e},sBox:[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],rCon:[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]]};void 0!==t&&t.exports&&(t.exports=h),"function"==typeof define&&define.amd&&define([],function(){return h}),cc._RF.pop()},{}],AssetMgr:[function(e,t,o){"use strict";cc._RF.push(t,"e9840SFrGVL6b/gAnf9irV8","AssetMgr"),cc.Class({extends:cc.Component,properties:{prefabLevelTips:cc.Prefab,prefabGameSuc:cc.Prefab,prefabGameFailed:cc.Prefab,prefabChestReward:cc.Prefab,prefabGameClassicEntry:cc.Prefab,prefabGameClassicEnd:cc.Prefab,prefabGamePropRecommend:cc.Prefab,prefabSetting:cc.Prefab,prefabShop:cc.Prefab,prefabChestCollect:cc.Prefab,prefabChestCollectRes:cc.Prefab,prefabChestCard:cc.Prefab,prefabGamePropView:cc.Prefab,prefabTransitionNodeIn:cc.Prefab,prefabTransitionNodeOut:cc.Prefab,prefabTipShowView:cc.Prefab,prefabBaseTipShowView:cc.Prefab,prefabFlyEffect:cc.Prefab},onLoad:function(){(Global.assetMgr=this).setAutoRelease(!0)},setAutoRelease:function(e){cc.loader.setAutoRelease(this.prefabLevelTips,e),cc.loader.setAutoRelease(this.prefabGameSuc,e),cc.loader.setAutoRelease(this.prefabGameFailed,e),cc.loader.setAutoRelease(this.prefabChestReward,e),cc.loader.setAutoRelease(this.prefabGameClassicEntry,e),cc.loader.setAutoRelease(this.prefabGameClassicEnd,e),cc.loader.setAutoRelease(this.prefabGamePropRecommend,e),cc.loader.setAutoRelease(this.prefabSetting,e),cc.loader.setAutoRelease(this.prefabShop,e),cc.loader.setAutoRelease(this.prefabChestCollect,e),cc.loader.setAutoRelease(this.prefabChestCard,e),cc.loader.setAutoRelease(this.prefabChestCollectRes,e),cc.loader.setAutoRelease(this.prefabTransitionNode,e),cc.loader.setAutoRelease(this.prefabGamePropView,e),cc.loader.setAutoRelease(this.prefabTipShowView,e),cc.loader.setAutoRelease(this.prefabBaseTipShowView,e)},releaseGameRes:function(){}}),cc._RF.pop()},{}],AudioMgr:[function(e,t,o){"use strict";cc._RF.push(t,"82ca0RGPyVNC7GzTvTyrZ7g","AudioMgr");var n=e("./DataMgr"),i=e("./UtilsOther");cc.Class({extends:cc.Component,properties:{bgLoading:{url:cc.AudioClip,default:null},bgIsland:{url:cc.AudioClip,default:null},bgGame:{url:cc.AudioClip,default:null},effAddTime:{url:cc.AudioClip,default:null},effChestOpen:{url:cc.AudioClip,default:null},effChestClose:{url:cc.AudioClip,default:null},effChestRes:{url:cc.AudioClip,default:null},effChestRolling:{url:cc.AudioClip,default:null},effError:{url:cc.AudioClip,default:null},effFailed:{url:cc.AudioClip,default:null},effGetCoins:{url:cc.AudioClip,default:null},effGetCoinsLittle:{url:cc.AudioClip,default:null},effHint:{url:cc.AudioClip,default:null},effPropBtn:{url:cc.AudioClip,default:null},effSmallStarAppear:{url:cc.AudioClip,default:null},effStarAppear:{url:cc.AudioClip,default:null},effStarDisappear:{url:cc.AudioClip,default:null},effSuc:{url:cc.AudioClip,default:null},effSucBg:{url:cc.AudioClip,default:null},effTimeElaspe:{url:cc.AudioClip,default:null},effTimeTick:{url:cc.AudioClip,default:null},effTouch:{url:cc.AudioClip,default:null},effTouch2Show:{url:cc.AudioClip,default:null},effTouch2Classic:{url:cc.AudioClip,default:null},effTouchProp:{url:cc.AudioClip,default:null},effDeal:{url:cc.AudioClip,default:null},effMove:{url:cc.AudioClip,default:null},effShuffle:{url:cc.AudioClip,default:null},effTurn:{url:cc.AudioClip,default:null},scoreCollectArray:[cc.AudioClip],effDoubleHit:{url:cc.AudioClip,default:null},effPropAddHand:{url:cc.AudioClip,default:null},effPropCleanCategory:{url:cc.AudioClip,default:null},effPropCleanRandom:{url:cc.AudioClip,default:null},effPropWild:{url:cc.AudioClip,default:null}},onLoad:function(){this._bgMusicID=null,this._lastBGM=null,this._setData=n.getInstance().settingObj,this._allEffects=[],Global.audioMgr=this},playEffect:function(e){if(!this._setData.effectOn)return null;var t=cc.audioEngine.play(e,!1,this._setData.effectVol);return this._allEffects.push(t),cc.audioEngine.setFinishCallback(t,this.onEffectPlayFinished.bind(this,t)),t},stopEffect:function(e){null!=e&&(cc.audioEngine.stop(e),i.arrayRmObj(this._allEffects,e))},stopAllEffects:function(){var e=!0,t=!1,o=void 0;try{for(var n,i=this._allEffects[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var r=n.value;cc.audioEngine.stop(r)}}catch(e){t=!0,o=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw o}}},pauseAllEffects:function(){var e=!0,t=!1,o=void 0;try{for(var n,i=this._allEffects[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var r=n.value;cc.audioEngine.pause(r)}}catch(e){t=!0,o=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw o}}},resumeAllEffects:function(){var e=!0,t=!1,o=void 0;try{for(var n,i=this._allEffects[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var r=n.value;cc.audioEngine.resume(r)}}catch(e){t=!0,o=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw o}}},setEffectVolume:function(e){var t=!0,o=!1,n=void 0;try{for(var i,r=this._allEffects[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var a=i.value;cc.audioEngine.setVolume(a,e)}}catch(e){o=!0,n=e}finally{try{!t&&r.return&&r.return()}finally{if(o)throw n}}},onEffectPlayFinished:function(e,t){i.arrayRmObj(this._allEffects,e),cc.log("_allEffects:"+this._allEffects.length)},playMusic:function(e){this._lastBGM=e,this._setData.musicOn&&(null!==this._bgMusicID&&cc.audioEngine.stop(this._bgMusicID),this._bgMusicID=cc.audioEngine.play(e,!0,this._setData.musicVol))},getLastMusic:function(){return this._lastBGM},playLastMusic:function(){this._setData.musicOn&&this._lastBGM&&(null!==this._bgMusicID&&cc.audioEngine.stop(this._bgMusicID),this._bgMusicID=cc.audioEngine.play(this._lastBGM,!0,this._setData.musicVol))},stopMusic:function(){null!==this._bgMusicID&&cc.audioEngine.stop(this._bgMusicID)},pauseMusic:function(){null!==this._bgMusicID&&cc.audioEngine.pause(this._bgMusicID)},resumeMusic:function(){null!==this._bgMusicID&&cc.audioEngine.resume(this._bgMusicID)},setMusicVolume:function(e){null!==this._bgMusicID&&cc.audioEngine.setVolume(this._bgMusicID,e)}}),cc._RF.pop()},{"./DataMgr":"DataMgr","./UtilsOther":"UtilsOther"}],AutoScaleFixedWidth:[function(e,t,o){"use strict";cc._RF.push(t,"6cbbe/s0lpIH6mU4AAT2kP6","AutoScaleFixedWidth"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var e=cc.Canvas.instance.designResolution,t=cc.director.getWinSize().width/e.width;t=Math.min(1,t),this.node.scaleX*=t,this.node.scaleY*=t}}),cc._RF.pop()},{}],BtnCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"be8deSsGR9CwagwrnhpyuFj","BtnCtrl");var n=e("./GCONFIG");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.node.getComponent(cc.Button)&&(Global.eventManager.on(n.EVENT_ONSPIN,this._onStartSpin,this),Global.eventManager.on(n.EVENT_STOPSPIN,this._onStopSpin,this))},_onStartSpin:function(){this.node.getComponent(cc.Button).interactable=!1},_onStopSpin:function(){this.node.getComponent(cc.Button).interactable=!0},onDestroy:function(){Global.eventManager.off(n.EVENT_ONSPIN,this._onStartSpin),Global.eventManager.off(n.EVENT_STOPSPIN,this._onStopSpin)}}),cc._RF.pop()},{"./GCONFIG":"GCONFIG"}],CSVParser:[function(e,t,o){"use strict";cc._RF.push(t,"aab19B0yLhC7JV+rBaX1XJH","CSVParser");var n={DefaultOptions:{delim:",",quote:'"',rowdelim:"\n"}};function r(e){this.message=e,Error.captureStackTrace&&Error.captureStackTrace(this,arguments.callee)}function i(e,t){if(this.str=e,this.options=n.DefaultOptions,t){if(t.delim=t.delim||n.DefaultOptions.delim,t.quote=t.quote||n.DefaultOptions.quote,1!=t.quote.length)throw new RangeError("options.quote should be only 1 char");t.rowdelim=t.rowdelim||n.DefaultOptions.rowdelim,this.options=t}this.pos=0,this.endpos=e.length,this.lineNo=1}function a(e,t){for(var o=0,n=e.indexOf(t);0<n;)o++,n=e.indexOf(t,n+t.length);return o}((r.prototype=new Error).constructor=r).prototype.name="CSVSyntaxError","[object Error]"==(new Error).toString()&&(r.prototype.toString=function(){return this.name+": "+this.message}),i.prototype.next=function(e){if(this.pos<this.endpos){var t=e.length;if(this.str.substring(this.pos,this.pos+t)==e)return this.pos+=t,!0}return!1},i.prototype.ahead=function(e){if(this.pos<this.endpos){if(!e)return!0;var t=e.length;if(this.str.substring(this.pos,this.pos+t)==e)return!0}return!1},i.prototype.quotedField=function(){var e=this.pos;if(!this.next(this.options.quote))return this.pos=e,null;for(var t=[],o=this.pos;o<this.endpos;){var n=this.str.indexOf(this.options.quote,o);if(n<0)throw new r("line "+this.lineNo+": missing close quote");var i=this.str.substring(o,n);if(this.lineNo+=a(i,"\n"),t.push(i),!(n+1<this.endpos&&this.str.charAt(n+1)==this.options.quote)){this.pos=n+1;break}o=n+2,n=this.str.indexOf(this.options.quote,o)}return t.join(this.options.quote)},i.prototype.normalField=function(){var e=this.pos,t=this.str.indexOf(this.options.delim,e);t<0&&(t=this.endpos);var o=this.str.indexOf(this.options.rowdelim,e);return o<0&&(o=this.endpos),this.pos=Math.min(t,o),this.str.substring(e,this.pos)},i.prototype.nextField=function(){var e=this.quotedField();return null!==e?e:this.normalField()},i.prototype.nextRow_0=function(){var e=this.pos;if(!this.next(this.options.delim))return this.pos=e,null;var t=this.nextField();return null===t?(this.pos=e,null):t},i.prototype.nextRow=function(){var e=[],t=this.pos,o=this.nextField();if(null===o)return this.pos=t,null;for(e.push(o),o=this.nextRow_0();null!==o;)e.push(o),o=this.nextRow_0();if(!this.next(this.options.rowdelim)&&this.ahead())throw new r("line "+this.lineNo+": "+this.str.substring(Math.max(this.pos-5,0),this.pos+5));return"\n"==this.str.charAt(this.pos-1)&&this.lineNo++,e},i.prototype.nextRowSimple=function(){var e=[],t=this.pos,o=this.nextField();if(null===o)return this.pos=t,null;for(e.push(o),o=this.nextRow_0();null!==o;)e.push(o),o=this.nextRow_0();if(!this.next(this.options.rowdelim)&&this.ahead())throw new r("line "+this.lineNo+": "+this.str.substring(Math.max(this.pos-5,0),this.pos+5));return"\n"==this.str.charAt(this.pos-1)&&this.lineNo++,1===e.length?e[0]:e},i.prototype.hasNext=function(){return this.ahead()},n.CSVSyntaxError=r,n.CSVParser=i,n.parseOne=function(e,t){var o=new i(e,t);return o.hasNext()?o.nextRow():null},n.parseOneSimple=function(e,t){var o=new i(e,t);return o.hasNext()?o.nextRowSimple():null},Array.prototype.map||(Array.prototype.map=function(e,t){var o,n,i;if(null===this)throw new TypeError(" this is null or not defined");var r=Object(this),a=r.length>>>0;if("[object Function]"!={}.toString.call(e))throw new TypeError(e+" is not a function");for(t&&(o=t),n=new Array(a),i=0;i<a;){var s,c;i in r&&(s=r[i],c=e.call(o,s,i,r),n[i]=c),i++}return n}),t.exports=i,cc._RF.pop()},{}],ChestCollectCard:[function(e,t,o){"use strict";cc._RF.push(t,"e54bcPQywBDIa5+SOGh3t0b","ChestCollectCard"),cc.Class({extends:cc.Component,properties:{spProp:cc.Sprite,spCoins:cc.Sprite,atlasProp:cc.SpriteAtlas,coinsSpritFrame:cc.SpriteFrame,labelNum:cc.Node},init:function(e,t){this.labelNum.getComponent("LabelInteger").setValue(t,!1),0===e?(this.spProp.node.active=!1,this.spCoins.node.active=!0,this.spCoins.spriteFrame=0===e?this.coinsSpritFrame:this.atlasProp.getSpriteFrame("icon_ig_daojupai_0"+e)):(this.spProp.node.active=!0,this.spCoins.node.active=!1,this.spProp.spriteFrame=this.atlasProp.getSpriteFrame("icon_ig_daojupai_0"+e))}}),cc._RF.pop()},{}],ChestCollectCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"afaaabPps1HgLGc7M3V+NgI","ChestCollectCtrl");var n=cc.Enum({CHEST_OPENED:1,CHEST_CLOSED:2}),i=cc.Enum({TYPE_NORMAL:1,TYPE_TIME_SHORT:2,TYPE_TIME_LONG:3});cc.Class({extends:cc.Component,properties:{nodeNormal:cc.Node,nodeTimeShort:cc.Node,nodeTimeLong:cc.Node,_chestState:n.CHEST_OPENED,chestState:{type:n,set:function(e){this._setState(e)},get:function(){return this._chestState}},_chestType:i.TYPE_NORMAL,chestType:{type:i,get:function(){return this._chestType},set:function(e){switch(this._chestType=e){case i.TYPE_NORMAL:this.nodeNormal.active=!0,this.nodeTimeShort.active=!1,this.nodeTimeLong.active=!1,this._curChestNode=this.nodeNormal;break;case i.TYPE_TIME_SHORT:this.nodeNormal.active=!1,this.nodeTimeShort.active=!0,this.nodeTimeLong.active=!1,this._curChestNode=this.nodeTimeShort;break;case i.TYPE_TIME_LONG:this.nodeNormal.active=!1,this.nodeTimeShort.active=!1,this.nodeTimeLong.active=!0,this._curChestNode=this.nodeTimeLong}}}},_setState:function(e,t,o){switch(this._chestState=e,this._curChestNode||(this._curChestNode=this.nodeNormal),e){case n.CHEST_CLOSED:this._curChestNode.getChildByName("close").active=!0,this._curChestNode.getChildByName("open").active=!1;break;case n.CHEST_OPENED:this._curChestNode.getChildByName("close").active=!1,this._curChestNode.getChildByName("open").active=!0}},setStateWithAni:function(e,t,o){}}),cc._RF.pop()},{}],ChestCollectResView:[function(e,t,o){"use strict";cc._RF.push(t,"4236duK53xP0ZR31KRr+4uq","ChestCollectResView");var c=e("./../common/DataMgr"),l=e("./../model/PropModel");cc.Class({extends:cc.Component,properties:{container:cc.Node},init:function(e){var t=!0,o=!1,n=void 0;try{for(var i,r=e[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var a=i.value,s=cc.instantiate(Global.assetMgr.prefabChestCard);s.getComponent("ChestCollectCard").init(a.propId,a.propNum),this.container.addChild(s),0===a.propId?c.getInstance().playerObj.coins+=a.propNum:l.getModel(a.propId).addProp(a.propNum)}}catch(e){o=!0,n=e}finally{try{!t&&r.return&&r.return()}finally{if(o)throw n}}},onBtnGet:function(){Global.uiUpdater.updateUserCoins(),Global.eventMgr.emit(Global.config.EVENT_POP_VIEW),Global.audioMgr.playEffect(Global.audioMgr.effTouch)}}),cc._RF.pop()},{"./../common/DataMgr":"DataMgr","./../model/PropModel":"PropModel"}],ChestCollectViewCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"c1cc1Ql5nJDsYHtfPpJuBUK","ChestCollectViewCtrl");var n=e("./../common/GCONFIG"),l=e("./../common/GameCfg"),r=e("./../common/DataMgr"),u=e("./../common/UtilsOther"),a=e("./../common/ViewMgr"),s=e("./../common/CoinsMgr"),i=(e("./../common/UtilsCross"),e("./../common/ServerTimeMgr"));cc.Class({extends:cc.Component,properties:{block:cc.Node,chestNormal:cc.Node,chestTimeShort:cc.Node,chestTimeLong:cc.Node,starPanel:cc.Node,labelTimeLong:cc.Label,labelLongTitle:cc.Label,labelLongPrice:cc.Node,labelTimeShort:cc.Label,labelShortTitle:cc.Label,labelShortPrice:cc.Node,labelNormalTitle:cc.Label,labelStarNum:cc.Label,btnNormal:cc.Button,btnTimeLong:cc.Button,btnTimeShort:cc.Button},onLoad:function(){this._updateStarChestState();var e=l.getInstance().chestCollectCfg;this.labelShortPrice.getComponent("LabelInteger").setValue(e.chestShort.price),this.labelLongPrice.getComponent("LabelInteger").setValue(e.chestLong.price),this.updateState(0),this.schedule(this.updateState,.5,this)},onDestroy:function(){Global.eventMgr.emit(n.EVENT_REFRESH_PROP_LIST)},_updateStarChestState:function(){var e=l.getInstance().chestCollectCfg,t=r.getInstance().chestObj.starNumCollect,o=e.chestStar.needStar;o<=t?(this.labelNormalTitle.node.active=!0,this.starPanel.active=!1,this.setBtnEnable(this.btnNormal,!0)):(this.labelNormalTitle.node.active=!1,this.starPanel.active=!0,this.setBtnEnable(this.btnNormal,!1),this.labelStarNum.string=t+"/"+o)},onBtnBuy:function(e,t){var o=this;Global.audioMgr.playEffect(Global.audioMgr.effTouch);var n=l.getInstance().chestCollectCfg;if("short"===t){var i=n.chestShort.price;s.costCoins(i,function(){o.onBtnOpen(null,"short")},function(){cc.log("金币不足，购买宝箱失败.")})}else{var r=n.chestLong.price;s.costCoins(r,function(){o.onBtnOpen(null,"long")},function(){cc.log("金币不足，购买宝箱失败.")})}},onBtnOpen:function(e,t){Global.audioMgr.playEffect(Global.audioMgr.effTouch2Show),r.getInstance().chestObj.showChestTips=!1;var o=l.getInstance().chestCollectCfg,n=r.getInstance().chestObj,i=null;"normal"===t?(n.starNumCollect-=o.chestStar.needStar,i=this._generateNormalReward(),this._updateStarChestState()):"short"===t?(n.shortOpenTime=u.time()+o.chestShort.timeNeed,i=this._generateShotReward()):(n.longOpenTime=u.time()+o.chestLong.timeNeed,i=this._generateLongReward()),a.getInstance().showChestCollectResView(i)},_generateNormalReward:function(){var e=l.getInstance().chestCollectCfg.chestStar,t=u.randomByWeight(e.props[0],"weight"),o=u.randomInteger(t.minNum,t.maxNum),n=u.randomByWeight(e.props[1],"weight");n=u.randomByWeight(n.props,"weight");var i=u.randomInteger(n.minNum,n.maxNum),r=u.randomInteger(e.minCoins,e.maxCoins),a=[];return 0<o&&a.push({propId:t.propId,propNum:o}),0<i&&a.push({propId:n.propId,propNum:i}),0<r&&a.push({propId:0,propNum:r}),cc.log("starChest: "+JSON.stringify(a)),a},_generateShotReward:function(){var e=l.getInstance().chestCollectCfg.chestShort,t=[],o=u.randomInteger(e.minCoins,e.maxCoins);0<o&&t.push({propId:0,propNum:o});var n=u.randomByWeight(e.props[0],"weight");if(-1!==n.propId){var i=u.randomInteger(n.minNum,n.maxNum);0<i&&t.push({propId:n.propId,propNum:i})}var r=u.randomByWeight(e.props[1],"weight");if(-1!==r.propId&&-1!==(r=u.randomByWeight(r.props,"weight")).propId){var a=u.randomInteger(r.minNum,r.maxNum);0<a&&t.push({propId:r.propId,propNum:a})}return cc.log("shortChest: "+JSON.stringify(t)),t},_generateLongReward:function(){var e=l.getInstance().chestCollectCfg.chestLong,t=[],o=u.randomInteger(e.minCoins,e.maxCoins);0<o&&t.push({propId:0,propNum:o});var n=u.randomByWeight(e.props[0],"weight");if(-1!==n.propId){var i=u.randomInteger(n.minNum,n.maxNum);0<i&&t.push({propId:n.propId,propNum:i})}var r=u.randomByWeight(e.props[1],"weight"),a=u.randomInteger(r.minNum,r.maxNum);0<a&&t.push({propId:r.propId,propNum:a});var s=u.randomByWeight(e.props[2],"weight"),c=u.randomInteger(s.minNum,s.maxNum);return 0<c&&t.push({propId:s.propId,propNum:c}),cc.log("longChest: "+JSON.stringify(t)),t},setBtnEnable:function(e,t){e.interactable=t,e.node.opacity=t?255:130},updateState:function(e){if(!i.getInstance().isDeviceTimeValid())return this.setBtnEnable(this.btnTimeShort,!1),void this.setBtnEnable(this.btnTimeLong,!1);l.getInstance().chestCollectCfg;var t=r.getInstance().chestObj;u.time()>=t.shortOpenTime?(this.labelShortTitle.node.active=!0,this.labelTimeShort.node.active=!1,this.setBtnEnable(this.btnTimeShort,!0)):(this.labelShortTitle.node.active=!1,this.labelTimeShort.node.active=!0,this.setBtnEnable(this.btnTimeShort,!1),t.shortOpenTime>=u.time()&&(this.labelTimeShort.string=u.formatTime(t.shortOpenTime-u.time()))),u.time()>=t.longOpenTime?(this.labelLongTitle.node.active=!0,this.labelTimeLong.node.active=!1,this.setBtnEnable(this.btnTimeLong,!0)):(this.labelLongTitle.node.active=!1,this.labelTimeLong.node.active=!0,this.setBtnEnable(this.btnTimeLong,!1),t.longOpenTime>=u.time()&&(this.labelTimeLong.string=u.formatTime(t.longOpenTime-u.time())))}}),cc._RF.pop()},{"./../common/CoinsMgr":"CoinsMgr","./../common/DataMgr":"DataMgr","./../common/GCONFIG":"GCONFIG","./../common/GameCfg":"GameCfg","./../common/ServerTimeMgr":"ServerTimeMgr","./../common/UtilsCross":"UtilsCross","./../common/UtilsOther":"UtilsOther","./../common/ViewMgr":"ViewMgr"}],ChestRewardCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"b61b2dMtftOBapMfR0OL3vT","ChestRewardCtrl");var n=cc.Enum({CHEST_OPENED:1,CHEST_CLOSED:2}),i=cc.Enum({CHEST_TYPE_COINS:0,CHEST_TYPE_POKER_WILD:1,CHEST_TYPE_POKER_CLEAN_CATEGORY:2,CHEST_TYPE_POKER_CLEAN_RANDOM:3,CHEST_TYPE_POKER_ADD_HAND:4,CHEST_TYPE_POKER_ADD_TIME:5,CHEST_TYPE_FREE_LEVEL:6,CHEST_TYPE_POKER_ELIMINATE_ALERT:7});cc.Class({extends:cc.Component,properties:{panel:cc.Node,spProp:cc.Sprite,spCoins:cc.Sprite,spCoinsBg:cc.Sprite,labelReward:cc.Node,aniSke:sp.Skeleton,atlasProp:cc.SpriteAtlas,coinsSpritFrame:cc.SpriteFrame,_chestState:n.CHEST_OPENED,chestState:{type:n,set:function(e){this._setState(e)},get:function(){return this._chestState}},_chestType:i.CHEST_TYPE_COINS,chestType:{type:i,set:function(e){this._setType(e)},get:function(){return this._chestType}},_chestReward:0,chestReward:{type:cc.Integer,min:0,set:function(e){this._chestReward=e,this.labelReward.getComponent("LabelInteger").setValue(e)},get:function(){return this._chestReward}}},statics:{ChestState:n,ChestType:i},setStateWithAni:function(e,t,o){void 0===t&&(t=!1),this._setState(e,t,o)},_setState:function(e,t,o){switch(cc.log(e),this._chestState=e){case n.CHEST_OPENED:if(t)this.aniSke.setToSetupPose(),this.aniSke.setAnimation(0,"kai",!1),this.aniSke.addAnimation(0,"kai_loop",!0),this.getComponent(cc.Animation).play("chestOpen",!1).once("finished",function(){o&&o(),Global.audioMgr.playEffect(Global.audioMgr.effChestRes)}),Global.audioMgr.playEffect(Global.audioMgr.effChestOpen);else this.aniSke.setToSetupPose(),this.aniSke.setAnimation(0,"state_opened",!1),this.getComponent(cc.Animation).play("chestOpenState",!1),o&&o();break;case n.CHEST_CLOSED:if(t)this.aniSke.setToSetupPose(),this.aniSke.setAnimation(0,"off",!1),this.getComponent(cc.Animation).play("chestClose",!1).once("finihsed",function(){o&&o()}),Global.audioMgr.playEffect(Global.audioMgr.effChestClose);else this.aniSke.setToSetupPose(),this.aniSke.setAnimation(0,"state_closed",!1),this.getComponent(cc.Animation).play("chestCloseState",!1),o&&o()}},_setType:function(e){switch(this._chestType=e){case i.CHEST_TYPE_COINS:}},initChest:function(e,t){this.chestType=e,this.chestReward=t,0===e?(this.spProp.node.active=!1,this.spCoins.node.active=!0,this.spCoinsBg.node.active=!0,this.spCoins.spriteFrame=this.coinsSpritFrame):(this.spProp.node.active=!0,this.spCoins.node.active=!1,this.spCoinsBg.node.active=!1,this.spProp.spriteFrame=this.atlasProp.getSpriteFrame("icon_ig_daojupai_0"+e))}}),cc._RF.pop()},{}],ChestRewardViewCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"88319+21QJKtYO2Nehgrg5q","ChestRewardViewCtrl");var i=e("./../common/GCONFIG"),p=e("./../common/UtilsOther"),d=e("./../common/DataMgr"),f=e("./ChestRewardCtrl"),g=e("./../common/GameCfg"),n=e("./../model/PropModel"),r=e("./../common/CoinsMgr"),m=cc.Enum({SELECT_CHEST:1,SHOW_RES:2,SHOW_AD_TIP:3,SHOW_PAY_TIP:4});cc.Class({extends:cc.Component,properties:{chestPanel:cc.Node,resPanel:cc.Node,adPanel:cc.Node,payPanel:cc.Node,title:cc.Node,resChest:cc.Node,labelPay:cc.Node,labelContinue:cc.Label,_viewState:m.SELECT_CHEST,viewState:{type:m,set:function(e){this._setViewState(e)},get:function(){return this._viewState}}},_setViewState:function(e){switch(this._viewState=e){case m.SELECT_CHEST:this.chestPanel.active=!0,this.adPanel.active=!1,this.payPanel.active=!1,this.resPanel.active=!1,this.title.active=!1;break;case m.SHOW_RES:this.chestPanel.active=!1,this.adPanel.active=!1,this.payPanel.active=!1,this.resPanel.active=!0,this.title.active=!1;break;case m.SHOW_AD_TIP:this.chestPanel.active=!1,this.adPanel.active=!0,this.payPanel.active=!1,this.resPanel.active=!1,this.title.active=!1;break;case m.SHOW_PAY_TIP:this.chestPanel.active=!1,this.adPanel.active=!1,this.payPanel.active=!0,this.resPanel.active=!1,this.title.active=!1}},onLoad:function(){this.touch=!1,this.selectIndex=0,this.viewState=m.SELECT_CHEST;var e=g.getInstance().chestRewardCfg,t=e.chestRewardCoins[0],o=e.chestRewardProps,n=parseInt(Math.random()*(t.maxCoins-t.minCoins)+t.minCoins),i=parseInt(n*t.samllRatio),r=n-i,a=p.randomByWeight(o,"weight");if(cc.log("连续 "+d.getInstance().chestObj.oneOnlyNum+" 次没有开第二宝箱了."),d.getInstance().chestObj.oneOnlyNum<3)this.chestArr=[{type:f.ChestType.CHEST_TYPE_COINS,reward:i},{type:f.ChestType.CHEST_TYPE_COINS,reward:r},{type:a.propId,reward:a.count}];else if(3===d.getInstance().chestObj.oneOnlyNum)this.chestArr=[{type:a.propId,reward:a.count},{type:f.ChestType.CHEST_TYPE_COINS,reward:i},{type:f.ChestType.CHEST_TYPE_COINS,reward:r}];else if(4===d.getInstance().chestObj.oneOnlyNum)this.chestArr=[{type:f.ChestType.CHEST_TYPE_COINS,reward:i},{type:a.propId,reward:a.count},{type:f.ChestType.CHEST_TYPE_COINS,reward:r}];else{var s=p.randomByWeight(o,"weight");this.chestArr=[{type:f.ChestType.CHEST_TYPE_COINS,reward:i},{type:a.propId,reward:a.count},{type:s.propId,reward:s.count}]}for(var c=this.chestPanel.getChildren(),l=0;l<c.length;l++){var u=c[l],h=this.chestArr[l];u.getComponent("ChestRewardCtrl").initChest(h.type,h.reward)}},start:function(){this.scheduleOnce(function(e){for(var t=this.chestPanel.getChildren(),o=0;o<t.length;o++){t[o].getComponent("ChestRewardCtrl").setStateWithAni(f.ChestState.CHEST_CLOSED,!0)}this.scheduleOnce(function(e){this.showDisruptAni()},1,this)},1,this)},onEnable:function(){this.chestPanel.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),Global.eventMgr.on(i.EVENT_WATCH_AD_FINISHED,this.onWatchAdFinished,this),Global.eventMgr.on(i.EVENT_PAY_FOR_OPEN_CHEST,this.onPayFinished,this)},onDisable:function(){this.chestPanel.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),Global.eventMgr.off(i.EVENT_WATCH_AD_FINISHED,this.onWatchAdFinished,this),Global.eventMgr.off(i.EVENT_PAY_FOR_OPEN_CHEST,this.onPayFinished,this)},showDisruptAni:function(){Global.audioMgr.playEffect(Global.audioMgr.effChestRolling);var e=6+parseInt(4*cc.random0To1()),t=this.getComponent(cc.Animation).play("disruptChest");t.repeatCount=e,t.on("finished",function(){cc.log("finished."+e+this.touch),this.touch=!0,this.title.active=!0},this)},reSelectChest:function(){this.viewState=m.SELECT_CHEST,this.title.active=!0,this.touch=!0},onBtnContinue:function(e,t){if(cc.log("continue."),Global.audioMgr.playEffect(Global.audioMgr.effTouch),3<=this.selectIndex)this.onBtnDone();else{var o=g.getInstance().chestRewardCfg.chestRewardCoins[0],n=o.openTwoCost;2===this.selectIndex&&(n=o.openThreeCost),this.labelPay.getComponent("LabelInteger").setValue(n,!1),this.viewState=m.SHOW_PAY_TIP}},onBtnDone:function(e,t){1===this.selectIndex?d.getInstance().chestObj.oneOnlyNum++:d.getInstance().chestObj.oneOnlyNum=0,Global.eventMgr.emit(i.EVENT_POP_VIEW),Global.gameMgr.transitonToIsland(),Global.audioMgr.playEffect(Global.audioMgr.effTouch)},onBtnPay:function(e,t){var o=g.getInstance().chestRewardCfg.chestRewardCoins[0],n=o.openTwoCost;2===this.selectIndex&&(n=o.openThreeCost),cc.log("pay for open chest. price:"+n),r.costCoins(n,function(){Global.eventMgr.emit(i.EVENT_PAY_FOR_OPEN_CHEST)},function(){cc.log("金币不足.")}),Global.audioMgr.playEffect(Global.audioMgr.effTouch)},onBtnWatchVideo:function(){cc.log("watch for open chest."),Global.eventMgr.emit(i.EVENT_WATCH_AD_FINISHED),Global.audioMgr.playEffect(Global.audioMgr.effTouch)},onTouchEnd:function(e,t){if(this.touch){var o=e.getLocation();o=this.chestPanel.convertToNodeSpaceAR(o),cc.log(JSON.stringify(o));for(var n=this.chestPanel.getChildren(),i=0;i<n.length;i++){var r=n[i];if(cc.rectContainsPoint(r.getBoundingBox(),o)){this._onSelectChest(r);break}}}},_onSelectChest:function(e){this.touch=!1;var t=this.chestArr[this.selectIndex];this.selectIndex++,e.getComponent("ChestRewardCtrl").initChest(t.type,t.reward),e.getComponent("ChestRewardCtrl").setStateWithAni(f.ChestState.CHEST_OPENED,!1),this.resChest.getComponent("ChestRewardCtrl").initChest(t.type,t.reward),this.giveReward(t),this.viewState=m.SHOW_RES,this.resChest.getComponent("ChestRewardCtrl").setStateWithAni(f.ChestState.CHEST_OPENED,!0,function(){Global.uiUpdater.updateUserCoins()}),3<=this.selectIndex&&(this.labelContinue.string="Done")},giveReward:function(e){e.type===f.ChestType.CHEST_TYPE_COINS?d.getInstance().playerObj.coins+=e.reward:n.getModel(e.type).addProp(e.reward)},onWatchAdFinished:function(e){cc.log("on watch ad for chest finished."),this.reSelectChest()},onPayFinished:function(e){cc.log("on pay for chest finished."),this.reSelectChest()}}),cc._RF.pop()},{"./../common/CoinsMgr":"CoinsMgr","./../common/DataMgr":"DataMgr","./../common/GCONFIG":"GCONFIG","./../common/GameCfg":"GameCfg","./../common/UtilsOther":"UtilsOther","./../model/PropModel":"PropModel","./ChestRewardCtrl":"ChestRewardCtrl"}],ClassicGameModel:[function(e,t,o){"use strict";cc._RF.push(t,"b7a4b2xnslNgoDHHrZ78WNP","ClassicGameModel");var n=e("./../common/GCONFIG"),i=e("./../common/DataMgr"),r=e("./../common/ServerTimeMgr"),a=e("PropModel"),s=a.Type,c=e("./../common/UtilsCross"),l=cc.Class({properties:{_savedData:null,addedCompletedDays:0,completedDays:{get:function(){return this._savedData.completedDays},set:function(e){e>this._savedData.completedDays&&(this.addedCompletedDays=e-this._savedData.completedDays),this._savedData.completedDays=e}},lastRefreshTime:{get:function(){return this._savedData.lastRefreshTime},set:function(e){this._savedData.lastRefreshTime=e}},removedPeaks:{get:function(){return this._savedData.removedPeaks},set:function(e){this._savedData.removedPeaks=e}},isCompleteDayTask:{get:function(){return this.removedPeaks>=l.GAME_TOTAL_PEAKS}},dayRewardIdx:{get:function(){return this._savedData.dayRewardIdx},set:function(e){this._savedData.dayRewardIdx=e}},recommendPropIdx:{get:function(){return this._savedData.recommendPropIdx},set:function(e){this._savedData.recommendPropIdx=e}},recommendPropTimes:{get:function(){return this._savedData.recommendPropTimes},set:function(e){this._savedData.recommendPropTimes=e}},isRecommendProp:{get:function(){return this._savedData.isRecommendProp},set:function(e){this._savedData.isRecommendProp=e}},isUseRecommend:{get:function(){return this._savedData.isUseRecommend},set:function(e){this._savedData.isUseRecommend=e}},isAlreadyPlay:{get:function(){return this._savedData.isAlreadyPlay},set:function(e){this._savedData.isAlreadyPlay=e}}},ctor:function(){var e=i.getInstance().playerObj;e.classicGame||(e.classicGame=cc.js.createMap()),this._savedData=e.classicGame,void 0===this.completedDays&&(this.completedDays=0),void 0===this.lastRefreshTime&&(this.lastRefreshTime=-1),void 0===this.removedPeaks&&(this.removedPeaks=0),void 0===this.dayRewardIdx&&(this.dayRewardIdx=-1),void 0===this.recommendPropIdx&&(this.recommendPropIdx=-1),void 0===this.recommendPropTimes&&(this.recommendPropTimes=0),void 0===this.isRecommendProp&&(this.isRecommendProp=!0),void 0===this.isUseRecommend&&(this.isUseRecommend=!1),void 0===this.isAlreadyPlay&&(this.isAlreadyPlay=!1)},completeDayProgress:function(e){e>this.removedPeaks&&(this.removedPeaks=e)>=l.GAME_TOTAL_PEAKS&&this.completedDays++},calcDayRewardIdx:function(){var e=l.TARGET_INFOS;for(var t in e)if(this.removedPeaks==e[t].removePeaks)return Number(t);return-1},getRecommendProp:function(){void 0!==this.recommendPropIdx&&-1!=this.recommendPropIdx||(this.recommendPropIdx=0);var e=l.RECOMMEND_PROPS[this.recommendPropIdx];return a.getModel(e)},refreshData:function(e){r.getInstance().isDeviceTimeValid()&&(this.lastRefreshTime=e,this.completedDays>=l.TASK_TOTAL_DAYS&&(this.completedDays=0),this.removedPeaks=0,this.dayRewardIdx=-1,this.recommendPropIdx=Math.max(0,this.recommendPropIdx+1),this.recommendPropIdx>=l.RECOMMEND_PROPS.length&&(this.recommendPropIdx=0),this.recommendPropTimes=0,this.isRecommendProp=!0,this.isUseRecommend=!1,Global.eventMgr.emit(n.EVENT_REFRESH_GAME_CLASSIC_ENTRY))},onNextProgress:function(){this.completeDayProgress(l.GAME_TOTAL_PEAKS),this.refreshData((new Date).getTime())},pushLocalNotification:function(){if(this.isAlreadyPlay){var e=new Date,t=e.getHours(),o=60*t*60+60*e.getMinutes()+e.getSeconds(),n=0;if(0<(n=t>=l.RERESH_HOURS_7DAYS?86400-o+60*l.RERESH_HOURS_7DAYS*60:60*l.RERESH_HOURS_7DAYS*60-o)){c.pushLocalNotification("","New classic begin, you have last 7~1 day(s) to get free coins!",n,!1,"__key_classicGame_refresh");for(var i=0;i<30;i++)n+=86400,c.pushLocalNotification("","New classic begin, you have last 7~1 day(s) to get free coins!",n,!1,"__key_classicGame_refresh_later_"+(i+1))}}}}),u=null;l.getInstance=function(){return u||(u=new l),u},l.TARGET_INFOS=[{removePeaks:1,rewardCoins:150},{removePeaks:2,rewardCoins:350},{removePeaks:3,rewardCoins:550}],l.REWARD_COINS_7DAYS=3e3,l.RERESH_HOURS_7DAYS=8,l.GAME_TOTAL_PEAKS=3,l.TASK_TOTAL_DAYS=7,l.RECOMMEND_PROPS=[s.POKER_WILD,s.POKER_CLEAN_CATEGORY,s.POKER_CLEAN_RANDOM,s.POKER_ADD_HAND],t.exports=l,cc._RF.pop()},{"./../common/DataMgr":"DataMgr","./../common/GCONFIG":"GCONFIG","./../common/ServerTimeMgr":"ServerTimeMgr","./../common/UtilsCross":"UtilsCross",PropModel:"PropModel"}],CoinsMgr:[function(e,t,o){"use strict";cc._RF.push(t,"28fd1biYCRK2aPpm7QT7GDe","CoinsMgr");var a=e("./ViewMgr"),s=e("./DataMgr"),n=cc.Class({ctor:function(){}});n.costCoins=function(e,t,o,n){var i=s.getInstance().playerObj;if(n=void 0===n||n,e>i.coins){var r=null;r=n?function(){a.getInstance().showShopView()}:o,a.getInstance().showNormalTipView("You are out of coins. Visit the shop for more.",null,"OK",null,r)}else i.coins-=e,Global.uiUpdater.updateUserCoins(),t&&t()},n.addCoins=function(e){s.getInstance().playerObj.coins+=e,Global.uiUpdater.updateUserCoins()},t.exports=n,cc._RF.pop()},{"./DataMgr":"DataMgr","./ViewMgr":"ViewMgr"}],CoinsPanelCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"aae6cLHG+hCGJlVAhw86QXV","CoinsPanelCtrl");var n=e("./common/DataMgr"),i=e("./common/ViewMgr"),r=e("./common/GCONFIG");cc.Class({extends:cc.Component,properties:{labelCoins:cc.Node,iconCoins:cc.Node},onBtnBuy:function(e,t){i.getInstance().showShopView(),Global.audioMgr.playEffect(Global.audioMgr.effTouch2Show)},onLoad:function(){var e=n.getInstance().playerObj.coins;this.labelCoins.getComponent("LabelInteger").setValue(e,!1)},start:function(){},onEnable:function(){Global.eventMgr.on(r.EVENT_USER_COINS_CHANGED,this.updateUI,this)},onDisable:function(){Global.eventMgr.off(r.EVENT_USER_COINS_CHANGED,this.updateUI,this)},updateUI:function(e){this.labelCoins.getComponent("LabelInteger").setValue(parseInt(e.detail),!0)},getIconCoins:function(){return this.iconCoins},getCoinsWorldPos:function(){return this.iconCoins.parent.convertToWorldSpaceAR(this.iconCoins.getPosition())}}),cc._RF.pop()},{"./common/DataMgr":"DataMgr","./common/GCONFIG":"GCONFIG","./common/ViewMgr":"ViewMgr"}],DataMgr:[function(e,t,o){"use strict";cc._RF.push(t,"f0614tDnHdKLrNGj3kI3yCG","DataMgr");var n=e("./DataObject"),i=e("./GCONFIG"),r=cc.Class({ctor:function(){this.playerObj=new n.PlayerObject,this.iapObj=new n.IapObject,this.settingObj=new n.SettingObject,this.guideObj=new n.GuideObject,this.chestObj=new n.ChestObject},statics:{instance:null,getInstance:function(){return null==r.instance&&(r.instance=new r),r.instance}},loadDataFromLocal:function(){cc.log("...load local data start...");var e=cc.sys.localStorage.getItem(i.KEY_PLAYERDATA);e&&this.playerObj.parse(JSON.parse(e)),(e=cc.sys.localStorage.getItem(i.KEY_IAPDATA))&&this.iapObj.parse(JSON.parse(e)),(e=cc.sys.localStorage.getItem(i.KEY_SETTING))&&this.settingObj.parse(JSON.parse(e)),(e=cc.sys.localStorage.getItem(i.KEY_GAME_GUIDE_DATA))&&this.guideObj.parse(JSON.parse(e)),(e=cc.sys.localStorage.getItem(i.KEY_CHEST_DATA))&&this.chestObj.parse(JSON.parse(e)),cc.log("...load local data finished...")},saveDataToLocal:function(){cc.log("...save data to local start..."),cc.sys.localStorage.setItem(i.KEY_PLAYERDATA,this.playerObj.toString()),cc.sys.localStorage.setItem(i.KEY_IAPDATA,this.iapObj.toString()),cc.sys.localStorage.setItem(i.KEY_SETTING,this.settingObj.toString()),cc.sys.localStorage.setItem(i.KEY_GAME_GUIDE_DATA,this.guideObj.toString()),cc.sys.localStorage.setItem(i.KEY_CHEST_DATA,this.chestObj.toString()),cc.log("...save data to local finished...")}});t.exports=r,cc._RF.pop()},{"./DataObject":"DataObject","./GCONFIG":"GCONFIG"}],DataObject:[function(e,t,o){"use strict";cc._RF.push(t,"17a0doA5SJKoqDwFu7p2V05","DataObject");var n=cc.Class({properties:{},parse:function(e){var t;for(t in e)this.hasOwnProperty(t)&&void 0!==e[t]&&null!==e[t]&&(this[t]=e[t]);return this},toString:function(){return JSON.stringify(this)}}),i=cc.Class({extends:n,properties:{name:"player",uid:0,fbid:0,fbtoken:0,level:1,preLevel:1,coins:1e6,starNum:0,islands:[],props:{default:null},classicGame:{default:null}},ctor:function(){this.islands.push(new r),this.props=cc.js.createMap(),this.classicGame=cc.js.createMap(),void 0===this.isControlTime&&(this.isControlTime=!1)}}),r=cc.Class({extends:n,properties:{starInfo:[]},ctor:function(){this.starInfo=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}}),a=cc.Class({extends:n,properties:{type:0,num:0},ctor:function(){},init:function(e,t){this.type=e,this.num=t}}),s=cc.Class({extends:n,properties:{hadPay:0,propRefreshTime:0,prop1hadBuy:!1,prop2hadBuy:!1,prop3hadBuy:!1,shopProps:[],showPropTips:!1,vipValid:!1}}),c=cc.Class({extends:n,properties:{musicOn:!0,effectOn:!0,musicVol:1,effectVol:1,notify:!0}}),l=cc.Class({extends:n,properties:{oneOnlyNum:0,starNumCollect:0,shortOpenTime:0,longOpenTime:0,showChestTips:!1}}),u=cc.Class({extends:n,properties:{}});t.exports={DataObject:n,PlayerObject:i,PropObject:a,IapObject:s,SettingObject:c,GuideObject:u,ChestObject:l},cc._RF.pop()},{}],Encrypt:[function(t,o,n){(function(e){"use strict";cc._RF.push(o,"d01c6ZTO/VDm45rxncbJpPQ","Encrypt");var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(function(e,t){void 0!==n&&void 0!==o?o.exports=t():"function"==typeof define&&"object"===r(define.amd)?define(t):"function"==typeof define&&"object"===r(define.petal)?define(e,[],t):this[e]=t()})("encryptjs",function(G){G={version:"1.0.0",init:function(){console.log("--------------------Applying Encryption Algorithm------------------ ")}};var I=null;void 0!==o&&o.exports&&(I=t("./Algo")),G.encrypt=function(e,t,o){if(128!=o&&192!=o&&256!=o)return"";e=String(e).utf8Encode(),t=String(t).utf8Encode();for(var n=o/8,i=new Array(n),r=0;r<n;r++)i[r]=isNaN(t.charCodeAt(r))?0:t.charCodeAt(r);var a=I.cipher(i,I.keyExpansion(i));a=a.concat(a.slice(0,n-16));for(var s=new Array(16),c=(new Date).getTime(),l=c%1e3,u=Math.floor(c/1e3),h=Math.floor(65535*Math.random()),p=0;p<2;p++)s[p]=l>>>8*p&255;for(var d=0;d<2;d++)s[d+2]=h>>>8*d&255;for(var f=0;f<4;f++)s[f+4]=u>>>8*f&255;for(var g="",m=0;m<8;m++)g+=String.fromCharCode(s[m]);for(var C=I.keyExpansion(a),_=Math.ceil(e.length/16),b=new Array(_),v=0;v<_;v++){for(var E=0;E<4;E++)s[15-E]=v>>>8*E&255;for(var y=0;y<4;y++)s[15-y-4]=v/4294967296>>>8*y;for(var P=I.cipher(s,C),T=v<_-1?16:(e.length-1)%16+1,S=new Array(T),N=0;N<T;N++)S[N]=P[N]^e.charCodeAt(16*v+N),S[N]=String.fromCharCode(S[N]);b[v]=S.join("")}var M=g+b.join("");return M=G.base64Encode(M)},G.decrypt=function(e,t,o){if(128!=o&&192!=o&&256!=o)return"";e=G.base64Decode(String(e)),t=String(t).utf8Encode();for(var n=o/8,i=new Array(n),r=0;r<n;r++)i[r]=isNaN(t.charCodeAt(r))?0:t.charCodeAt(r);var a=I.cipher(i,I.keyExpansion(i));a=a.concat(a.slice(0,n-16));for(var s=new Array(8),c=e.slice(0,8),l=0;l<8;l++)s[l]=c.charCodeAt(l);for(var u=I.keyExpansion(a),h=Math.ceil((e.length-8)/16),p=new Array(h),d=0;d<h;d++)p[d]=e.slice(8+16*d,8+16*d+16);e=p;for(var f=new Array(e.length),g=0;g<h;g++){for(var m=0;m<4;m++)s[15-m]=g>>>8*m&255;for(var C=0;C<4;C++)s[15-C-4]=(g+1)/4294967296-1>>>8*C&255;for(var _=I.cipher(s,u),b=new Array(e[g].length),v=0;v<e[g].length;v++)b[v]=_[v]^e[g].charCodeAt(v),b[v]=String.fromCharCode(b[v]);f[g]=b.join("")}var E=f.join("");return E=E.utf8Decode()};var u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return G.base64Encode=function(e){var t="",o=void 0,n=void 0,i=void 0,r=void 0,a=void 0,s=void 0,c=void 0,l=0;for(e=G._utf8_encode(e);l<e.length;)r=(o=e.charCodeAt(l++))>>2,a=(3&o)<<4|(n=e.charCodeAt(l++))>>4,s=(15&n)<<2|(i=e.charCodeAt(l++))>>6,c=63&i,isNaN(n)?s=c=64:isNaN(i)&&(c=64),t=t+u.charAt(r)+u.charAt(a)+u.charAt(s)+u.charAt(c);return t},G.base64Decode=function(e){var t="",o=void 0,n=void 0,i=void 0,r=void 0,a=void 0,s=void 0,c=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<e.length;)o=u.indexOf(e.charAt(c++))<<2|(r=u.indexOf(e.charAt(c++)))>>4,n=(15&r)<<4|(a=u.indexOf(e.charAt(c++)))>>2,i=(3&a)<<6|(s=u.indexOf(e.charAt(c++))),t+=String.fromCharCode(o),64!=a&&(t+=String.fromCharCode(n)),64!=s&&(t+=String.fromCharCode(i));return t=G._utf8_decode(t)},G._utf8_encode=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",o=0;o<e.length;o++){var n=e.charCodeAt(o);n<128?t+=String.fromCharCode(n):(127<n&&n<2048?t+=String.fromCharCode(n>>6|192):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128)),t+=String.fromCharCode(63&n|128))}return t},G._utf8_decode=function(e){for(var t="",o=0,n=0,i=0,r=0;o<e.length;)(n=e.charCodeAt(o))<128?(t+=String.fromCharCode(n),o++):191<n&&n<224?(i=e.charCodeAt(o+1),t+=String.fromCharCode((31&n)<<6|63&i),o+=2):(i=e.charCodeAt(o+1),r=e.charCodeAt(o+2),t+=String.fromCharCode((15&n)<<12|(63&i)<<6|63&r),o+=3);return t},G.getTextEncryptAndSaveToTextFile=function(e,t,o){throw Error("Command line not supported on this platform")},G.getTextEncryptAndSaveToJSONFile=function(e,t,o){throw Error("Command line not supported on this platform")},G.writeCipherTextToJSON=function(e,t,o,n){null==n&&(n=o,o={});var i="object"===(void 0===o?"undefined":r(o))&&null!==o&&"spaces"in o?o.spaces:this.spaces;try{JSON.stringify(t,o?o.replacer:null,i)+"\n"}catch(e){if(n)return n(e,null)}},void 0===String.prototype.utf8Encode&&(String.prototype.utf8Encode=function(){return unescape(encodeURIComponent(this))}),void 0===String.prototype.utf8Decode&&(String.prototype.utf8Decode=function(){try{return decodeURIComponent(escape(this))}catch(e){return this}}),void 0===String.prototype.base64Encode&&(String.prototype.base64Encode=function(){if("undefined"!=typeof btoa)return btoa(this);if(void 0!==e)return new e(this,"utf8").toString("base64");throw new Error("No Base64 Encode")}),void 0===String.prototype.base64Decode&&(String.prototype.base64Decode=function(){if("undefined"!=typeof atob)return atob(this);if(void 0!==e)return new e(this,"base64").toString("utf8");throw new Error("No Base64 Decode")}),G.init(),G}),cc._RF.pop()}).call(this,t("buffer").Buffer)},{"./Algo":"Algo",buffer:2}],FacebookMgr:[function(e,t,o){"use strict";cc._RF.push(t,"580bedOpK9LVronfmXGcM6P","FacebookMgr");var n=e("./Facebook"),i=cc.Class({ctor:function(){this.facebook=new n,this.inviteFriends=[],this.installFriends=[],this._initSuccess=!1,this._onInviteFriendsCallback=null,this._loginCallback=null,this._loginFailCallback=null,this._permissions=[]},statics:{instance:null,getInstance:function(){return null==i.instance&&(i.instance=new i),i.instance}},initFacebook:function(e,t){this._initSuccess=this.facebook.init(this,e),this._permissions=t},loginFacebook:function(e,t,o,n){this._initSuccess||(this.initFacebook(e,t),this._initSuccess)?(this._permissions=t,this._loginCallback=o,this._loginFailCallback=n,this.facebook.isLoggedIn()?(cc.log("FacebookMgr: to requestInvitableFriends"),this.facebook.requestInvitableFriends(),o&&o()):(cc.log("FacebookMgr: to login"),this.facebook.login(this._permissions))):n&&n()},logout:function(){this.isLogin()&&this.facebook.logout()},getAccessToken:function(){return this.facebook.getAccessToken()},inviteFriendsWithInviteIds:function(e,t,o,n){cc.sys.isMobile?(this._onInviteFriendsCallback=n,this.facebook.inviteFriendsWithInviteIds(e,t,o)):n(!0,null)},getInviteRequest:function(){var e=new Object;this.facebook.api("/me/apprequests","GET",e,"apprequests")},api:function(){var e=new Object;this.facebook.api("/me/app_requests","GET",e,"invitable_friends")},fetchFriends:function(){this.isLogin()&&this.facebook.fetchFriends()},shareLink:function(e,t,o,n,i){this.isLogin()&&(this._shareCallback=i,this.facebook.dialogLink(e,t,o,n))},isLogin:function(){return this._initSuccess&&this.facebook.isLoggedIn()},onLogin:function(e,t){if(!e)return cc.log("FacebookMgr: Facebook login fail  msg: "+t),void(this._loginFailCallback&&this._loginFailCallback());cc.log("FacebookMgr: Facebook login"),this.facebook.requestInvitableFriends(),this._loginCallback&&this._loginCallback()},onInviteFriendsWithInviteIdsResult:function(e,t){if(cc.log("FacebookMgr: onInviteFriendsWithInviteIdsResult "+e+"  "+t),this._onInviteFriendsCallback){var o=this._onInviteFriendsCallback;this._onInviteFriendsCallback=null,o(e,t)}},onFetchFriends:function(e,t){cc.log("FacebookMgr: onFetchFriends "+e),this.installFriends=this.facebook.getInstallFriends();for(var o=0;o<this.installFriends.length;o++){var n=this.installFriends[o];cc.log("-----------"),cc.log(">> uid=%s",n.uid),cc.log(">> name=%s",n.name)}},onRequestInvitableFriends:function(e){cc.log("FacebookMgr: onRequestInvitableFriends "+e),this.inviteFriends=e.data},onAPI:function(e,t){switch(e){case"invitable_friends":this.inviteFriends=JSON.parse(t).data}},onPermission:function(e,t){cc.log("onPermission: "+e+"   msg: "+t)},onSharedSuccess:function(e){cc.log("onSharedSuccess"),this._shareCallback&&(this._shareCallback(),this._shareCallback=null)},onSharedFailed:function(e){cc.log("onSharedFailed == "+JSON.stringify(e)),this._shareCallback&&(this._shareCallback=null)},onSharedCancel:function(){cc.log("onSharedCancel"),this._shareCallback&&(this._shareCallback=null)}});t.exports=i,cc._RF.pop()},{"./Facebook":"Facebook"}],Facebook:[function(e,t,o){"use strict";cc._RF.push(t,"28a5drA9lRCGa1iN7Sh5E/7","Facebook");var n=cc.Class({init:function(e,t){return"undefined"==typeof sdkbox?(cc.log("sdkbox: undefined"),!1):(this._facebookId=t,sdkbox.PluginFacebook.setListener(e),sdkbox.PluginFacebook.init(),cc.log("sdkbox: init"),!0)},isLoggedIn:function(){return sdkbox.PluginFacebook&&sdkbox.PluginFacebook.isLoggedIn()},login:function(e){sdkbox.PluginFacebook&&!sdkbox.PluginFacebook.isLoggedIn()&&sdkbox.PluginFacebook.login(e)},logout:function(){sdkbox.PluginFacebook&&sdkbox.PluginFacebook.isLoggedIn()&&sdkbox.PluginFacebook.logout()},test:function(){sdkbox.PluginFacebook.requestReadPermissions(["public_profile","email","user_friends","publish_actions"]),sdkbox.PluginFacebook.requestPublishPermissions(["publish_actions"])},getUserID:function(){return sdkbox.PluginFacebook&&sdkbox.PluginFacebook.isLoggedIn()?sdkbox.PluginFacebook.getUserID():""},getPermissionList:function(){return sdkbox.PluginFacebook&&sdkbox.PluginFacebook.isLoggedIn()?sdkbox.PluginFacebook.getPermissionList():null},getAccessToken:function(){return sdkbox.PluginFacebook&&sdkbox.PluginFacebook.isLoggedIn()?sdkbox.PluginFacebook.getAccessToken():null},shareLink:function(e,t,o,n){if(sdkbox.PluginFacebook&&sdkbox.PluginFacebook.isLoggedIn()){var i=new Object;i.type="link",i.link=e,i.title=t,i.text=o,i.image=n,sdkbox.PluginFacebook.share(i)}},dialogLink:function(e,t,o,n){if(sdkbox.PluginFacebook&&sdkbox.PluginFacebook.isLoggedIn()){var i=new Object;i.type="link",i.link=e,i.title=t,i.text=o,i.image=n,sdkbox.PluginFacebook.dialog(i)}},inviteFriends:function(e){sdkbox.PluginFacebook&&sdkbox.PluginFacebook.isLoggedIn()&&sdkbox.PluginFacebook.inviteFriends("https://fb.me/"+this._facebookId,e)},inviteFriendsWithInviteIds:function(e,t,o){sdkbox.PluginFacebook&&sdkbox.PluginFacebook.isLoggedIn()&&sdkbox.PluginFacebook.inviteFriendsWithInviteIds(e,t,o)},fetchFriends:function(){sdkbox.PluginFacebook&&sdkbox.PluginFacebook.isLoggedIn()&&sdkbox.PluginFacebook.fetchFriends()},requestInvitableFriends:function(){if(sdkbox.PluginFacebook&&sdkbox.PluginFacebook.isLoggedIn()){var e=new Object;e.fields="id,name",e.limit=100,sdkbox.PluginFacebook.api("/me/invitable_friends","GET",e,"invitable_friends")}},api:function(e,t,o,n){sdkbox.PluginFacebook&&sdkbox.PluginFacebook.isLoggedIn()&&sdkbox.PluginFacebook.api(e,n,o,n)},getInstallFriends:function(){return sdkbox.PluginFacebook.getFriends()},requestReadPermissions:function(e){sdkbox.PluginFacebook&&sdkbox.PluginFacebook.isLoggedIn()&&sdkbox.PluginFacebook.requestReadPermissions(e)},requestPublishPermissions:function(){sdkbox.PluginFacebook&&sdkbox.PluginFacebook.isLoggedIn()&&sdkbox.PluginFacebook.requestPublishPermissions(arr)}});t.exports=n,cc._RF.pop()},{}],FlyEffectCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"28e814B2StKspAi3T8t1ZL8","FlyEffectCtrl");var n=cc.Enum({NULL:-1,NORMAL:-1,STAR:-1,COINS:-1});cc.Class({extends:cc.Component,statics:{Type:n},properties:{nodePop:cc.Node,nodeParticles:cc.Node,pTrailing_1:cc.Node,pTrailing_2:cc.Node,pTrailing_3:cc.Node,pTrailing_4:cc.Node,_type:n.NULL,type:{type:n,get:function(){return this._type},set:function(e){this._type=e,this.pTrailing_1.active=!0,this.pTrailing_2.active=!0,this.pTrailing_3.active=!0,this.pTrailing_4.active=!0,e==n.NORMAL?(this.pTrailing_3.active=!1,this.pTrailing_4.active=!1):e==n.STAR?this.pTrailing_4.active=!1:e==n.COINS&&(this.pTrailing_3.active=!1)}}},onLoad:function(){this.nodePop.active=!1,this.pTrailing_1.active=!1,this.pTrailing_2.active=!1,this.pTrailing_3.active=!1,this.pTrailing_4.active=!1},start:function(){},pop:function(){this.nodePop.active=!0,this.nodeParticles.active=!1}}),cc._RF.pop()},{}],GCONFIG:[function(e,t,o){"use strict";cc._RF.push(t,"71a448E5flHRo1Vv4C5OIl3","GCONFIG");var n=n||{};n.DEBUG_MODE=!1,n.KEY_SETTING="KEY_SETTING",n.KEY_PLAYERDATA="KEY_PLAYERDATA",n.KEY_IAPDATA="KEY_IAPDATA",n.KEY_GAME_GUIDE_DATA="KEY_GAME_GUIDE_DATA",n.KEY_CHEST_DATA="KEY_CHEST_DATA",n.EVENT_ONSPIN="GAME_EVENT_ONSPIN",n.EVENT_STOPSPIN="GAME_EVENT_STOPSPIN",n.EVENT_CHANGE_SCENE="GAME_EVENT_CHANGE_SCENE",n.EVENT_TOUCH_POKER="GAME_EVENT_TOUCH_POKER",n.EVENT_POKER_CHANGE_LOCATION="GAME_EVENT_POKER_CHANGE_LOCATION",n.EVENT_POKER_ELIMINATE="GAME_EVENT_POKER_ELIMINATE",n.EVENT_POKER_NEW="GAME_EVENT_POKER_NEW",n.EVENT_POKER_MOVE_BEGIN="GAME_EVENT_POKER_MOVE_BEGIN",n.EVENT_POKER_MOVE_END="GAME_EVENT_POKER_MOVE_END",n.EVENT_POKER_UNDO="GAME_EVENT_POKER_UNDO",n.EVENT_GAME_POKER_ALERT="GAME_POKER_ALERT",n.EVENT_PROPBAR_CLOSE="GAME_EVENT_PROPBAR_CLOSE",n.EVENT_USE_PROP="GAME_EVENT_USE_PROP",n.EVENT_GAME_REFRESH_INFO="GAME_EVENT_REFRESH_INFO",n.EVENT_GAME_SUCCESS="GAME_EVENT_SUCCESS",n.EVENT_GAME_USE_ADD_TIME="GAME_USE_ADD_TIME",n.EVENT_GAME_USE_ADD_HANDS="GAME_USE_ADD_HANDS",n.EVENT_WATCH_AD_FINISHED="GAME_EVENT_WATCH_AD_FINISHED",n.EVENT_PAY_FOR_OPEN_CHEST="GAME_EVENT_PAY_FOR_OPEN_CHEST",n.EVENT_POP_VIEW="GAME_EVENT_POP_VIEW",n.EVENT_USER_COINS_CHANGED="GAME_EVENT_USER_COINS_CHANGED",n.EVENT_REFRESH_PROP_LIST="REFRESH_PROP_LIST",n.EVENT_REFRESH_GAME_CLASSIC_ENTRY="REFRESH_GAME_CLASSIC_ENTRY",n.EVENT_REFRESH_SHOP_PROP="GAME_EVENT_REFRESH_SHOP_PROP",n.USER_BASE_COINS=1e3,n.SIBLING_INDEX_MAX=100,n.LOCAL_ZINDEX_MAX=100,n.IAPCFG={coins1:{price:3.99,coins:15e3,key:"coins1"},coins2:{price:19.99,coins:75e3,key:"coins2"},coins3:{price:39.99,coins:165e3,key:"coins3"},coins4:{price:59.99,coins:3e5,key:"coins4"},vip:{price:9.99,key:"vip"},prop1:{price:1.99,key:"prop1"},prop2:{price:1.99,key:"prop2"},prop3:{price:2.99,key:"prop3"},prop4:{price:1.99,key:"prop4"},prop5:{price:1.99,key:"prop5"},prop7:{price:.99,key:"prop7"}},t.exports=n,cc._RF.pop()},{}],GameCfg:[function(e,t,o){"use strict";cc._RF.push(t,"35e68Y9Jy1Cc4NFiGgoZhQL","GameCfg");var n=cc.Class({properties:{isLoadOver:!1,chestCollectCfg:null,chestRewardCfg:null,shopCfg:null},loadLocalCfg:function(n){var e=this;this.loadCounts=0;var i=["chestCollectCfg","chestRewardCfg","shopCfg"],t=function(o){cc.loader.loadRes("config/"+o,function(e,t){e?cc.log("load local cfg "+o+" error: "+e):(cc.log("load local cfg "+o+" suc."),this[o]=t),this.loadCounts++,this.isLoadOver=this.loadCounts>=i.length,this.isLoadOver&&n&&n()}.bind(e))},o=!0,r=!1,a=void 0;try{for(var s,c=i[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){t(s.value)}}catch(e){r=!0,a=e}finally{try{!o&&c.return&&c.return()}finally{if(r)throw a}}}});n.instance=null,n.getInstance=function(){return n.instance||(n.instance=new n),n.instance},t.exports=n,cc._RF.pop()},{}],GameClassicEndCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"f4a10aSk41PGqlCNiFxEvXn","GameClassicEndCtrl");var n=e("./../common/GCONFIG"),a=e("./../model/ClassicGameModel"),i=e("GameClassicTargetEndCtrl"),r=e("./../common/ViewMgr"),s=e("GameDataMgr"),c=e("./../common/DataMgr"),l=e("./../common/UtilsOther"),u=e("./../FlyEffectCtrl"),h=e("./../CoinsPanelCtrl");cc.Class({extends:cc.Component,properties:{coinPanel:h,labelGameTime:cc.Label,targets:[i],blockLayer:cc.BlockInputEvents},onLoad:function(){var e=this;this.labelGameTime.string=l.formatTime(s.getInstance().gameTime);var t=a.getInstance();for(var o in this.targets){var n=this.targets[o];n.coins=a.TARGET_INFOS[o].rewardCoins,n.isCompleted=Number(o)<=t.dayRewardIdx}t.calcDayRewardIdx()>t.dayRewardIdx?(this.blockLayer.node.active=!0,this.node.runAction(cc.sequence(cc.delayTime(.2),cc.callFunc(function(){e.showRewards()})))):this.blockLayer.node.active=!1},showRewards:function(){var o=this,n=a.getInstance(),i=n.dayRewardIdx;n.dayRewardIdx=n.calcDayRewardIdx();var r=0,e=function(e){var t=o.targets[e];Number(e)>i&&Number(e)<=n.dayRewardIdx&&(o.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){t.getComponent(cc.Animation).play("gameClassicTargetEnd_ani"),l.runFlyEffect(u.Type.COINS,o.node,t.getIconCoinsNode(),o.coinPanel.getIconCoins(),function(){Number(e)==i+1&&Global.uiUpdater.updateUserCoins()})}))),r+=t.coins)};for(var t in this.targets)e(t);0<r&&(c.getInstance().playerObj.coins+=r),this.node.runAction(cc.sequence(cc.delayTime(.5*(n.dayRewardIdx-i)),cc.callFunc(function(){o.blockLayer.node.active=!1})))},onBtnReturn:function(){Global.gameMgr.transitonToIsland(),s.isContinueClassic=!1,Global.audioMgr.playEffect(Global.audioMgr.effTouch)},onBtnNext:function(){Global.eventMgr.emit(n.EVENT_POP_VIEW),r.getInstance().showGameClassicEntry(),Global.audioMgr.playEffect(Global.audioMgr.effTouch)}}),cc._RF.pop()},{"./../CoinsPanelCtrl":"CoinsPanelCtrl","./../FlyEffectCtrl":"FlyEffectCtrl","./../common/DataMgr":"DataMgr","./../common/GCONFIG":"GCONFIG","./../common/UtilsOther":"UtilsOther","./../common/ViewMgr":"ViewMgr","./../model/ClassicGameModel":"ClassicGameModel",GameClassicTargetEndCtrl:"GameClassicTargetEndCtrl",GameDataMgr:"GameDataMgr"}],GameClassicEntryCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"8c3f3jXnNlGzpdhLbbI9cYH","GameClassicEntryCtrl");var n=e("./../common/GCONFIG"),i=e("./../game/GameDataMgr"),p=e("./../model/ClassicGameModel"),r=e("GameClassicTargetCtrl"),d=(e("./../common/UtilsOther"),e("./../common/DataMgr")),f=e("./../FlyEffectCtrl"),a=e("./../CoinsPanelCtrl"),s=e("./../common/ViewMgr");cc.Class({extends:cc.Component,properties:{coinPanel:a,propIcon:cc.Sprite,propName:cc.Label,propDesc:cc.Label,progressBg:cc.Node,stageOff:cc.SpriteFrame,stageOn:cc.SpriteFrame,rewardIcon:cc.Sprite,progressDesc:cc.Label,labelRewardCoins:cc.Label,btnPlay:cc.Button,nextProgress:cc.Button,_completedDays:0,completedDays:{type:cc.Integer,range:[0,p.TASK_TOTAL_DAYS,1],tooltip:"7日挑战完成的天数",get:function(){return this._completedDays},set:function(e){this._completedDays=e,this.refreshView()}},targets:[r],flyEffect:cc.Prefab},onLoad:function(){for(var e in this.nextProgress.node.active=n.DEBUG_MODE,this.completedDays=p.getInstance().completedDays,this.labelRewardCoins.string=p.REWARD_COINS_7DAYS,this.targets)this.targets[e].targetIdx=Number(e);Global.eventMgr.on(n.EVENT_REFRESH_GAME_CLASSIC_ENTRY,this.refreshView,this),this.refreshView()},onDestroy:function(){Global.eventMgr.targetOff(this)},refreshView:function(){var o=this,e=p.getInstance(),n=e.getRecommendProp();cc.loader.loadRes("icon_prop",cc.SpriteAtlas,function(e,t){e||(o.propIcon.spriteFrame=t.getSpriteFrame(cc.js.formatStr("icon_ig_daojupai_%s",("00"+n.type).slice(-2))))}),this.propName.string=n.baseData.name.toUpperCase();for(var t=1;t<=p.TASK_TOTAL_DAYS;t++){cc.find(cc.js.formatStr("stage_%d/iconComplete",t),this.progressBg).opacity=t<=this.completedDays?255:0}var i=p.getInstance().addedCompletedDays;if(0<i){for(var r=this.completedDays-i+1;r<=this.completedDays;r++)0<r&&cc.find(cc.js.formatStr("stage_%d",r),this.progressBg).getComponent(cc.Animation).play("gameClassicDayStage_ani");if(this.completedDays>=p.TASK_TOTAL_DAYS){d.getInstance().playerObj.coins+=p.REWARD_COINS_7DAYS;var a=cc.instantiate(this.flyEffect),s=this.node.convertToNodeSpaceAR(this.rewardIcon.node.parent.convertToWorldSpaceAR(this.rewardIcon.node.getPosition()));a.setPosition(s),this.node.addChild(a);var c=a.getComponent(f);c.type=f.Type.COINS;var l=this.node.convertToNodeSpaceAR(this.coinPanel.getCoinsWorldPos()),u=(cc.pDistance(s,l),[cc.p(s.x-100,s.y-200),cc.p(l.x+100,l.y-200),l]),h=new cc.BezierTo(.75,u);a.runAction(cc.sequence(h,cc.callFunc(function(){c.pop(),Global.uiUpdater.updateUserCoins()}),cc.delayTime(2),cc.removeSelf()))}e.addedCompletedDays=0}},onBtnReturn:function(){"island"===cc.director.getScene().name?Global.eventMgr.emit(n.EVENT_POP_VIEW):Global.gameMgr.transitonToIsland(),i.isContinueClassic=!1,Global.audioMgr.playEffect(Global.audioMgr.effTouch)},onBtnPlay:function(){i.isInClassic=!0,Global.gameMgr.transitionToGame(),Global.audioMgr.playEffect(Global.audioMgr.effTouch),p.getInstance().isAlreadyPlay=!0},onNextProgress:function(){p.getInstance().onNextProgress(),Global.eventMgr.emit(n.EVENT_POP_VIEW),s.getInstance().showGameClassicEntry()}}),cc._RF.pop()},{"./../CoinsPanelCtrl":"CoinsPanelCtrl","./../FlyEffectCtrl":"FlyEffectCtrl","./../common/DataMgr":"DataMgr","./../common/GCONFIG":"GCONFIG","./../common/UtilsOther":"UtilsOther","./../common/ViewMgr":"ViewMgr","./../game/GameDataMgr":"GameDataMgr","./../model/ClassicGameModel":"ClassicGameModel",GameClassicTargetCtrl:"GameClassicTargetCtrl"}],GameClassicTargetCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"9926dwft+xB572/UdYO/Sx+","GameClassicTargetCtrl");var n=e("./../model/ClassicGameModel");cc.Class({extends:cc.Component,properties:{iconTarget:cc.Sprite,iconTargetFrames:[cc.SpriteFrame],labelDesc:cc.Label,rewardCoins:cc.Label,_targetIdx:0,targetIdx:{range:[0,n.TARGET_INFOS.length,1],tooltip:"经典模式每日任务中的目标序列号",get:function(){return this._targetIdx},set:function(e){this._targetIdx=e;var t=n.TARGET_INFOS[this._targetIdx];this.iconTarget.spriteFrame=this.iconTargetFrames[this._targetIdx],this.labelDesc.string=cc.js.formatStr("NO.%d TOWER",t.removePeaks),this.rewardCoins.string=t.rewardCoins}}},start:function(){}}),cc._RF.pop()},{"./../model/ClassicGameModel":"ClassicGameModel"}],GameClassicTargetEndCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"a25f6u/dPFERbfWulLB+7iW","GameClassicTargetEndCtrl"),cc.Class({extends:cc.Component,properties:{iconTarget:cc.Sprite,iconTargetFrames:[cc.SpriteFrame],iconComplete:cc.Sprite,iconCoins:cc.Sprite,_coins:0,coins:{range:[0,Number.MAX_VALUE,1],tooltip:"经典模式挑战目标的奖励金币数",get:function(){return this._coins},set:function(e){this._coins=e,this.labelCoins.string=this._coins}},labelCoins:cc.Label,colorFinished:{default:cc.Color.BLACK,tooltip:"用于表示已完成状态的颜色"},colorUnfinished:{default:cc.Color.BLACK,tooltip:"用于表示未完成状态的颜色"},_targetIdx:0,targetIdx:{type:cc.Integer,range:[0,2,1],tooltip:"经典模式挑战目标的序列号，取值范围(0-2)",get:function(){return this._targetIdx},set:function(e){this._targetIdx=e,this.iconTarget.spriteFrame=this.iconTargetFrames[this._targetIdx]}},_isCompleted:!0,isCompleted:{type:cc.Boolean,tooltip:"经典模式挑战目标是否完成",get:function(){return this._isCompleted},set:function(e){this._isCompleted=e;var t=cc.Scale9Sprite.state.GRAY;this._isCompleted&&(t=cc.Scale9Sprite.state.NORMAL),this.iconTarget._sgNode.setState(t),this.iconCoins._sgNode.setState(t),this._isCompleted?this.labelCoins.node.color=this.colorFinished:this.labelCoins.node.color=this.colorUnfinished,this.iconComplete.node.active=this._isCompleted}}},start:function(){},getIconCoinsNode:function(){return this.iconCoins.node}}),cc._RF.pop()},{}],GameCoinsEffectCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"8569ak5obFPE48Ve9BfiYrY","GameCoinsEffectCtrl"),cc.Class({extends:cc.Component,properties:{labelCoinsNum:cc.Label,_coinsNum:0,coinsNum:{get:function(){return this._coinsNum},set:function(e){this._coinsNum=e,this.labelCoinsNum.string=this._coinsNum}}},onLoad:function(){var o=this,e=this.node.getComponent(cc.Animation);e.on("finished",function(e,t){o.node.removeFromParent()},this),e.play("gameCoinsEffect_numberRise")},start:function(){}}),cc._RF.pop()},{}],GameCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"9390fLbp1lGTo7M9qbvlSN4","GameCtrl");var c=e("./../common/GCONFIG"),n=(e("PokerTableCtrl"),e("GameLevelMgr")),u=e("GameDataMgr"),i=e("GameProgressCtrl"),l=e("./../common/ViewMgr"),r=e("./../model/ClassicGameModel"),a=e("./../common/LabelInteger"),h=e("./../common/DataMgr"),p=e("GameCoinsEffectCtrl"),d=e("./../FlyEffectCtrl"),f=e("PropModel"),g=f.Type,s=e("GamePropCtrl"),m=e("./../common/UtilsOther"),C=e("./../common/CoinsMgr");cc.Class({extends:cc.Component,properties:{mainContainer:cc.Node,_pokerTable:{default:null,type:cc.Component},btnLastLevel:{default:null,type:cc.Button},btnNextLevel:{default:null,type:cc.Button},labelScore:{default:null,type:cc.Label},labelTime:{default:null,type:a},timeStar:{default:null,type:cc.Sprite},progressCombo:{default:null,type:i},recommendProp:{default:null,type:s},blockLayer:{default:null,type:cc.BlockInputEvents},passLevel:{default:null,type:cc.Button},coinsEffect:cc.Prefab,flyEffect:cc.Prefab,isBlockGame:{get:function(){return this.blockLayer.node.active},set:function(e){this.blockLayer.node.active=e}},_levelMgr:null,_dataMgr:null},onLoad:function(){this.passLevel.node.active=c.DEBUG_MODE,Global.audioMgr.playMusic(Global.audioMgr.bgGame)},start:function(){var e=this;cc.log("start!"),this._pokerTable=cc.find("PokerTableCtrl").getComponent("PokerTableCtrl"),this._levelMgr=n.getInstance(),this._dataMgr=u.getInstance(),Global.eventMgr.on(c.EVENT_POKER_ELIMINATE,this.onPokerEliminate,this),Global.eventMgr.on(c.EVENT_POKER_NEW,this.refreshInfo,this),Global.eventMgr.on(c.EVENT_POKER_UNDO,this.refreshInfo,this),Global.eventMgr.on(c.EVENT_GAME_REFRESH_INFO,this.refreshInfo,this),Global.eventMgr.on(c.EVENT_GAME_SUCCESS,this.onSuccess,this),this.isBlockGame=!1,Global.eventMgr.on(c.EVENT_POKER_MOVE_END,this.onPokerMoveEnd,this),Global.eventMgr.on(c.EVENT_GAME_USE_ADD_TIME,this.addTime,this),this.schedule(this.onTimer,.5),this.onTimer(0),cc.director.getCollisionManager().enabled=!0,this.refreshForRecommend();u.isInClassic||this._levelMgr.curLevel;var t=Global.gameMgr.gamePokerScene,o=cc.instantiate(cc.find("Layer/container",t));this._pokerTable.initPokerTable(o),this._dataMgr.calcCoinsValue(this._pokerTable.getAllPokerInPeaks().length),this.scheduleOnce(function(){e._pokerTable.checkAllPokerCover(),e.refreshInfo(null,!0)},0)},onDestroy:function(){u.destroyInstance()},onLastLevel:function(){this._levelMgr.toLast(),u.isInClassic=!1,Global.gameMgr.transitionToGame(this._levelMgr.curLevel)},onNextLevel:function(){this._levelMgr.toNext(),u.isInClassic=!1,Global.gameMgr.transitionToGame(this._levelMgr.curLevel)},onExit:function(){cc.log("Exit isInClassic = "+u.isInClassic),u.lastGameIsSuccess=!1,this.quitGame()},refreshInfo:function(e,t){this.onTimer(0),u.isInClassic?this.progressCombo.setProgress(this.getRemovedPeaks()/r.GAME_TOTAL_PEAKS,t):this.progressCombo.setProgress(this._dataMgr.getComboProgress(),t)},refreshForRecommend:function(){var e=this,t=r.getInstance();u.isInClassic?(this.recommendProp.node.active=!0,this.recommendProp.type=t.getRecommendProp().type,this.recommendProp.isShowNum=!1,this.recommendProp.onUseComplete=function(){e.recommendProp.node.removeFromParent(),e.recommendProp=null}):this.recommendProp.node.active=!1},getRemovedPeaks:function(){return r.GAME_TOTAL_PEAKS-this._pokerTable.getRemainPeaks().length},onTimer:function(e,t){var o=Math.floor(this._dataMgr.remainTime);if(this._dataMgr.gameTime+=e,u.isInClassic)this.labelTime.setValue(this._dataMgr.gameTime,t);else{this.labelTime.setValue(this._dataMgr.remainTime,t);var n=Math.floor(this._dataMgr.remainTime);n<o&&n<=10&&(this.labelTime.getComponent(cc.Animation).play("game_timeAlert"),Global.audioMgr.playEffect(Global.audioMgr.effTimeTick)),this._dataMgr.remainTime<=0&&(this.unschedule(this.onTimer),this.timeStar.node.active=!1,Global.audioMgr.playEffect(Global.audioMgr.effStarDisappear))}},addTime:function(e){this.labelTime.getComponent(cc.Animation).play("game_timeAlert"),this.onTimer(0,!0)},onPokerEliminate:function(e){var t=this,o=e.detail,n=this.node.convertToNodeSpaceAR(o.node.parent.convertToWorldSpaceAR(o.node.getPosition())),i=0,r=this.progressCombo.getProgressStage();this.refreshInfo(null,!1);var a=this.progressCombo.getProgressStage();if(r<a){u.isInClassic||(i=this._dataMgr.calcStageRewardCoins());var s=d.Type.NULL;s=3==a?d.Type.STAR:d.Type.NORMAL,m.runFlyEffect(s,this.node,o.node,this.progressCombo.getStageNode(),function(){t.progressCombo.onProgressComplete(),3==a?Global.audioMgr.playEffect(Global.audioMgr.effStarAppear):Global.audioMgr.playEffect(Global.audioMgr.effSmallStarAppear)})}if(!u.isInClassic){var c=this._dataMgr.eliminateAddedCoins+i;this._dataMgr.eliminateGetCoins+=this._dataMgr.eliminateAddedCoins,h.getInstance().playerObj.coins+=i,this._dataMgr.alterScore(this._dataMgr.eliminateAddedCoins,!0),Global.uiUpdater.updateUserCoins();var l=cc.instantiate(this.coinsEffect);l.setPosition(n),this.node.addChild(l),l.getComponent(p).coinsNum=c,Global.audioMgr.playEffect(Global.audioMgr.effGetCoinsLittle)}},onSuccess:function(e){cc.log("game end for succ checkGameIsEnd = "+this._pokerTable.checkGameIsEnd()+" checkPeaksIsClean = "+this._pokerTable.checkPeaksIsClean()),this.onEndGame(),this.scheduleOnce(this.showGameEnd.bind(this,!0),1)},onPokerMoveEnd:function(e){cc.log("game end for failed  checkGameIsEnd = "+this._pokerTable.checkGameIsEnd()+" checkPeaksIsClean = "+this._pokerTable.checkPeaksIsClean()),this._pokerTable.checkGameIsEnd()&&!this._pokerTable.checkPeaksIsClean()&&(u.isInClassic?(cc.log("ClassicGameModel.getInstance().isUseRecommend = "+r.getInstance().isUseRecommend),this.recommendProp&&this.recommendProp.type==g.POKER_ADD_HAND?this.gameFailedTip():this.showClassicEnd()):(cc.log("GameDataMgr.isUsePropAfterNoHandsWhenNoClassic = "+u.isUsePropAfterNoHandsWhenNoClassic),u.isUsePropAfterNoHandsWhenNoClassic?(this.onEndGame(),this.scheduleOnce(this.showGameEnd.bind(this,!1),.6)):this.gameFailedTip()))},onEndGame:function(){this.isBlockGame=!0,this.unschedule(this.onTimer)},showGameEnd:function(e){u.lastGameIsSuccess=e;u.isInClassic?this.showClassicEnd():e?l.getInstance().showGameSucView():l.getInstance().showGameFailedView()},showClassicEnd:function(){r.getInstance().completeDayProgress(this.getRemovedPeaks()),l.getInstance().showGameClassicEnd()},quitGame:function(){var e=this;cc.log("classic.");l.getInstance().showClassicExitTipView("DETERMINE THE END OF THE GAME?",null,function(){cc.log("quitFromClassic"),u.isInClassic?e.showClassicEnd():l.getInstance().showGameFailedView()})},gameFailedTip:function(){var e=this;cc.log("gameFailedTip  GameDataMgr.isInClassic = "+u.isInClassic);var t,o=null;u.isInClassic?(cc.log("classic type = "+this.recommendProp.type),o=f.getModel(this.recommendProp.type),t=this.recommendProp.type):(cc.log("!classic type = "+g.POKER_ADD_HAND),o=f.getModel(g.POKER_ADD_HAND),t=g.POKER_ADD_HAND);var n,i=o.baseData.maxNum,r=o.num;n=u.isInClassic?"USE "+o.baseData.name.toUpperCase()+" TO CONTINUE THE GAME?":(r<1?"BUY":"USE")+" ANGLE'S SWING TO CONTINUE THE GAME?";var a=u.isInClassic?"CONTINUE":r<1?m.getThousandSeparatorString(this._dataMgr.calcAddHandCost()):"CONTINUE";cc.log("init data complete cur = "+r+" max = "+i);var s=u.isInClassic||0<r;l.getInstance().showClassicPropTipView(t,a,r,i,n,function(){e.onEndGame(),e.scheduleOnce(e.showGameEnd.bind(e,!1),.6)},function(){r<1&&!u.isInClassic?e.btnBuy(o):(o.useProp(),e.isBlockGame=!0,u.isInClassic?e.recommendProp&&(cc.log("used prop in classic mode"),e.recommendProp.node.active=!1,Global.eventMgr.emit(c.EVENT_USE_PROP,e.recommendProp),cc.log("used prop in classic mode release recommendProp"),e.recommendProp=null):(cc.log("used prop in !classic mode"),Global.eventMgr.emit(c.EVENT_GAME_USE_ADD_HANDS)))},s)},btnBuy:function(e){var t=this;Global.audioMgr.playEffect(Global.audioMgr.effTouch);e.type;var o=m.getThousandSeparatorString(this._dataMgr.calcAddHandCost());o=o.replace(",",""),C.costCoins(o,function(){e.addProp(1),e.useProp(),t.isBlockGame=!0,t._dataMgr.addHandTimes++,cc.log("used prop in !classic mode"),Global.eventMgr.emit(c.EVENT_GAME_USE_ADD_HANDS),Global.eventMgr.emit(Global.config.EVENT_POP_VIEW)},function(){t.onEndGame(),t.scheduleOnce(t.showGameEnd.bind(t,!1),.6)})},onPassLevel:function(){u.isInClassic&&r.getInstance().completeDayProgress(r.GAME_TOTAL_PEAKS),this.showGameEnd(!0)}}),cc._RF.pop()},{"./../FlyEffectCtrl":"FlyEffectCtrl","./../common/CoinsMgr":"CoinsMgr","./../common/DataMgr":"DataMgr","./../common/GCONFIG":"GCONFIG","./../common/LabelInteger":"LabelInteger","./../common/UtilsOther":"UtilsOther","./../common/ViewMgr":"ViewMgr","./../model/ClassicGameModel":"ClassicGameModel",GameCoinsEffectCtrl:"GameCoinsEffectCtrl",GameDataMgr:"GameDataMgr",GameLevelMgr:"GameLevelMgr",GameProgressCtrl:"GameProgressCtrl",GamePropCtrl:"GamePropCtrl",PokerTableCtrl:"PokerTableCtrl",PropModel:"PropModel"}],GameDataMgr:[function(e,t,o){"use strict";cc._RF.push(t,"937d5G+vwJE07RiJGHP8QkR","GameDataMgr");var n=e("GameLevelMgr"),i=e("./../common/UtilsOther"),r=e("./../common/DataMgr"),a=cc.Class({properties:{_score:0,score:{set:function(e){this._score=Math.max(0,e)},get:function(){return this._score}},_scoreHistory:[cc.Integer],_gameTime:0,gameTime:{set:function(e){this._gameTime=Math.max(0,e)},get:function(){return this._gameTime}},_addedTime:0,addedTime:{set:function(e){this._addedTime=e},get:function(){return this._addedTime}},remainTime:{get:function(){return Math.max(0,180+this.addedTime-this._gameTime)}},_eliminateNum:0,eliminateNum:{set:function(e){this._eliminateNum=Math.max(0,e)},get:function(){return this._eliminateNum}},eliminateAddedCoins:0,_combo:0,combo:{set:function(e){this._combo=Math.max(0,e)},get:function(){return this._combo}},_comboOnStage:0,comboRateOnStage:{get:function(){return this._comboOnStage/5}},_stage:0,stage:{set:function(e){this._stage=Math.max(0,e)},get:function(){return this._stage}},hasWildPoker:!1,_isClassic:!1,isClassic:{set:function(e){this._isClassic=e},get:function(){return this._isClassic}},removedPeaks:0,canUndoNum:0,_undoTimes:0,eliminateGetCoins:0,addHandTimes:0},ctor:function(){},alterScore:function(e,t){this.score+=e,r.getInstance().playerObj.coins+=e,t&&this._scoreHistory.push(e)},eliminate:function(){this.eliminateNum++,this.combo++,this._comboOnStage++,0<this._comboOnStage&&this._comboOnStage<=5&&Global.audioMgr.playEffect(Global.audioMgr.scoreCollectArray[this._comboOnStage-1]),5<=this._comboOnStage&&(this.stage++,this._comboOnStage=0)},cancelEliminate:function(){this.eliminateNum--},getComboProgress:function(){return(this.stage+this._comboOnStage/5)/3},resetCombo:function(){this.combo=0,this._comboOnStage=0},undo:function(){this.resetCombo(),0<this._scoreHistory.length&&this.alterScore(-this._scoreHistory.pop(),!1),this.canUndoNum--,this._undoTimes++},isTimeComplete:function(){return 0<this.remainTime},isComboComplete:function(){return 3<=this.stage},calcCoinsValue:function(e){var t=n.getCurLevelCfg(),o=i.randomInteger(40,70)/100;this.eliminateAddedCoins=Math.round(t.baseConsume*o/e)},calcStageRewardCoins:function(){var e=n.getCurLevelCfg();return Math.round((5+10*(this.stage-1))*e.difficultyValue)},calcUndoCost:function(){if(a.isInClassic)return 50;var e=n.getCurLevelCfg();return e.baseConsume/2+e.baseConsume/4*this._undoTimes},calcAddHandCost:function(){if(a.isInClassic)return Number.MAX_VALUE;var e=n.getCurLevelCfg();return e.baseConsume*e.difficultyValue+e.baseConsume/2*this.addHandTimes},calcLevelRewardCoins:function(){var e=n.getCurLevelCfg();return e.baseConsume+Math.round(e.difficultyValue*Math.random()*100)-this.eliminateGetCoins}}),s=null;a.getInstance=function(){return s||(s=new a),s},a.destroyInstance=function(){s&&(s=null)},a.isInClassic=!1,a.isUsePropAfterNoHandsWhenNoClassic=!1,a.canUserPropWithAnimRunning=!1,a.isContinueClassic=!1,a.lastGameIsSuccess=!1,t.exports=a,cc._RF.pop()},{"./../common/DataMgr":"DataMgr","./../common/UtilsOther":"UtilsOther",GameLevelMgr:"GameLevelMgr"}],GameFailedViewCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"85f56SrhedCdZAJojhLAt6x","GameFailedViewCtrl");var n=e("./GameFinishViewBase"),i=e("./common/LabelInteger"),a=e("./game/GameLevelMgr"),r=e("./game/GameDataMgr"),s=e("./common/DataMgr"),c=e("./common/CoinsMgr"),l=e("./model/PropModel");cc.Class({extends:n,properties:{iconCoins:cc.Sprite,iconDiamond:cc.Sprite,labelReplay:i,labelFree:cc.Label},onLoad:function(){this._super();var e=a.getLevelCfg(a.getInstance().curLevel);this.labelReplay.setValue(e.baseConsume);var t=l.getModel(6).num,o=s.getInstance().iapObj.vipValid,n=0<t||o;this.iconDiamond.node.active=n,this.labelFree.node.active=n,this.iconCoins.node.active=!n,this.labelReplay.node.active=!n,a.getInstance().isShowStarAni=!1},onDisable:function(){this._super()},start:function(){this.init(0,0,r.getInstance().eliminateGetCoins,0),Global.audioMgr.playEffect(Global.audioMgr.effFailed),this.getComponent(cc.Animation).play("gameFailedView_ani",!1)},onBtnReplay:function(e,t){var o=this,n=s.getInstance().iapObj.vipValid,i=l.getModel(6).num;if(n||0<i)n||l.getModel(6).useProp(),this._enterGame();else{var r=a.getLevelCfg(a.getInstance().curLevel);c.costCoins(r.baseConsume,function(){o._enterGame()},function(){cc.log("金币不足，无法进入游戏")})}},_enterGame:function(){r.isInClassic=!1,Global.gameMgr.transitionToGame(),Global.audioMgr.playEffect(Global.audioMgr.effTouch)},onBtnBack:function(e,t){Global.gameMgr.transitonToIsland(),Global.audioMgr.playEffect(Global.audioMgr.effTouch)}}),cc._RF.pop()},{"./GameFinishViewBase":"GameFinishViewBase","./common/CoinsMgr":"CoinsMgr","./common/DataMgr":"DataMgr","./common/LabelInteger":"LabelInteger","./game/GameDataMgr":"GameDataMgr","./game/GameLevelMgr":"GameLevelMgr","./model/PropModel":"PropModel"}],GameFinishViewBase:[function(e,t,o){"use strict";cc._RF.push(t,"80484NqsIhG4bKCY/E0uO1F","GameFinishViewBase");var n=e("./common/LabelInteger"),i=e("./common/GCONFIG"),r=(e("./common/DataMgr"),e("./game/GameLevelMgr")),a=e("./model/PropModel");cc.Class({extends:cc.Component,properties:{starAni:sp.Skeleton,labelComplete:n,labelSpeed:n,labelStreaks:n,labelLevel:cc.Label},onLoad:function(){Global.audioMgr.pauseMusic(),this.labelLevel.string="LEVEL "+r.getInstance().curLevel,a.getModel(7).useProp()},onDisable:function(){Global.audioMgr.stopAllEffects()},init:function(e,t,o,n){this.labelComplete.setValue(e),this.labelSpeed.setValue(t),this.labelStreaks.setValue(o),this.setStarNum(n)},setStarNum:function(e){e=0===e?4:e,this.starAni.setAnimation(0,"jiesuan"+e,!1)},remove:function(){Global.eventMgr.emit(i.EVENT_POP_VIEW)}}),cc._RF.pop()},{"./common/DataMgr":"DataMgr","./common/GCONFIG":"GCONFIG","./common/LabelInteger":"LabelInteger","./game/GameLevelMgr":"GameLevelMgr","./model/PropModel":"PropModel"}],GameLevelMgr:[function(e,t,o){"use strict";cc._RF.push(t,"25deb5RYwVHv5pbWd9GoAwz","GameLevelMgr");var n=e("./../common/DataMgr"),i=[{minLevel:1,maxLevel:3,baseConsume:100,difficultyValue:1},{minLevel:4,maxLevel:8,baseConsume:500,difficultyValue:1.5},{minLevel:9,maxLevel:15,baseConsume:1e3,difficultyValue:2},{minLevel:16,maxLevel:25,baseConsume:1500,difficultyValue:3},{minLevel:26,maxLevel:34,baseConsume:2500,difficultyValue:4},{minLevel:35,maxLevel:60,baseConsume:3500,difficultyValue:5}],r=cc.Class({properties:{maxLevel:{get:function(){return n.getInstance().playerObj.islands[0].starInfo.length}},_curLevel:1,curLevel:{set:function(e){this._curLevel=Math.max(1,Math.min(this.maxLevel,e))},get:function(){return this._curLevel}},preLevel:{set:function(e){this._playerObj.preLevel=e},get:function(){return this._playerObj.preLevel}},isShowStarAni:!1},ctor:function(){this._playerObj=n.getInstance().playerObj},toNext:function(){return this.curLevel++,this.curLevel},toLast:function(){return this.curLevel--,this.curLevel},isInFinal:function(){return this.curLevel>=this.maxLevel}}),a=null;r.getInstance=function(){return a||(a=new r),a},r.getLevelCfg=function(e){for(var t in i){var o=i[t];if(e>=o.minLevel&&e<=o.maxLevel)return o}return{}},r.getCurLevelCfg=function(){var e=r.getInstance().curLevel;return r.getLevelCfg(e)},t.exports=r,cc._RF.pop()},{"./../common/DataMgr":"DataMgr"}],GameMgr:[function(e,t,o){"use strict";cc._RF.push(t,"67e24bqY9tFS69bZa2f1RN0","GameMgr");var i=e("./common/GCONFIG"),r=e("./common/DataMgr"),n=e("./common/ViewMgr"),a=e("./common/ServerTimeMgr"),s=e("./data/PropBaseData"),c=e("./model/PropModel"),l=e("./common/UtilsOther"),u=e("./common/GameCfg"),h=e("./common/UtilsCross"),p=e("./model/ClassicGameModel"),d=e("./game/GameDataMgr"),f=e("./game/GameLevelMgr");cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.game.addPersistRootNode(this.node),(Global.gameMgr=this).gamePokerScene=null,cc.game.on(cc.game.EVENT_HIDE,function(){cc.log("游戏进入后台."),r.getInstance().saveDataToLocal();h.pushLocalNotification("","Hurry up! Help me to finish the next level !",86400,!0,"__key_1days");var e=r.getInstance().chestObj,t=e.shortOpenTime-l.time();0<t&&h.pushLocalNotification("","The coins box is full,  check it and collect free coins now !",t,!1,"__key_chest_short_open"),0<(t=e.longOpenTime-l.time())&&h.pushLocalNotification("","The coins box is full,  check it and collect free coins now !",t,!1,"__key_chest_long_open"),p.getInstance().pushLocalNotification()}),cc.game.on(cc.game.EVENT_SHOW,function(){cc.log("游戏返回前台."),a.getInstance().loadServerTime()}),r.getInstance().loadDataFromLocal(),a.getInstance().loadServerTime(),s.initData(function(e){c.initData(e)}),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,function(e){var t=e.keyCode;cc.log("keyCode:"+t),r.getInstance().saveDataToLocal(),t===cc.KEY.back&&n.getInstance().showNormalTipView("Are you sure you want to quit the game?","OK","CANCLE",function(){cc.game.end()},null)})},_updateProp:function(e){var t=l.time(),o=u.getInstance().shopCfg,n=r.getInstance().iapObj;(!n.shopProps||n.shopProps.length<=0)&&(n.shopProps=this._generateProp()),0===n.propRefreshTime&&(n.propRefreshTime=l.time()+o.propRefreshInterval,n.showPropTips=!0),t>=n.propRefreshTime&&(n.propRefreshTime=l.time()+o.propRefreshInterval,n.prop1hadBuy=!1,n.prop2hadBuy=!1,n.prop3hadBuy=!1,n.shopProps=null,n.showPropTips=!0,n.shopProps=this._generateProp(),Global.eventMgr.emit(Global.config.EVENT_REFRESH_SHOP_PROP))},_generateProp:function(){for(var e=[],t=u.getInstance().shopCfg.props.slice(0),o=1;o<=3;o++){var n=l.randomByWeight(t,"weight"),i=l.randomInteger(n.minNum,n.maxNum);e.push({propId:n.propId,propNum:i,propPrice:n.price}),l.arrayRmObj(t,n)}return e},_updateChestCollect:function(e){var t=u.getInstance().chestCollectCfg,o=r.getInstance().chestObj;0===o.shortOpenTime&&(o.shortOpenTime=l.time()+t.chestShort.timeNeed),0===o.longOpenTime&&(o.longOpenTime=l.time()+t.chestLong.timeNeed);var n=o.starNumCollect;t.chestStar.needStar<=n||l.time()>=o.shortOpenTime||l.time()>=o.longOpenTime?o.showChestTips=!0:o.showChestTips=!1},_updateClassicGame:function(e){var t=p.getInstance(),o=t.lastRefreshTime,n=new Date(o).getHours(),i=new Date,r=i.getTime(),a=i.getHours(),s=l.getDaysDiff(o/1e3,r/1e3);n<p.RERESH_HOURS_7DAYS?(0==s&&a>=p.RERESH_HOURS_7DAYS||0<s)&&t.refreshData(r):(1==s&&a>=p.RERESH_HOURS_7DAYS||1<s)&&t.refreshData(r)},start:function(){this.schedule(this.selfUpdate,.5,this)},selfUpdate:function(e){a.getInstance().isDeviceTimeValid()&&u.getInstance().isLoadOver&&(this._updateProp(e),this._updateChestCollect(e),this._updateClassicGame(e))},_showTransiAni:function(e){var t=cc.Canvas.instance.node,o=cc.instantiate(Global.assetMgr.prefabTransitionNodeIn);o.setLocalZOrder(Global.config.LOCAL_ZINDEX_MAX+1),t.addChild(o),o.getComponent(cc.Animation).play("transitionIn").once("finished",function(){e&&e()})},transitionToGame:function(){var n=this;this._showTransiAni(function(){var o="level/level_";d.isInClassic?o+="classic":o+=f.getInstance().curLevel,cc.loader.loadRes(o,function(e,t){cc.assert(!e,"load game poker scene("+o+") error:"+JSON.stringify(e)),n.gamePokerScene=t.scene,n._transitionToScene("game")})})},transitonToIsland:function(e){var t=this;"island"!==cc.director.getScene().name&&(e?(Global.eventMgr.emit(i.EVENT_CHANGE_SCENE),cc.director.loadScene("island")):this._showTransiAni(function(){t._transitionToScene("island")}))},_transitionToScene:function(o){var n=this;cc.director.preloadScene(o,function(){Global.eventMgr.emit(i.EVENT_CHANGE_SCENE),cc.director.loadScene(o,function(){var e=cc.Canvas.instance.node,t=cc.instantiate(Global.assetMgr.prefabTransitionNodeOut);t.setLocalZOrder(Global.config.LOCAL_ZINDEX_MAX+1),e.addChild(t),cc.log(JSON.stringify(cc.director.getWinSize())),n.scheduleOnce(function(){t.getComponent(cc.Animation).play("transitionOut").once("finished",function(){n.scheduleOnce(function(){if(t.destroy(),cc.log("切换场景完成，当前场景:"+o),"game"!==o&&n.gamePokerScene){var e=cc.loader.getDependsRecursively(n.gamePokerScene);cc.loader.release(e),cc.log("释放游戏关卡资源完成.")}},0)})},0)})})}}),cc._RF.pop()},{"./common/DataMgr":"DataMgr","./common/GCONFIG":"GCONFIG","./common/GameCfg":"GameCfg","./common/ServerTimeMgr":"ServerTimeMgr","./common/UtilsCross":"UtilsCross","./common/UtilsOther":"UtilsOther","./common/ViewMgr":"ViewMgr","./data/PropBaseData":"PropBaseData","./game/GameDataMgr":"GameDataMgr","./game/GameLevelMgr":"GameLevelMgr","./model/ClassicGameModel":"ClassicGameModel","./model/PropModel":"PropModel"}],GameProgressCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"e7e3b/a9MBNHYr74t6R17G3","GameProgressCtrl");var n=e("./../common/ProgressBarExt"),i=e("GameDataMgr");cc.Class({extends:cc.Component,properties:{comboStage_1:{default:null,type:cc.Sprite},comboStage_2:{default:null,type:cc.Sprite},comboStageOff:{default:null,type:cc.SpriteFrame},comboStageOn:{default:null,type:cc.SpriteFrame},comboStar:{default:null,type:cc.Sprite},progressBar:{default:null,type:n},_progress:0,progress:{get:function(){return this._progress}},_dataMgr:null},onLoad:function(){this._dataMgr=i.getInstance()},setProgress:function(e,t){this._progress=e,this.progressBar&&this.progressBar.setTargetProgress(e,null,t)},onProgressComplete:function(){this.progress>=1/3?this.comboStage_1.spriteFrame=this.comboStageOn:this.comboStage_1.spriteFrame=this.comboStageOff,this.progress>=2/3?this.comboStage_2.spriteFrame=this.comboStageOn:this.comboStage_2.spriteFrame=this.comboStageOff,this.comboStar.node.active=1<=this.progress},getProgressStage:function(){var e=0;return 1<=this._progress?e=3:this._progress>=2/3?e=2:this._progress>=1/3&&(e=1),e},getStageNodeWorldPos:function(){var e=null;return 1<=this._progress?e=this.comboStar.node:this._progress>=2/3?e=this.comboStage_2.node:this._progress>=1/3&&(e=this.comboStage_1.node),e?e.parent.convertToWorldSpaceAR(e.getPosition()):cc.p()},getStageNode:function(){var e=null;return 1<=this._progress?e=this.comboStar.node:this._progress>=2/3?e=this.comboStage_2.node:this._progress>=1/3&&(e=this.comboStage_1.node),e}}),cc._RF.pop()},{"./../common/ProgressBarExt":"ProgressBarExt",GameDataMgr:"GameDataMgr"}],GamePropBarCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"ad72eHQkc5HdY42Xu7IBHbP","GamePropBarCtrl");var n=e("./../common/GCONFIG"),i=e("PropModel").Type,h=e("GameDataMgr");cc.Class({extends:cc.Component,properties:{blockLayer:cc.Node,background:cc.Node,propBag:cc.Sprite,props:cc.Node,gameProp:cc.Prefab,_dataMgr:null},start:function(){if(this._dataMgr=h.getInstance(),h.isInClassic)this.propBag.node.active=!1;else{var e=[i.POKER_WILD,i.POKER_CLEAN_CATEGORY,i.POKER_CLEAN_RANDOM,i.POKER_ADD_HAND,i.POKER_ADD_TIME];for(var t in e){var o=cc.instantiate(this.gameProp);o.x=(this.propBag.node.getBoundingBox().width+10)*(Number(t)+1),o.y=this.propBag.node.y,this.props.addChild(o),o.getComponent("GamePropCtrl").type=e[t]}this.blockLayer.active=!1,this.background.active=!1,this.props.active=!1,Global.eventMgr.on(n.EVENT_PROPBAR_CLOSE,function(e){this.props.active&&(cc.log(".props.active ---\x3e onClickBag"),this.onClickBag())},this),this.initTouchEvents()}},onDestroy:function(){Global.eventMgr.targetOff(this)},initTouchEvents:function(){this.blockLayer.on(cc.Node.EventType.TOUCH_END,function(e){var t=e.touch;this.background._hitTest(t.getLocation())||this.onClickBag(),e.stopPropagation()}.bind(this),this.node),this.background.on(cc.Node.EventType.TOUCH_START,function(e){e.stopPropagation()}.bind(this),this.node)},getLastX:function(e){return(this.blockLayer.active=!this.blockLayer.active)?(this.propBag.node.getBoundingBox().width-10)*(Number(e)+1):this.propBag.node.getBoundingBox().width/2+this.propBag.node.x+21},onClickBag:function(){cc.log("onClickBag"),h.canUserPropWithAnimRunning=!1;var e=this.blockLayer.active=!this.blockLayer.active,t=this.propBag.node.y;e&&(this.background.active=e,this.props.active=e);var o=this.props.getChildren();for(var n in o){var i=o[n];i.stopAllActions(),i.x=this.getLastX(n);var r=cc.moveTo(.1,cc.p(this.getLastX(n),t)),a=e?255:0,s=cc.fadeTo(.1,a),c=cc.callFunc(function(){e||(this.background.active=e,this.props.active=e)},this);i.runAction(cc.spawn(cc.sequence(r,c),s))}a=e?100:0;var l=cc.fadeTo(.1,a),u=cc.callFunc(function(){h.canUserPropWithAnimRunning=!0});this.background.stopAllActions(),this.background.runAction(cc.sequence(l,u)),Global.audioMgr.playEffect(Global.audioMgr.effPropBtn)}}),cc._RF.pop()},{"./../common/GCONFIG":"GCONFIG",GameDataMgr:"GameDataMgr",PropModel:"PropModel"}],GamePropCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"1ada9mocgBIYpkTcyBw+iSY","GamePropCtrl");var n=e("./../common/GCONFIG"),i=e("PropModel"),r=i.Type,a=e("./GameDataMgr"),s=e("./../common/LabelOwnNumCtrl");cc.Class({extends:cc.Component,properties:{_model:cc.Class,model:{get:function(){return this._model}},labelOwnNum:s,_isShowNum:!0,isShowNum:{get:function(){return this._isShowNum},set:function(e){this._isShowNum=e,this.labelOwnNum.node.active=this._isShowNum}},_type:r.NULL,type:{type:r,get:function(){return this._type},set:function(e){var o=this;this._type=e,this._model=i.getModel(this._type),cc.loader.loadRes("icon_prop",cc.SpriteAtlas,function(e,t){e||(o.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame(cc.js.formatStr("icon_ig_daojupai_%s",("00"+o.type).slice(-2))))}),this.refreshView()}},_canUse:!0,canUse:{get:function(){return this._canUse},set:function(e){this._canUse=e,this.node.getComponent(cc.Button).interactable=e}},onUseComplete:null,_originalScale:1,originalScale:{get:function(){return this._originalScale}}},onLoad:function(){this._originalScale=this.node.scale},start:function(){},refreshView:function(){this._model&&this.labelOwnNum.setNum(this._model.num,this._model.baseData.maxNum)},use:function(){this.canUse&&this.model.useProp()&&(a.isInClassic||a.canUserPropWithAnimRunning)&&(this.refreshView(),Global.eventMgr.emit(n.EVENT_USE_PROP,this),Global.eventMgr.emit(n.EVENT_PROPBAR_CLOSE),this.onUseComplete&&(this.onUseComplete(),this.onUseComplete=null))}}),cc._RF.pop()},{"./../common/GCONFIG":"GCONFIG","./../common/LabelOwnNumCtrl":"LabelOwnNumCtrl","./GameDataMgr":"GameDataMgr",PropModel:"PropModel"}],GamePropMgr:[function(e,t,o){"use strict";cc._RF.push(t,"5d90a0ApFxOWp9LVn04t0sW","GamePropMgr");var n=e("./../common/GCONFIG"),i=e("GameCtrl"),r=e("PokerTableCtrl"),a=e("./../model/PropModel"),h=e("./../common/UtilsOther"),d=e("./../model/Poker").Class,p=e("./../model/Poker").Category,f=e("./../model/Poker").Status,g=e("./../model/Poker").TableLocation,s=e("GameDataMgr");cc.Class({extends:cc.Component,properties:{_dataMgr:null,animLayer:cc.Node,gameCtrl:i,pokerTableCtrl:r,gameProp:cc.Prefab},start:function(){this._dataMgr=s.getInstance(),Global.eventMgr.on(n.EVENT_USE_PROP,this.onUseProp,this),Global.eventMgr.on(n.EVENT_GAME_USE_ADD_HANDS,this.doAddHand,this)},onDestroy:function(){Global.eventMgr.targetOff(this)},onUseProp:function(e){var t=e.detail,o=t.model.type;o==a.Type.POKER_WILD?this.useWild(t):o==a.Type.POKER_CLEAN_CATEGORY?this.cleanCategory():o==a.Type.POKER_CLEAN_RANDOM?this.cleanRandom():o==a.Type.POKER_ADD_HAND?this.addHand(t):o==a.Type.POKER_ADD_TIME&&this.addTime()},useWild:function(e){var t=this;this._dataMgr.hasWildPoker=!0,this._dataMgr.canUndoNum=-1,this.gameCtrl.isBlockGame=!0;var o=this.gameCtrl.mainContainer,n=this.pokerTableCtrl.getResultHeadPoker(),i=o.convertToNodeSpaceAR(n.node.parent.convertToWorldSpaceAR(n.node.getPosition()));this.moveProp(e,o,i,function(e){t.pokerTableCtrl.addResultPoker(e),t.gameCtrl.isBlockGame=!1}),Global.audioMgr.playEffect(Global.audioMgr.effPropWild)},cleanCategory:function(e){var i=this;this._dataMgr.canUndoNum=0,this.gameCtrl.isBlockGame=!0;var t={},o=this.pokerTableCtrl.pokerLayers;for(var n in o)for(var r in o[n]){var a=o[n][r];a.status==f.Open&&(t[a.data.category]||(t[a.data.category]=[]),t[a.data.category].push(a))}var s=Object.keys(t);if(!(s.length<=0)){var c=s[h.randomInteger(0,s.length-1)],l=t[c],u="";c==p.Spades?u="spade":c==p.Hearts?u="heart":c==p.Clubs?u="club":c==p.Diamonds&&(u="diamond"),cc.loader.loadRes("game/spine/daojupai2",sp.SkeletonData,function(e,t){var o=new cc.Node;o.y=.073*i.animLayer.height,i.animLayer.addChild(o);var n=o.addComponent(sp.Skeleton);n.skeletonData=t,n.setAnimation(0,"loop",!0),n.setCompleteListener(function(e){(e.animation?e.animation.name:"")==u&&(i.cleanPokers(l),i.gameCtrl.isBlockGame=!1)}),i.scheduleOnce(function(){n.setAnimation(0,u,!1)},2)}),Global.audioMgr.playEffect(Global.audioMgr.effPropCleanCategory)}},cleanRandom:function(){var i=this;this._dataMgr.canUndoNum=0,this.gameCtrl.isBlockGame=!0,cc.loader.loadRes("game/spine/lightning",sp.SkeletonData,function(e,t){var o=new cc.Node;o.scale=i.animLayer.height/cc.Canvas.instance.designResolution.height,i.animLayer.addChild(o);var n=o.addComponent(sp.Skeleton);n.skeletonData=t,n.setAnimation(0,"animation",!1),n.setCompleteListener(function(e){"animation"==(e.animation?e.animation.name:"")&&(i.doCleanRandom(),i.gameCtrl.isBlockGame=!1)})}),Global.audioMgr.playEffect(Global.audioMgr.effPropCleanRandom)},doCleanRandom:function(){var e=[],t=this.pokerTableCtrl.pokerLayers;for(var o in t)for(var n in t[o]){var i=t[o][n];i.status==f.Open&&e.push(i)}h.shuffle(e),e=e.slice(0,3),this.cleanPokers(e)},cleanPokers:function(e){var t=this.pokerTableCtrl,o=t.getResultHeadPoker(),n={parent:o.node.parent,pos:o.node.getPosition()};for(var i in e)t.moveToResultFromPeaks(e[i],n)},addHand:function(e){var o=this;this.gameCtrl.isBlockGame=!0;var t=this.gameCtrl.mainContainer,n=this.pokerTableCtrl.remainPokerBeginPos;this.moveProp(e,t,n,function(t){o.doAddHand(null,!0),t.runAction(cc.sequence(cc.fadeOut(1),cc.callFunc(function(){t.removeFromParent();var e=cc.callFunc(function(){o.gameCtrl.isBlockGame=!1});o.gameCtrl.node.runAction(cc.sequence(cc.delayTime(.1),e))})))}),Global.audioMgr.playEffect(Global.audioMgr.effPropAddHand)},doAddHand:function(e,t){var o=this,n=this.pokerTableCtrl,i=d.getRandomPokers(3),r=[];for(var a in i){var s=i[a],c=cc.instantiate(n.pokerPrefab).getComponent("PokerCtrl");c.refresh(s,g.Remain,0,this.gameCtrl),c.setStatus(f.Close),n.handPokersUI.addChild(c.node),n.remainPokers.unshift(c),r.push(c.node)}for(var l in n.refreshRemainPokers(),r){var u=r[l],h=u.getPosition();u.x=.5*(cc.director.getWinSize().width+u.width),u.runAction(cc.sequence(cc.delayTime(.1*Number(l)),cc.moveTo(.3,h).easing(cc.easeIn(3))))}if(!t){var p=cc.callFunc(function(){t||(o.gameCtrl.isBlockGame=!1)});this.gameCtrl.node.runAction(cc.sequence(cc.delayTime(.5),p))}},addTime:function(){var i=this;this.gameCtrl.isBlockGame=!0,cc.loader.loadRes("game/spine/daojupai5",sp.SkeletonData,function(e,t){var o=new cc.Node;i.animLayer.addChild(o);var n=o.addComponent(sp.Skeleton);n.skeletonData=t,n.setAnimation(0,"animation",!1),n.setCompleteListener(function(e){e.animation&&e.animation.name;"animation"==e.animation.name&&(i.doAddTime(),i.gameCtrl.isBlockGame=!1)})}),Global.audioMgr.playEffect(Global.audioMgr.effAddTime)},doAddTime:function(){this._dataMgr.addedTime+=30,Global.eventMgr.emit(n.EVENT_GAME_USE_ADD_TIME)},moveProp:function(e,t,o,n){var i=cc.instantiate(this.gameProp),r=i.getComponent("GamePropCtrl");r.type=e.model.type,r.isShowNum=!1,r.canUse=!1;var a=t.convertToNodeSpaceAR(e.node.parent.convertToWorldSpaceAR(e.node.getPosition()));i.setPosition(a),t.addChild(i);var s=[cc.p(a.x+100,a.y+400),cc.p(o.x-100,o.y+400),o],c=new cc.BezierTo(.7,s);i.runAction(cc.sequence(c,cc.callFunc(function(){n&&(n(i),n=null)})))}}),cc._RF.pop()},{"./../common/GCONFIG":"GCONFIG","./../common/UtilsOther":"UtilsOther","./../model/Poker":"Poker","./../model/PropModel":"PropModel",GameCtrl:"GameCtrl",GameDataMgr:"GameDataMgr",PokerTableCtrl:"PokerTableCtrl"}],GamePropRecommendCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"aab693nOOhOJb0a9G3xNXZd","GamePropRecommendCtrl");var i=e("./../common/GCONFIG"),n=e("./../common/ViewMgr"),r=e("GameDataMgr"),a=e("./../model/ClassicGameModel");e("./../common/DataMgr"),e("./../model/PropModel");cc.Class({extends:cc.Component,properties:{propName:cc.Label,propDesc:cc.Label,propIcon:cc.Sprite,propPrice:cc.Label,_recommendProp:null},onLoad:function(){var o=this,e=a.getInstance(),n=this._recommendProp=e.getRecommendProp();this.propName.string=n.baseData.name.toUpperCase(),this.propDesc.string=n.baseData.desc.toUpperCase(),cc.loader.loadRes("icon_prop",cc.SpriteAtlas,function(e,t){e||(o.propIcon.spriteFrame=t.getSpriteFrame(cc.js.formatStr("icon_ig_daojupai_%s",("00"+n.type).slice(-2))))}),this.propPrice.string="$"+i.IAPCFG["prop"+n.type].price,e.isCompleteDayTask&&(e.recommendPropTimes++,3<=e.recommendPropTimes&&(e.isRecommendProp=!1))},onBtnNo:function(){Global.audioMgr.playEffect(Global.audioMgr.effTouch),this.toClassicEntry()},toClassicEntry:function(){Global.eventMgr.emit(i.EVENT_POP_VIEW),n.getInstance().showGameClassicEntry(),r.isContinueClassic=!0},onBtnBuy:function(){var t=this;Global.audioMgr.playEffect(Global.audioMgr.effTouch);var e="prop"+this._recommendProp.type;IapTools.buy(e,function(){t._recommendProp.addProp(1);var e=a.getInstance();e.isCompleteDayTask&&(e.isRecommendProp=!1),t.toClassicEntry()},function(){})}}),cc._RF.pop()},{"./../common/DataMgr":"DataMgr","./../common/GCONFIG":"GCONFIG","./../common/ViewMgr":"ViewMgr","./../model/ClassicGameModel":"ClassicGameModel","./../model/PropModel":"PropModel",GameDataMgr:"GameDataMgr"}],GamePropsCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"59faf8HrsJCBpIvq+AHueGa","GamePropsCtrl");var n=e("./../common/GCONFIG"),i=e("./../Model/PropModel"),r=e("./../common/ViewMgr");e("./../common/LabelOwnNumCtrl"),e("./../game/GamePropCtrl");cc.Class({extends:cc.Component,properties:{btnGet:cc.Button,btnLeft:cc.Button,btnRight:cc.Button,content_label:cc.Label,propDescPre:{default:null,type:cc.Label},propDesc:{default:null,type:cc.Label},propName:{default:null,type:cc.Label},_modelList:[],_curIdx:0,currentProp:{default:null,type:cc.Node},leftProp:{default:null,type:cc.Node},rightProp:{default:null,type:cc.Node},initLeftVec2:cc.Vec2,initRightVec2:cc.Vec2,initCurrentVec2:cc.Vec2,isLeftOrRightPressed:!1,direction:-1,moveDistance:0,propParentWidth:0,initLeft_x:0,initRight_x:0,_current:null,_left:null,_right:null},onLoad:function(){this.initUIData(),this.refreshView(),Global.eventMgr.on(n.EVENT_REFRESH_PROP_LIST,this.refreshView,this)},onDestroy:function(){Global.eventMgr.targetOff(this)},initUIData:function(){this._modelList=i.getModelList(),this.initLeft_x=this.leftProp.x,this.initRight_x=this.rightProp.x,this.moveDistance=Math.abs(this.currentProp.x-this.leftProp.x),this.propParentWidth=this.currentProp.getParent().width,cc.log("GamePropsCtrl initUIData _modelList.length = "+this._modelList.length)},refreshView:function(){this._current=this.currentProp,this._left=this.leftProp,this._right=this.rightProp;var e=this._modelList[this._curIdx];this._current.getComponent("GamePropCtrl").type=e.type;var t=this._curIdx<=0?this._modelList.length-1:this._curIdx-1,o=this._curIdx>=this._modelList.length-1?0:this._curIdx+1;if(!this.isLeftOrRightPressed){var n=o;o=t,t=n}cc.log("GamePropsCtrl curindex = "+this._curIdx+" leftIndex = "+o+" rightIndex = "+t+" distance = "+this.moveDistance),cc.log("GamePropsCtrl this.propParentWidth = "+this.propParentWidth+" initLeft_x = "+this.initLeft_x+" initRight_x = "+this.initRight_x),this._left.getComponent("GamePropCtrl").type=this._modelList[o].type,this._right.getComponent("GamePropCtrl").type=this._modelList[t].type,this.content_label.string=e.baseData.desc.toUpperCase(),this.propName.string=e.baseData.name.toUpperCase()},refreshViewWithAnim:function(){var e=this;if(this.isLeftOrRightPressed){var t=0;if(1==this.direction)t=0-this.moveDistance;else{if(2!=this.direction)return;t=this.moveDistance}var o=this.currentProp.getPosition();cc.log("GamePropsCtrl refreshViewWithAnim currentProp x = "+o.x+" y = "+o.y),o.x+=t;var n=cc.moveTo(.1,cc.p(o.x,o.y));this.currentProp.runAction(n);var i=this.leftProp.getPosition();cc.log("GamePropsCtrl refreshViewWithAnim leftProp x = "+i.x+" y = "+i.y),i.x+=t;var r=cc.moveTo(.1,cc.p(i.x,i.y));this.leftProp.runAction(r);var a=this.rightProp.getPosition();cc.log("GamePropsCtrl refreshViewWithAnim rightProp x = "+a.x+" y = "+a.y),a.x+=t;var s=cc.moveTo(.1,cc.p(a.x,a.y)),c=cc.callFunc(function(){e.animEndFun()});this.rightProp.runAction(cc.sequence(s,c))}},animEndFun:function(){if(1==this.direction){cc.log("GamePropsCtrl animEndFun direction 1 ");var e=this._left;this._left=this._current,this._current=this._right,this._right=e,this._right.x=this.initRight_x,this._current.x=0,this._left.x=this.initLeft_x}else{cc.log("GamePropsCtrl animEndFun direction 2 ");e=this._right;this._right=this._current,this._current=this._left,this._left=e,this._left.x=this.initLeft_x,this._current.x=0,this._right.x=this.initRight_x}cc.log("GamePropsCtrl animEndFun currentProp x = "+this._current.x),cc.log("GamePropsCtrl animEndFun left x = "+this._left.x),cc.log("GamePropsCtrl animEndFun right x = "+this._right.x);var t=this._modelList[this._curIdx],o=this._curIdx<=0?this._modelList.length-1:this._curIdx-1,n=this._curIdx>=this._modelList.length-1?0:this._curIdx+1;if(!this.isLeftOrRightPressed){cc.log("GamePropsCtrl animEndFun isLeftOrRightPressed isLeftOrRightPressed = "+this.isLeftOrRightPressed);e=n;n=o,o=e}cc.log("GamePropsCtrl animEndFun curindex = "+this._curIdx+" leftIndex = "+n+" rightIndex = "+o+" distance = "+this.moveDistance),this._left.getComponent("GamePropCtrl").type=this._modelList[n].type,this._right.getComponent("GamePropCtrl").type=this._modelList[o].type,this.content_label.string=t.baseData.desc.toUpperCase(),this.propName.string=t.baseData.name.toUpperCase(),this.isLeftOrRightPressed=!1},onBtnReturn:function(){Global.eventMgr.emit(Global.config.EVENT_POP_VIEW),Global.audioMgr.playEffect(Global.audioMgr.effTouch)},onLeftBtn:function(){this.isLeftOrRightPressed||(this.isLeftOrRightPressed=!0,this.direction=1,this._curIdx<1?this._curIdx=this._modelList.length-1:this._curIdx--,this.refreshViewWithAnim(),Global.audioMgr.playEffect(Global.audioMgr.effTouch))},onRightBtn:function(){this.isLeftOrRightPressed||(this.isLeftOrRightPressed=!0,this.direction=2,this._curIdx>=this._modelList.length-1?this._curIdx=0:this._curIdx++,this.refreshViewWithAnim(),Global.audioMgr.playEffect(Global.audioMgr.effTouch))},onBtnGet:function(){r.getInstance().showChestCollectView(),Global.audioMgr.playEffect(Global.audioMgr.effTouch)}}),cc._RF.pop()},{"./../Model/PropModel":"PropModel","./../common/GCONFIG":"GCONFIG","./../common/LabelOwnNumCtrl":"LabelOwnNumCtrl","./../common/ViewMgr":"ViewMgr","./../game/GamePropCtrl":"GamePropCtrl"}],GameSucViewCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"0a1ebyqN6FKDKNIpJChZuOQ","GameSucViewCtrl");var n=e("./GameFinishViewBase"),l=e("./game/GameLevelMgr"),u=e("./game/GameDataMgr"),h=e("./common/DataMgr"),i=e("./common/ViewMgr");cc.Class({extends:n,properties:{},onLoad:function(){this._super(),Global.audioMgr.playMusic(Global.audioMgr.effSucBg)},onDisable:function(){this._super()},start:function(){var e=u.getInstance(),t=1,o=e.calcLevelRewardCoins(),n=0;e.isTimeComplete()&&(n=Math.round(e.remainTime),t++);var i=e.eliminateGetCoins;e.isComboComplete()&&t++,this.init(o,n,i,t);var r=h.getInstance(),a=r.playerObj,s=l.getInstance(),c=a.islands[0].starInfo[s.curLevel-1];c<t?(a.islands[0].starInfo[s.curLevel-1]=t,s.isShowStarAni=!0):s.isShowStarAni=!1,r.chestObj.starNumCollect+=Math.max(0,t-c),s.curLevel==a.level&&(a.level++,a.level=Math.min(a.level,a.islands[0].starInfo.length)),a.coins+=o+n,Global.uiUpdater.updateUserCoins(),this.getComponent(cc.Animation).play("gamesuc_labelLevel",!1),Global.audioMgr.playEffect(Global.audioMgr.effSuc)},onBtnNext:function(e,t){this.remove(),i.getInstance().showChestRewardView()}}),cc._RF.pop()},{"./GameFinishViewBase":"GameFinishViewBase","./common/DataMgr":"DataMgr","./common/ViewMgr":"ViewMgr","./game/GameDataMgr":"GameDataMgr","./game/GameLevelMgr":"GameLevelMgr"}],Global:[function(e,t,o){"use strict";cc._RF.push(t,"0272b2/+49OF6sGkg7PRj2j","Global"),window.Global=window.Global||{};var n=e("./UiUpdater"),i=e("./GCONFIG");e("./../common/AudioMgr");Global.eventMgr=new cc.EventTarget,Global.uiUpdater=new n,Global.gameMgr=null,Global.assetMgr=null,Global.config=i,Global.audioMgr=null,Global.preloadScene=function(o,n,i,r){var e=cc.director,t=e._getSceneUuid(n);if(t)e.emit(cc.Director.EVENT_BEFORE_SCENE_LOADING,n),cc.loader.load({uuid:t.uuid,type:"uuid"},null==r?null:function(e,t){r&&r.call(o,e,t)},function(e,t){e&&cc.errorID(1215,n,e.message),i&&i(e,t)});else{var a='Can not preload the scene "'+n+'" because it is not in the build settings.';i&&i(new Error(a)),cc.error("preloadScene: "+a)}},cc._RF.pop()},{"./../common/AudioMgr":"AudioMgr","./GCONFIG":"GCONFIG","./UiUpdater":"UiUpdater"}],GraySprite:[function(e,t,o){"use strict";cc._RF.push(t,"8d9aby287FNLoErBwjCZgo/","GraySprite"),cc.Class({extends:cc.Component,properties:{_gray:!1,gray:{type:Boolean,set:function(e){var t=(this._gray=e)?1:0;this.getComponent(cc.Sprite)._sgNode.setState(t)},get:function(){return this._gray}}},onLoad:function(){this.gray=this._gray}}),cc._RF.pop()},{}],HelloWorld:[function(e,t,o){"use strict";cc._RF.push(t,"280c3rsZJJKnZ9RqbALVwtK","HelloWorld");var a=e("./common/encrypt/Encrypt"),n=e("./common/LabelInteger");cc.Class({extends:cc.Component,properties:{label:{default:null,type:cc.Label},labelInteger:{default:null,type:n},text:"Hello, World!"},onLoad:function(){this.label.string=this.text;var e={data:123,age:20,name:"sky",coins:2e3,level:10,"key1:":"dfs;dfjsdjfsaf;sadjf;klasf",key2:0x6e400fe1e73f,key3:"fsdjflksdjflksdjfklsdlkfskldjflkdajlfksdklfjklsdjfkldjfklsdlkfsdlkfskldflksdf",key4:0x7ef92b214b525c0000},t=JSON.stringify(e),o=Date.now(),n=a.encrypt(t,"key",256),i=a.decrypt(n,"key",256),r=Date.now();cc.log(Date.now()),cc.log("源数据:"+JSON.stringify(e)),cc.log("加密后:"+n),cc.log("解密后:"+i),cc.log("加密解密消耗时间: "+(r-o)+" 毫秒。"),this.scheduleOnce(function(){this.labelInteger.setValue(99999999,!0)},.5,this)},update:function(e){}}),cc._RF.pop()},{"./common/LabelInteger":"LabelInteger","./common/encrypt/Encrypt":"Encrypt"}],IAPMgr:[function(e,t,o){"use strict";cc._RF.push(t,"ba3e48snhxAYqGJTfBSUjaa","IAPMgr");var n=e("./IAP"),i=e("./UtilsOther"),r=cc.Class({ctor:function(){this.iap=new n,this._initSuccess=!1},statics:{instance:null,getInstance:function(){return null==r.instance&&(r.instance=new r),r.instance}},initIAP:function(e){this._initSuccess=this.iap.init(this,e)},pay:function(e){this._initSuccess&&(cc.log(" 购买的商品id："+e),this.iap.pay(e))},savePurchaseSuccessProductInfo:function(e,t){},onSuccess:function(e){cc.log(" store onSuccess = "+i.dumpObject(e));var t={};t.productId=e.name,t.vender="APPLE",t.receipt=e.receiptCipheredPayload,farm.game.serverproxy.getPurchaseSucessfullyInfo(t)},onFailure:function(e,t){cc.log(" store onFailure = "+JSON.stringify(e)+" ===   msg: "+t),farm.eventManager.emit(farm.game.gmConst.STORE_EVENT_PURCHASE_FAILED)},onCanceled:function(e){},onRestored:function(e){},onProductRequestSuccess:function(e){cc.log(" === store onProductRequestSuccess = "+JSON.stringify(e))},onProductRequestFailure:function(e){cc.log(" === FarmIAPMgr: onProductRequestFailure "+e)}});t.exports=r,cc._RF.pop()},{"./IAP":"IAP","./UtilsOther":"UtilsOther"}],IAP:[function(e,t,o){"use strict";cc._RF.push(t,"3b2796tpxBLwqvP7PRPoGTW","IAP");var n=cc.Class({init:function(e,t){return"undefined"==typeof sdkbox?(cc.log("sdkbox undefined"),!1):(sdkbox.IAP.setListener(e),sdkbox.IAP.init(),sdkbox.IAP.setDebug(t),sdkbox.IAP.enableUserSideVerification(!0),sdkbox.IAP.refresh(),!0)},pay:function(e){sdkbox.IAP&&sdkbox.IAP.purchase(e)},restore:function(){sdkbox.IAP&&sdkbox.IAP.restore()},refresh:function(){sdkbox.IAP&&sdkbox.IAP.refresh()}});t.exports=n,cc._RF.pop()},{}],IapTools:[function(e,t,o){"use strict";cc._RF.push(t,"8931ckxYbhIdaBvpbEduuhE","IapTools");var n=e("./DataMgr"),i=i||{};(window.IapTools=i).buy=function(e,t,o){if(cc.sys.isNative){var n="";return cc.sys.platform===cc.sys.IPHONE||cc.sys.platform===cc.sys.IPAD?(i.sucCallback=t,i.failedCallback=o,n=jsb.reflection.callStaticMethod("HKPayManagerSolitaire","applePay:",e)):cc.sys.platform==cc.sys.ANDROID||(i.sucCallback=t,i.onBuySuc(e)),n}cc.log("only native can use iap.")},i.restorePurchase=function(e,t){if(cc.sys.isNative){var o="";return cc.sys.platform!==cc.sys.IPHONE&&cc.sys.platform!==cc.sys.IPAD||(i.sucCallback=e,i.failedCallback=t,o=jsb.reflection.callStaticMethod("HKPayManagerSolitaire","restorePurchase")),o}cc.log("only native can use iap.")},i.onBuySuc=function(e){cc.log("js购买成功. key="+e),i.sucCallback&&(i.sucCallback(e),i.sucCallback=null)},i.onBuyFailed=function(e){cc.log("js购买失败. key="+e),i.failedCallback&&(i.failedCallback(e),i.failedCallback=null)},i.onRestoreFinished=function(){cc.log("js恢复购买成功."),i.sucCallback&&i.sucCallback()},i.verifyVip=function(e){cc.log("js verify Vip:"+e),n.getInstance().iapObj.vipValid="true"===e},cc._RF.pop()},{"./DataMgr":"DataMgr"}],IslandLayerCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"3f632I0nPFGV5fNN4Xyj0e/","IslandLayerCtrl");var c=e("./../common/DataMgr"),l=e("./LevelNodeCtrl"),u=e("./../game/GameLevelMgr"),n=e("./../game/GameDataMgr"),i=e("./../FlyEffectCtrl"),r=e("./../common/UtilsOther");cc.Class({extends:cc.Component,properties:{cloudPanel:cc.Node,cloudScroll:cc.ScrollView,roadScroll:cc.ScrollView,treeScroll:cc.ScrollView,islandScroll:cc.ScrollView,islandContent:cc.Node,player:cc.Node},onLoad:function(){this.initLevelNode();var e=u.getInstance().preLevel;this.scrollToLevel(e),this.cloudSpeed=.5},initLevelNode:function(){for(var e=c.getInstance().playerObj.islands[0],t=c.getInstance().playerObj.level,o=e.starInfo,n=0;n<o.length;n++){var i=n+1,r=this.islandContent.getChildByName("levelNode_"+i),a=o[n];if(n+1<t?(r.getComponent("LevelNodeCtrl").nodeState=l.LevelNodeState.FINISHED,r.getComponent("LevelNodeCtrl").setStarNum(a)):r.getComponent("LevelNodeCtrl").nodeState=n+1===t?l.LevelNodeState.OPENING:l.LevelNodeState.CLOSED,t===u.getInstance().maxLevel&&0<a){var s=this.islandContent.getChildByName("levelNode_"+t);s.getComponent("LevelNodeCtrl").nodeState=l.LevelNodeState.FINISHED,s.getComponent("LevelNodeCtrl").setStarNum(a)}this.player.getComponent(sp.Skeleton).setAnimation(0,"state",!0)}},start:function(){n.lastGameIsSuccess&&u.getInstance().preLevel<c.getInstance().playerObj.level&&this.scheduleOnce(function(){if(this.scrollToLevel(++u.getInstance().preLevel,.5),u.getInstance().isShowStarAni){var e=this.islandContent.getChildByName("levelNode_"+u.getInstance().preLevel),t=this.node.parent.parent.getChildByName("btnStarReward");r.runFlyEffect(i.Type.STAR,cc.Canvas.instance.node,e,t)}},.5,this)},scrollToLevel:function(e,o){var t=this.islandContent.getChildByName("levelNode_"+e);if(t){var n=t.getPosition(),i=this.islandContent.width,r=this.islandScroll.node.width,a=n.x-r/2,s=(a=Math.max(a,0))/(i-r);if(s=Math.min(s,1),cc.log("scroll to percent: "+s),o){var c=this;this.player.getComponent(sp.Skeleton).setAnimation(0,"move",!1),this.player.getComponent(sp.Skeleton).addAnimation(0,"state",!0),this.player.getComponent(sp.Skeleton).setEventListener(function(e,t){"jump1"===t.stringValue&&(c.islandScroll.scrollToPercentHorizontal(s,o),c.player.runAction(cc.moveTo(Math.max(.1,o),n)))})}else this.player.setPosition(n),this.islandScroll.scrollToPercentHorizontal(s,o)}},onIslandScrolling:function(e,t,o){var n=-e.getScrollOffset().x/e.getMaxScrollOffset().x;n=Math.max(n,0),n=Math.min(n,1),this.cloudScroll.scrollToPercentHorizontal(n),this.roadScroll.scrollToPercentHorizontal(n),this.treeScroll.scrollToPercentHorizontal(n)},update:function(e){var t=this.cloudPanel.getChildren(),o=!0,n=!1,i=void 0;try{for(var r,a=t[Symbol.iterator]();!(o=(r=a.next()).done);o=!0){var s=r.value;s.x-=this.cloudSpeed,s.x<-300&&(s.x=cc.director.getWinSize().width+300)}}catch(e){n=!0,i=e}finally{try{!o&&a.return&&a.return()}finally{if(n)throw i}}}}),cc._RF.pop()},{"./../FlyEffectCtrl":"FlyEffectCtrl","./../common/DataMgr":"DataMgr","./../common/UtilsOther":"UtilsOther","./../game/GameDataMgr":"GameDataMgr","./../game/GameLevelMgr":"GameLevelMgr","./LevelNodeCtrl":"LevelNodeCtrl"}],IslandSceneCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"28e2bDjlJxNkbJKR0QLJL+A","IslandSceneCtrl");var n=e("./../common/GCONFIG"),i=e("./../common/ViewMgr"),r=e("./../common/DataMgr"),a=e("./../model/ClassicGameModel");cc.Class({extends:cc.Component,properties:{root:{default:null,type:cc.Node,tooltip:"用来放置islandLayer"},shopTip:cc.Node,classicTip:cc.Node,boxNode:cc.Node,btnControlTime:cc.Button},onLoad:function(){(Global.audioMgr.playMusic(Global.audioMgr.bgIsland),n.DEBUG_MODE)?(r.getInstance().playerObj.isControlTime?this.btnControlTime.node.getChildByName("Label").getComponent(cc.Label).string="关闭时间验证":this.btnControlTime.node.getChildByName("Label").getComponent(cc.Label).string="打开时间验证",this.btnControlTime.node.active=!0):this.btnControlTime.node.active=!1},onBtnSetting:function(){i.getInstance().showSettingView(),Global.audioMgr.playEffect(Global.audioMgr.effTouch2Show)},enterClassic:function(){i.getInstance().showGameClassicEntry(),Global.audioMgr.playEffect(Global.audioMgr.effTouch2Classic)},onBtnShop:function(){i.getInstance().showShopView(),Global.audioMgr.playEffect(Global.audioMgr.effTouch2Show)},onBtnChestCollect:function(){i.getInstance().showChestCollectView(),Global.audioMgr.playEffect(Global.audioMgr.effTouch2Show)},onProps:function(){i.getInstance().showPropsView(),Global.audioMgr.playEffect(Global.audioMgr.effTouchProp)},onDisable:function(){cc.log("on disable..."),this.boxNode.getComponent(cc.Animation).getAnimationState("lobbyBtnChest").stop()},onControlTime:function(){var e=r.getInstance().playerObj;e.isControlTime=!e.isControlTime,e.isControlTime?this.btnControlTime.node.getChildByName("Label").getComponent(cc.Label).string="关闭时间验证":this.btnControlTime.node.getChildByName("Label").getComponent(cc.Label).string="打开时间验证"},update:function(e){if(this.shopTip.active=r.getInstance().iapObj.showPropTips,this.classicTip.active=!a.getInstance().isCompleteDayTask,r.getInstance().chestObj.showChestTips){var t=this.boxNode.getComponent(cc.Animation).getAnimationState("lobbyBtnChest");t.isPlaying||t.play()}else{var o=this.boxNode.getComponent(cc.Animation);o.play("lobbyBtnChest"),o.setCurrentTime(0,"lobbyBtnChest"),o.stop("lobbyBtnChest")}}}),cc._RF.pop()},{"./../common/DataMgr":"DataMgr","./../common/GCONFIG":"GCONFIG","./../common/ViewMgr":"ViewMgr","./../model/ClassicGameModel":"ClassicGameModel"}],LabelInteger:[function(e,t,o){"use strict";cc._RF.push(t,"405f7hWPeJC67BWImVdh6Zm","LabelInteger");e("UtilsOther");var n=cc.Enum({None:0,ThousandSeparator:1,FormatTime:2}),i=function(e){var t=void 0;if(0<=e){var o=Math.floor(e/3600),n=Math.floor(e/60)%60,i=e%60,r=parseInt(o/24);if(1==r)return r+" day";if(1<r)return r+" days";t=0<r?r+"day "+("00"+(o-=24*r)).slice(-2)+":":0<o?("00"+o).slice(-2)+":":"",n<10&&(t+="0"),t+=n+":",i<10&&(t+="0"),t+=parseInt(i)}return t};cc.Class({extends:cc.Label,properties:{formType:{tooltip:"None: 不做格式化\nThousandSeparator: 3位逗号分隔\nFormatTime: 格式化时间",type:n,default:n.None,notify:function(e){this.setValue(this.string)}},animationDuration:{tooltip:"动画时间",default:.5},_textKey:0,string:{override:!0,tooltip:"必须是数字",get:function(){return this._textKey},set:function(e){if(this._textKey=Number(e),this._sgNode){switch(this.formType){case n.ThousandSeparator:e=e.toString().split("").reverse().join("").replace(/(\d{3}(?=\d)(?!\d+\.|$))/g,"$1,").split("").reverse().join("");break;case n.FormatTime:e=i(e)}this._sgNode.setString(e),this._updateNodeSize()}}},_curValue:0,_toValue:0,_delta:0},setValue:function(e,t){(""===e||null===e||isNaN(e))&&cc.assert(!1,"The value of LabelInteger must be a Number!"),t?this._toValue=e:(this._toValue=e,this._curValue=e,this.string=e),this._delta=0},setFormString:function(e){switch(this.formType){case n.None:this.string=e;break;case n.ThousandSeparator:this.string=e.split("").reverse().join("").replace(/(\d{3}(?=\d)(?!\d+\.|$))/g,"$1,").split("").reverse().join("");break;case n.FormatTime:this.string=i(e)}},update:function(e){if(this._toValue!=this._curValue){0==this._delta&&(this._delta=this._toValue-this._curValue);var t=e/this.animationDuration*this._delta;0<this._delta?(0==(t=parseInt(t))&&(t=1),this._curValue+=t,this._curValue=Math.min(this._curValue,this._toValue)):(t=-t,0==(t=parseInt(t))&&(t=1),this._curValue-=t,this._curValue=Math.max(this._curValue,this._toValue)),this.string=this._curValue,this._toValue==this._curValue&&(this._delta=0)}},onLoad:function(){this.setValue(this.string)}}),cc._RF.pop()},{UtilsOther:"UtilsOther"}],LabelOwnNumCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"858a73IPhtNkI+AvVWgT72B","LabelOwnNumCtrl"),cc.Class({extends:cc.Component,properties:{normalNode:cc.Node,overflowNode:cc.Node},onLoad:function(){},start:function(){},setNum:function(e,t){this.normalNode.active=!1,this.overflowNode.active=!1;var o=this.normalNode;t<e&&(o=this.overflowNode),o.active=!0,o.getChildByName("labelOwnNum").getComponent(cc.Label).string=e,o.getChildByName("labelMaxNum").getComponent(cc.Label).string="/"+t}}),cc._RF.pop()},{}],LevelNodeCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"554348StHlEeowsxGDFskLc","LevelNodeCtrl");var n=e("./../common/ViewMgr"),i=cc.Enum({FINISHED:0,OPENING:1,CLOSED:2});cc.Class({extends:cc.Component,properties:{labelLevel:cc.Label,spLock:cc.Node,starPanel:cc.Node,road:cc.Node,playerRoot:cc.Node,_level:1,level:{type:cc.Integer,min:1,step:1,get:function(){return this._level},set:function(e){this._level=e,this.labelLevel.string=e,this.node.name="levelNode_"+e}},_nodeState:i.FINISHED,nodeState:{type:i,get:function(){return this._nodeState},set:function(e){switch(this._nodeState=e){case i.FINISHED:this.spLock.active=!1,this.starPanel.active=!0,this.road.active=!0,this.labelLevel.node.active=!0;break;case i.OPENING:this.spLock.active=!1,this.starPanel.active=!1,this.road.active=!1,this.labelLevel.node.active=!0;break;case i.CLOSED:this.spLock.active=!0,this.starPanel.active=!1,this.road.active=!1,this.labelLevel.node.active=!1}}}},statics:{LevelNodeState:i},setStarNum:function(e){this.starPanel.getComponent("StarPanelCtrl").showStarNum=e},onTouchEnd:function(e,t){this.nodeState!==i.CLOSED&&(cc.log("touch level:"+this.level),n.getInstance().showLevelTipsView(this.level),Global.audioMgr.playEffect(Global.audioMgr.effTouch2Show))},onEnable:function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},onDisable:function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},start:function(){}}),cc._RF.pop()},{"./../common/ViewMgr":"ViewMgr"}],LevelTipsCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"61734+I4GJCV5FOYIxsQ7KX","LevelTipsCtrl");var s=e("./game/GameLevelMgr"),n=e("./game/GameDataMgr"),c=e("./common/DataMgr"),l=(e("./common/GCONFIG"),e("./model/PropModel")),a=e("./common/CoinsMgr");cc.Class({extends:cc.Component,properties:{starPanel:sp.Skeleton,labelLevel:cc.Label,labelCost:cc.Label,btnPlay:cc.Button,costNode:cc.Node,propFree:cc.Node,propHint:cc.Node},onBtnPlay:function(e,t){var o=this,n=c.getInstance().iapObj.vipValid,i=l.getModel(6).num;if(n||0<i)n||l.getModel(6).useProp(),this._enterGame();else{var r=s.getLevelCfg(s.getInstance().curLevel);a.costCoins(r.baseConsume,function(){o._enterGame()},function(){cc.log("金币不足，无法进入游戏")})}},_enterGame:function(){s.getInstance().preLevel=s.getInstance().curLevel,n.isInClassic=!1,Global.gameMgr.transitionToGame(),Global.audioMgr.playEffect(Global.audioMgr.effTouch)},onLoad:function(){var e=s.getInstance().curLevel;this.labelLevel.string="LEVEL "+e;var t=c.getInstance().playerObj.islands[0].starInfo[e-1],o="";o=0===t?"jiesuan4":"start"+t,this.starPanel.setAnimation(0,o,!1);var n=l.getModel(6).num,i=l.getModel(7).num,r=c.getInstance().iapObj.vipValid;if(0<n||r)this.costNode.active=!1,this.propFree.getComponent(cc.Animation).play("propBubble_ani");else{this.propFree.active=!1;var a=s.getLevelCfg(e);this.labelCost.string=a.baseConsume}this.propHint.active=0<i,0<i&&this.propHint.getComponent(cc.Animation).play("propBubble_ani"),n<=0&&i<=0&&!r&&(this.btnPlay.node.y+=80)},start:function(){this.getComponent(cc.Animation).play("levelTips_ani",!1)},onDestroy:function(){cc.log("...destroy leveltips.")}}),cc._RF.pop()},{"./common/CoinsMgr":"CoinsMgr","./common/DataMgr":"DataMgr","./common/GCONFIG":"GCONFIG","./game/GameDataMgr":"GameDataMgr","./game/GameLevelMgr":"GameLevelMgr","./model/PropModel":"PropModel"}],LoginCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"459d6OiYnVBp72uF5Pxu8nq","LoginCtrl");var n=e("./common/GameCfg");cc.Class({extends:cc.Component,properties:{progressBar:cc.ProgressBar,_progress:0},onLoad:function(){n.getInstance().loadLocalCfg()},start:function(){Global.audioMgr.playEffect(Global.audioMgr.bgLoading)},update:function(e){1<=this._progress||(this._progress+=e,this.progressBar.progress=this._progress,1<=this._progress&&n.getInstance().isLoadOver&&Global.preloadScene(this,"island",function(e){Global.gameMgr.transitonToIsland(!0)},function(e,t){}))}}),cc._RF.pop()},{"./common/GameCfg":"GameCfg"}],Md5:[function(e,t,o){"use strict";cc._RF.push(t,"df9553a0RtFNZ/mf3UeoRp9","Md5");var i=0,r="",s=8;function n(e){return C(c(u(e),e.length*s))}function c(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var o=1732584193,n=-271733879,i=-1732584194,r=271733878,a=0;a<e.length;a+=16){var s=o,c=n,l=i,u=r;n=f(n=f(n=f(n=f(n=d(n=d(n=d(n=d(n=p(n=p(n=p(n=p(n=h(n=h(n=h(n=h(n,i=h(i,r=h(r,o=h(o,n,i,r,e[a+0],7,-680876936),n,i,e[a+1],12,-389564586),o,n,e[a+2],17,606105819),r,o,e[a+3],22,-1044525330),i=h(i,r=h(r,o=h(o,n,i,r,e[a+4],7,-176418897),n,i,e[a+5],12,1200080426),o,n,e[a+6],17,-1473231341),r,o,e[a+7],22,-45705983),i=h(i,r=h(r,o=h(o,n,i,r,e[a+8],7,1770035416),n,i,e[a+9],12,-1958414417),o,n,e[a+10],17,-42063),r,o,e[a+11],22,-1990404162),i=h(i,r=h(r,o=h(o,n,i,r,e[a+12],7,1804603682),n,i,e[a+13],12,-40341101),o,n,e[a+14],17,-1502002290),r,o,e[a+15],22,1236535329),i=p(i,r=p(r,o=p(o,n,i,r,e[a+1],5,-165796510),n,i,e[a+6],9,-1069501632),o,n,e[a+11],14,643717713),r,o,e[a+0],20,-373897302),i=p(i,r=p(r,o=p(o,n,i,r,e[a+5],5,-701558691),n,i,e[a+10],9,38016083),o,n,e[a+15],14,-660478335),r,o,e[a+4],20,-405537848),i=p(i,r=p(r,o=p(o,n,i,r,e[a+9],5,568446438),n,i,e[a+14],9,-1019803690),o,n,e[a+3],14,-187363961),r,o,e[a+8],20,1163531501),i=p(i,r=p(r,o=p(o,n,i,r,e[a+13],5,-1444681467),n,i,e[a+2],9,-51403784),o,n,e[a+7],14,1735328473),r,o,e[a+12],20,-1926607734),i=d(i,r=d(r,o=d(o,n,i,r,e[a+5],4,-378558),n,i,e[a+8],11,-2022574463),o,n,e[a+11],16,1839030562),r,o,e[a+14],23,-35309556),i=d(i,r=d(r,o=d(o,n,i,r,e[a+1],4,-1530992060),n,i,e[a+4],11,1272893353),o,n,e[a+7],16,-155497632),r,o,e[a+10],23,-1094730640),i=d(i,r=d(r,o=d(o,n,i,r,e[a+13],4,681279174),n,i,e[a+0],11,-358537222),o,n,e[a+3],16,-722521979),r,o,e[a+6],23,76029189),i=d(i,r=d(r,o=d(o,n,i,r,e[a+9],4,-640364487),n,i,e[a+12],11,-421815835),o,n,e[a+15],16,530742520),r,o,e[a+2],23,-995338651),i=f(i,r=f(r,o=f(o,n,i,r,e[a+0],6,-198630844),n,i,e[a+7],10,1126891415),o,n,e[a+14],15,-1416354905),r,o,e[a+5],21,-57434055),i=f(i,r=f(r,o=f(o,n,i,r,e[a+12],6,1700485571),n,i,e[a+3],10,-1894986606),o,n,e[a+10],15,-1051523),r,o,e[a+1],21,-2054922799),i=f(i,r=f(r,o=f(o,n,i,r,e[a+8],6,1873313359),n,i,e[a+15],10,-30611744),o,n,e[a+6],15,-1560198380),r,o,e[a+13],21,1309151649),i=f(i,r=f(r,o=f(o,n,i,r,e[a+4],6,-145523070),n,i,e[a+11],10,-1120210379),o,n,e[a+2],15,718787259),r,o,e[a+9],21,-343485551),o=g(o,s),n=g(n,c),i=g(i,l),r=g(r,u)}return Array(o,n,i,r)}function l(e,t,o,n,i,r){return g((a=g(g(t,e),g(n,r)))<<(s=i)|a>>>32-s,o);var a,s}function h(e,t,o,n,i,r,a){return l(t&o|~t&n,e,t,i,r,a)}function p(e,t,o,n,i,r,a){return l(t&n|o&~n,e,t,i,r,a)}function d(e,t,o,n,i,r,a){return l(t^o^n,e,t,i,r,a)}function f(e,t,o,n,i,r,a){return l(o^(t|~n),e,t,i,r,a)}function a(e,t){var o=u(e);16<o.length&&(o=c(o,e.length*s));for(var n=Array(16),i=Array(16),r=0;r<16;r++)n[r]=909522486^o[r],i[r]=1549556828^o[r];var a=c(n.concat(u(t)),512+t.length*s);return c(i.concat(a),640)}function g(e,t){var o=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(o>>16)<<16|65535&o}function u(e){for(var t=Array(),o=(1<<s)-1,n=0;n<e.length*s;n+=s)t[n>>5]|=(e.charCodeAt(n/s)&o)<<n%32;return t}function m(e){for(var t="",o=(1<<s)-1,n=0;n<32*e.length;n+=s)t+=String.fromCharCode(e[n>>5]>>>n%32&o);return t}function C(e){for(var t=i?"0123456789ABCDEF":"0123456789abcdef",o="",n=0;n<4*e.length;n++)o+=t.charAt(e[n>>2]>>n%4*8+4&15)+t.charAt(e[n>>2]>>n%4*8&15);return o}function _(e){for(var t="",o=0;o<4*e.length;o+=3)for(var n=(e[o>>2]>>o%4*8&255)<<16|(e[o+1>>2]>>(o+1)%4*8&255)<<8|e[o+2>>2]>>(o+2)%4*8&255,i=0;i<4;i++)8*o+6*i>32*e.length?t+=r:t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(n>>6*(3-i)&63);return t}t.exports={md5_hex:n,md5_b64:function(e){return _(c(u(e),e.length*s))},md5_str:function(e){return m(c(u(e),e.length*s))},md5_hex_hmac:function(e,t){return C(a(e,t))},md5_b64_hmac:function(e,t){return _(a(e,t))},md5_str_hmac:function(e,t){return m(a(e,t))}},cc._RF.pop()},{}],PokerCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"97b06mfTExEPabA7g0Wh+i9","PokerCtrl");var i=e("./../common/GCONFIG"),s=e("./../model/Poker").Color,n=e("./../model/Poker").Status,r=e("./../model/Poker").TableLocation;cc.Class({extends:cc.Component,properties:function(){return{content:cc.Node,collisionNode:cc.Node,point:cc.Label,point_extra:cc.Label,colorSmall:cc.Sprite,colorBig:cc.Sprite,character:cc.Sprite,back:cc.Sprite,_data:null,data:{get:function(){return this._data}},_status:n.Null,status:{get:function(){return this._status}},_tableLocation:r.Null,tableLocation:{set:function(e){this._tableLocation=e},get:function(){return this._tableLocation}},_layerLevel:0,layerLevel:{get:function(){return this._layerLevel}},_lastInfo:null,lastInfo:{get:function(){return this._lastInfo}},isPeak:!1,_isMoving:!1,_isTurning:!1,childPokers:{default:[],type:[cc.Node]},parentPokers:{default:[],type:[cc.Node]},_oriColliderPoints:[cc.Vec2],oriColliderPoints:{get:function(){return this._oriColliderPoints}},_oriRotation:0,_gameCtrl:e("GameCtrl")}},onLoad:function(){Global.eventMgr.on(i.EVENT_GAME_POKER_ALERT,this.runEffectAlert,this)},start:function(){this.content.active=!0;var e=this.content.getChildByName("collisionNode");e.on(cc.Node.EventType.TOUCH_START,function(e){if(this._isMoving||this._isTurning)return!1;var t=e.touch.getLocation();return cc.rectContainsPoint(this.getColliderRect(),t)&&(cc.log("Hit!!!"),e.stopPropagation(),this.onClick()),!1},this),this._oriColliderPoints=e.getComponent(cc.Collider).world.points,this._oriRotation=this.node.rotation},onDestroy:function(){this.node.targetOff(this),Global.eventMgr.targetOff(this)},onClick:function(){Global.eventMgr.emit(i.EVENT_TOUCH_POKER,this)},update:function(e){},refresh:function(r,e,t,o){this._data=r,this._tableLocation=e,this._layerLevel=t,this._gameCtrl=o;var a=this;cc.loader.loadRes("game/game_ui",cc.SpriteAtlas,function(e,t){a.point.originPos||(a.point.originPos=a.point.node.getPosition()),a.point_extra.originPos||(a.point_extra.originPos=a.point_extra.node.getPosition()),a.point.node.color=r.color==s.Red?cc.color(206,28,17):cc.Color.BLACK,a.point_extra.node.color=a.point.node.color,10==r.point?(a.point.string=1,a.point_extra.node.active=!0,a.point.node.x-=4,a.point_extra.node.x-=4):(a.point.string=r.pointName,a.point_extra.node.active=!1,a.point.node.setPosition(a.point.originPos),a.point_extra.node.setPosition(a.point_extra.originPos));var o=r.categoryName.toLowerCase(),n="game_"+o;if(a.colorSmall.spriteFrame=t.getSpriteFrame(n),a.colorBig.node.active=!1,a.character.node.active=!1,10<r.point){var i=cc.js.formatStr("game_%s_character_%d",o,r.point);a.character.spriteFrame=t.getSpriteFrame(i),a.character.node.active=!0}else a.colorBig.spriteFrame=t.getSpriteFrame(n),a.colorBig.node.active=!0})},setStatus:function(e){var t=this._status!=r.Null&&this._status!=e;this._status=e,t?this.runEffectTurn(e==n.Open):this.refreshView()},isOpen:function(){return this.status==n.Open},refreshView:function(){this.back.node.active=!this.isOpen()},checkCollision:function(e){return cc.Intersection.polygonPolygon(this.oriColliderPoints,e.oriColliderPoints)},getColliderRect:function(){return this.collisionNode.getBoundingBoxToWorld()},changePokerLocation:function(e){this._lastInfo||(this._lastInfo={});var t=this._lastInfo;t.status=this.status,t.tableLocation=this.tableLocation,t.layerLevel=this.layerLevel,t.parent=this.node.parent,t.pos=this.node.getPosition(),t.zIndex=this.node.zIndex,t.rotation=this.node.rotation,this.refreshByInfo(e),Global.eventMgr.emit(i.EVENT_POKER_CHANGE_LOCATION,this)},changeToLast:function(){this.refreshByInfo(this._lastInfo)},refreshByInfo:function(t){this.setStatus(t.status),this.tableLocation=t.tableLocation,this._layerLevel=t.layerLevel;var o=this.node,e=o.parent.convertToWorldSpaceAR(o.getPosition());o.parent=this._gameCtrl.mainContainer,o.setPosition(o.parent.convertToNodeSpaceAR(e));var n=o.parent.convertToNodeSpaceAR(t.parent.convertToWorldSpaceAR(t.pos));o.runAction(cc.sequence(cc.moveTo(.2,n),cc.callFunc(function(){var e=o.parent.convertToWorldSpaceAR(o.getPosition());o.parent=t.parent,o.setPosition(o.parent.convertToNodeSpaceAR(e)),o.zIndex=t.zIndex,this._isMoving=!1,Global.eventMgr.emit(i.EVENT_POKER_MOVE_END,this)},this))),0!=this._oriRotation&&(this.tableLocation==r.Result?o.runAction(cc.rotateTo(.2,0)):this.tableLocation==r.Peaks&&o.runAction(cc.rotateTo(.2,this._oriRotation))),this._isMoving=!0,Global.eventMgr.emit(i.EVENT_POKER_MOVE_BEGIN,this)},runEffectTurn:function(e){if(!this._isTurning){this._isTurning=!0;var t=this.node,o=this.getEffectTurn(e,.2);e&&(t.scaleX*=-1),t.runAction(o),Global.audioMgr.playEffect(Global.audioMgr.effTurn)}},getEffectTurn:function(e,t){var o=t/2,n=this.node,i=Math.abs(n.scaleX),r=n.scaleY,a=cc.callFunc(function(){this._isTurning=!1},this);return e?cc.sequence(cc.scaleTo(o,0,r),cc.callFunc(function(){this.refreshView()},this),cc.scaleTo(o,i,r),a):cc.sequence(cc.scaleTo(o,0,r),cc.callFunc(function(){this.refreshView()},this),cc.scaleTo(o,-i,r),a)},runEffectAlert:function(e){e.detail==this&&this.getComponent(cc.Animation).play("pokerPrefab_shake")}}),cc._RF.pop()},{"./../common/GCONFIG":"GCONFIG","./../model/Poker":"Poker",GameCtrl:"GameCtrl"}],PokerTableCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"55943o9dYNBWZo5qOpxIy7K","PokerTableCtrl");var s=e("./../common/GCONFIG"),n=e("./../model/PokerTable").Class,c=e("./../model/Poker").Status,p=e("./../model/Poker").TableLocation,d=e("PokerCtrl"),i=e("GamePropCtrl"),f=e("GameDataMgr"),l=(e("./../common/DataMgr"),e("./../model/PropModel")),r=e("./../common/CoinsMgr");cc.Class({extends:cc.Component,properties:function(){return{gameCtrl:e("GameCtrl"),peaksUI:cc.Node,handPokersUI:cc.Node,btnUndo:cc.Button,labelUndoCost:cc.Label,pokerPrefab:cc.Prefab,_pokerTable:{default:null,type:n},_pokerLayers:[],pokerLayers:{get:function(){return this._pokerLayers}},_dataMgr:null,_resultPokers:[],_remainPokers:[],remainPokers:{get:function(){return this._remainPokers}},_remainPokerBeginPos:cc.p(),remainPokerBeginPos:{get:function(){return this._remainPokerBeginPos},set:function(e){this._remainPokerBeginPos=e}},_isPokerMoving:!1}},onLoad:function(){this._pokerTable=new n,this._pokerLayers=new Array,this._dataMgr=f.getInstance(),Global.eventMgr.on(s.EVENT_TOUCH_POKER,this.onTouchPoker,this),Global.eventMgr.on(s.EVENT_POKER_CHANGE_LOCATION,this.onPokerChangeLocation,this),this.onPokerChangeLocation(),Global.eventMgr.on(s.EVENT_POKER_MOVE_BEGIN,this.onPokerMoveBegin,this),Global.eventMgr.on(s.EVENT_POKER_MOVE_END,this.onPokerMoveEnd,this)},onTouchPoker:function(e){if(!this._isPokerMoving){var t=this.getResultHeadPoker();if(t){var o=e.detail;if(cc.log("onTouchPoker:"+o.layerLevel+" poker.tableLocation:"+o.tableLocation+" posX:"+o.node.x),o.tableLocation==p.Peaks){if(o.status==c.Open)if(this.checkForConnect(o)){this._dataMgr.hasWildPoker=!1,this._dataMgr.canUndoNum++;var n=this.getResultHeadPoker(),i={parent:n.node.parent,pos:n.node.getPosition()};this.moveToResultFromPeaks(o,i)}else Global.eventMgr.emit(s.EVENT_GAME_POKER_ALERT,o),Global.audioMgr.playEffect(Global.audioMgr.effError)}else if(o.tableLocation==p.RemainHead){if(this._dataMgr.hasWildPoker=!1,this._dataMgr.canUndoNum++,!f.isInClassic)if(0<l.getModel(7).num&&0<this._dataMgr.canUndoNum){var r=this.getAllCanEliminate();for(var a in r)Global.eventMgr.emit(s.EVENT_GAME_POKER_ALERT,r[a]);0<r.length&&Global.audioMgr.playEffect(Global.audioMgr.effError)}this._dataMgr.alterScore(0,!0),this._dataMgr.resetCombo(),this.changePokerLocation(o,p.Result,{parent:t.node.parent,pos:t.node.getPosition()}),Global.eventMgr.emit(s.EVENT_POKER_NEW,o)}}}},moveToResultFromPeaks:function(e,t){this._dataMgr.eliminate(),this.changePokerLocation(e,p.Result,t),Global.eventMgr.emit(s.EVENT_POKER_ELIMINATE,e),this.checkPeaksIsClean()&&Global.eventMgr.emit(s.EVENT_GAME_SUCCESS)},onPokerChangeLocation:function(e){this.refreshBtnUndo()},refreshBtnUndo:function(){this.btnUndo.node.active=this.isCanUndo(),this.labelUndoCost.string="-"+this._dataMgr.calcUndoCost()},onPokerMoveBegin:function(e){this._isPokerMoving=!0,e.detail.tableLocation==p.Result&&(this.checkAllPokerCover(),this.refreshRemainPokers())},onPokerMoveEnd:function(e){this._isPokerMoving=!1;var t=e.detail;t.tableLocation!=p.Result?(this.checkAllPokerCover(),this.refreshRemainPokers()):t.tableLocation==p.Result&&this.refreshResultPokers()},isCanUndo:function(){var e=this.getResultHeadPoker();return e&&e.lastInfo&&0<this._dataMgr.canUndoNum},onUndo:function(){var t=this;r.costCoins(this._dataMgr.calcUndoCost(),function(){if(!t._isPokerMoving){var e=t.getResultHeadPoker();e.lastInfo&&(e.changeToLast(),t.addToArrayByLocation(e,e.lastInfo.tableLocation),t.removeInArrayByLocation(e,p.Result),Global.eventMgr.emit(s.EVENT_POKER_CHANGE_LOCATION),t._dataMgr.undo(),e.lastInfo.tableLocation==p.Peaks&&t._dataMgr.cancelEliminate(),Global.eventMgr.emit(s.EVENT_POKER_UNDO,e),t.refreshBtnUndo(),Global.uiUpdater.updateUserCoins())}},function(){cc.log("金币不足，无法撤销")})},changePokerLocation:function(e,t,o){if(e&&t==p.Result){this.addToArrayByLocation(e,t);var n=e.tableLocation;this.removeInArrayByLocation(e,n);var i={tableLocation:t,status:c.Open,parent:o.parent,pos:o.pos,zIndex:this._resultPokers.length};e.changePokerLocation(i)}},removeInArrayByLocation:function(e,t){if(t==p.Peaks){var o=this._pokerLayers;for(var n in o)for(var i in o[n])if(e==o[n][i]){o[n].splice(i,1);break}}else t==p.RemainHead?e==this._remainPokers[this._remainPokers.length-1]&&this._remainPokers.pop():t==p.Result&&e==this._resultPokers[this._resultPokers.length-1]&&this._resultPokers.pop()},addToArrayByLocation:function(e,t){if(t==p.Peaks){var o=this._pokerLayers,n=e.layerLevel;0<=n&&n<o.length&&o[n].push(e)}else t==p.RemainHead?this._remainPokers.push(e):t==p.Result&&this._resultPokers.push(e)},checkPokerCover:function(e){var t=this._pokerLayers.length;if(!(e.layerLevel<0||e.layerLevel>=t))if(e.layerLevel<t-1){var o=!0;e:for(var n=e.layerLevel+1;n<t;n++){var i=this._pokerLayers[n];for(var r in i){var a=i[r];if(e.checkCollision(a)){o=!1;break e}}}o?e.setStatus(c.Open):e.setStatus(c.Close)}else e.setStatus(c.Open)},onDestroy:function(){Global.eventMgr.targetOff(this)},start:function(){},initPokerTable:function(e){this.peaksUI.addChild(e);for(var t=e.getChildren(),o=t.length,n=0;n<o;n++){for(var i=new Array,r=new Array,a=t[n].getChildren(),s=a.length,c=0;c<s;c++){var l=a[c],u=cc.instantiate(l);u.parent=l.parent,u.getComponent(d).refresh(this._pokerTable.deal(),p.Peaks,n,this.gameCtrl),i.push(u.getComponent(d)),r.push(l)}for(var h in this._pokerLayers.push(i),r)r[h].removeFromParent()}this.initHandPokers(),f.isUsePropAfterNoHandsWhenNoClassic=!1},checkAllPokerCover:function(){var e=this._pokerLayers;for(var t in e)for(var o in e[t]){e[t][o];this.checkPokerCover(e[t][o])}},checkPeaksIsClean:function(){var e=this._pokerLayers;for(var t in e)for(var o in e[t])return!1;return!0},initHandPokers:function(){var e=cc.instantiate(this.pokerPrefab).getComponent(d);this.handPokersUI.addChild(e.node),e.refresh(this._pokerTable.deal(),p.Result,0,this.gameCtrl),e.setStatus(c.Open),this._resultPokers.push(e);this._pokerTable.getRemainNum();for(var t=null;t=this._pokerTable.deal();){var o=cc.instantiate(this.pokerPrefab).getComponent(d);o.refresh(t,p.Remain,0,this.gameCtrl),o.setStatus(c.Close),this.handPokersUI.addChild(o.node),this._remainPokers.push(o)}if(this.refreshRemainPokers(),0<this._remainPokers.length){var n=this._remainPokers[this._remainPokers.length-1].node;this._remainPokerBeginPos=this.gameCtrl.mainContainer.convertToNodeSpaceAR(n.parent.convertToWorldSpaceAR(n.getPosition()))}},refreshRemainPokers:function(){var e=this._remainPokers.length;for(var t in this._remainPokers){var o=Number(t),n=this._remainPokers[o];n.tableLocation=o==e-1?p.RemainHead:p.Remain,n.node.zIndex=o,n.node.x=+(150+10*(e-1-o))}},checkForConnect:function(e){return!!e.isOpen()&&(!!f.getInstance().hasWildPoker||n.checkForConnect(e.data,this.getResultHeadPoker().data))},getResultHeadPoker:function(){var e=this._resultPokers.length;if(0<e){var t=this._resultPokers[e-1];return t.node.active=!0,t}return null},addResultPoker:function(e){var t=this.handPokersUI,o=t.convertToNodeSpaceAR(e.parent.convertToWorldSpaceAR(e.getPosition()));e.parent=null,e.setPosition(o),t.addChild(e),this.addToArrayByLocation(e.getComponent(i),p.Result),this.refreshResultPokers(),this.refreshBtnUndo()},refreshResultPokers:function(){var e=this._resultPokers.length;for(var t in this._resultPokers)this._resultPokers[t].node.active=t==e-1},getRemainPeaks:function(){var e=[],t=this._pokerLayers;for(var o in t)for(var n in t[o]){var i=t[o][n];i.isPeak&&e.push(i)}return e},getAllPokerInPeaks:function(){var e=[],t=this._pokerLayers;for(var o in t)for(var n in t[o])e.push(t[o][n]);return e},getAllCanEliminate:function(){var e=[],t=this._pokerLayers;for(var o in t)for(var n in t[o]){var i=t[o][n];this.checkForConnect(i)&&e.push(i)}return e},checkGameIsEnd:function(){if(0<this._remainPokers.length)return!1;var e=this._pokerLayers;for(var t in e)for(var o in e[t])if(this.checkForConnect(e[t][o]))return!1;return!0}}),cc._RF.pop()},{"./../common/CoinsMgr":"CoinsMgr","./../common/DataMgr":"DataMgr","./../common/GCONFIG":"GCONFIG","./../model/Poker":"Poker","./../model/PokerTable":"PokerTable","./../model/PropModel":"PropModel",GameCtrl:"GameCtrl",GameDataMgr:"GameDataMgr",GamePropCtrl:"GamePropCtrl",PokerCtrl:"PokerCtrl"}],PokerTable:[function(e,t,o){"use strict";cc._RF.push(t,"6e09eWKGfxJGJZlPC7JjHno","PokerTable");var n=e("Poker").Class,i=52;function r(e){this._deckNum=e||1,this._cardIds=new Array(this._deckNum*i),this.reset(),this.shuffle()}r.prototype.reset=function(){this._cardIds.length=this._deckNum*i;for(var e=0,t=0;t<this._deckNum;t++)for(var o=0;o<i;o++)this._cardIds[e]=n.getById(o),e++},r.prototype.deal=function(){var e=this._cardIds;return 0===e.length?null:e.pop()},r.prototype.getRemainNum=function(){return this._cardIds.length},r.prototype.shuffle=function(){a(this._cardIds)},r.checkForConnect=function(e,t){return!(!e||!t)&&(cc.log("---srcPoker point:"+e.point),cc.log("---targetPoker point:"+t.point),1==e.point&&13==t.point||13==e.point&&1==t.point||1==Math.abs(e.point-t.point))};var a=function(e){for(var t=e.length-1;0<t;t--){var o=Math.random()*(t+1)|0,n=e[t];e[t]=e[o],e[o]=n}return e};t.exports={Class:r},cc._RF.pop()},{Poker:"Poker"}],Poker:[function(e,t,o){"use strict";cc._RF.push(t,"4451cRsGltHk485KXq/kf/+","Poker");var n=e("./../common/UtilsOther"),s=cc.Enum({Null:0,Spades:1,Hearts:2,Clubs:3,Diamonds:4,Max:5}),c=cc.Enum({Null:0,Black:1,Red:2}),i=cc.Enum({Null:0,Open:1,Close:2}),r=cc.Enum({Null:0,Result:1,Peaks:2,Remain:3,RemainHead:4}),l="NULL,A,2,3,4,5,6,7,8,9,10,J,Q,K".split(",");function a(e){var t=Math.floor(e/13)+1,o=s[t],n=t%2==0?c.Red:c.Black,i=c[n],r=e%13+1,a=l[r];Object.defineProperties(this,{id:{get:function(){return e}},category:{get:function(){return t}},categoryName:{get:function(){return o}},color:{get:function(){return n}},colorName:{get:function(){return i}},point:{get:function(){return r}},pointName:{get:function(){return a}}})}var u=new Array;(function(){for(var e=0;e<4;e++)for(var t=0;t<13;t++){var o=new a(13*e+t);u.push(o)}})(),a.getById=function(e){return u[e]},a.getRandomPokers=function(e){var t=u.slice(0);return n.shuffle(t),t.slice(0,e)},t.exports={Category:s,Color:c,Status:i,TableLocation:r,Class:a},cc._RF.pop()},{"./../common/UtilsOther":"UtilsOther"}],ProgressBarExt:[function(e,t,o){"use strict";cc._RF.push(t,"ef4e9V6Kw5GYbrXbeB7Sxtv","ProgressBarExt");var n=cc.Enum({NULL:0,INCREASE:1,DECREASE:2}),i=cc.Class({extends:cc.ProgressBar,properties:{_processType:n.NULL,_targetProgress:0,_progressDiff:0,targetProgress:{tooltip:"目标进度值",min:0,max:1,get:function(){return this._targetProgress},set:function(e){this._targetProgress=e,this._progressDiff=this._targetProgress-this.progress,0<this._progressDiff?this._processType=n.INCREASE:this._progressDiff<0?this._processType=n.DECREASE:this._processType=n.NULL}},_onProgressComplete:null,_changeTime:0,changeTime:{tooltip:"过度动画执行的时间(单位秒)",range:[0,Number.MAX_VALUE],get:function(){return this._changeTime},set:function(e){this._changeTime=e}}},start:function(){},update:function(e){if(this._processType!=n.NULL){var t=this._progressDiff;0<this._changeTime&&(t=this._progressDiff/this._changeTime,t*=e),this._processType==n.INCREASE?(this._targetProgress>this.progress?this.progress+=t:(this.progress=this._targetProgress,this.runProgressComplete(),this._processType=n.NULL),this._updateBarStatus()):this._processType==n.DECREASE&&(this._targetProgress<this.progress?this.progress+=t:(this.progress=this._targetProgress,this.runProgressComplete(),this._processType=n.NULL),this._updateBarStatus())}},setTargetProgress:function(e,t,o){this.targetProgress=e,this._onProgressComplete=t,o&&(this._processType=n.NULL,this.progress=this._targetProgress,this.runProgressComplete(),this._updateBarStatus())},runProgressComplete:function(){this._onProgressComplete&&(this._onProgressComplete(),this._onProgressComplete=null)}});t.exports=i,cc._RF.pop()},{}],PropBaseData:[function(e,t,o){"use strict";cc._RF.push(t,"7df5eY3BplHcKjHhZ6rzhiQ","PropBaseData");var a={},s=[],c=cc.Class({properties:{id:0,name:"",desc:"",maxNum:0},ctor:function(){},parse:function(e){var t;for(t in e)this.hasOwnProperty(t)&&void 0!==e[t]&&null!==e[t]&&(this[t]=e[t]);return this}});c.initData=function(r){cc.loader.loadRes("data/prop",function(e,t){if(e)cc.log(e);else{var o=t;for(var n in o){var i=(new c).parse(o[n]);a[o[n].id]=i,s.push(i)}r&&(r(s),r=null)}})},c.getData=function(e){return a[e]},c.getDataList=function(){return s},cc._RF.pop()},{}],PropBubbleCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"b95ffnDR1NAiovZj3vGaKhV","PropBubbleCtrl");var n=cc.Enum({NULL:0,POKER_WILD:1,POKER_CLEAN_CATEGORY:2,POKER_CLEAN_RANDOM:3,POKER_ADD_HAND:4,POKER_ADD_TIME:5,FREE_LEVEL:6,POKER_ELIMINATE_ALERT:7});cc.Class({extends:cc.Component,properties:{spHint:cc.Node,spFreeCard:cc.Node,_showType:n.POKER_ELIMINATE_ALERT,showType:{type:n,set:function(e){this.setType(e)},get:function(){return this._showType}}},setType:function(e){this._showType=e,this.spHint.active=!1,this.spFreeCard.active=!1,e===n.POKER_ELIMINATE_ALERT?this.spHint.active=!0:e===n.FREE_LEVEL&&(this.spFreeCard.active=!0)}}),cc._RF.pop()},{}],PropModel:[function(e,t,o){"use strict";cc._RF.push(t,"a2545dqvuJF4ZEUjtiRTewv","PropModel");var r=e("./../common/DataMgr"),a=e("./../common/DataObject").PropObject,s=e("./../data/PropBaseData"),n=e("./../game/GameDataMgr"),i=cc.Enum({NULL:0,POKER_WILD:1,POKER_CLEAN_CATEGORY:2,POKER_CLEAN_RANDOM:3,POKER_ADD_HAND:4,POKER_ADD_TIME:5,FREE_LEVEL:6,POKER_ELIMINATE_ALERT:7}),c={},l=[],u=cc.Class({statics:{Type:i},properties:{_savedData:null,type:{get:function(){return this._savedData.type},set:function(e){this._savedData.type=e}},num:{get:function(){return this._savedData.num},set:function(e){this._savedData.num=e}},_baseData:null,baseData:{get:function(){return this._baseData}}},ctor:function(){},init:function(e){var t=r.getInstance().playerObj;t.props||(t.props={});var o=t.props;if(!o[e]){var n=new a;n.init(e,50),o[e]=n}this._savedData=o[e],this._baseData=s.getData(e);var i=this.baseData.maxNum;this.num>i&&(this.num=i)},useProp:function(){return!!n.isInClassic||!(this.num<=0)&&(this.num--,!0)},addProp:function(e){null==e&&(e=1);var t=this.baseData.maxNum;this.num>t?this.num=t:this.num+=e}});u.initData=function(e){for(var t in e){var o=new u;o.init(e[t].id),c[o.type]=o,l.push(o)}},u.getModel=function(e){return c[e]},u.getModelList=function(){return l},cc._RF.pop()},{"./../common/DataMgr":"DataMgr","./../common/DataObject":"DataObject","./../data/PropBaseData":"PropBaseData","./../game/GameDataMgr":"GameDataMgr"}],ScrollViewFixed:[function(e,t,o){"use strict";cc._RF.push(t,"6b10btYYwJF2J+YhWOd1Cea","ScrollViewFixed"),cc.Class({extends:cc.ScrollView,properties:{maxBounceDistance:{tooltip:"允许超过边界的最大值",default:cc.v2(100,100)},rate:{tooltip:"移动速率(0-1), 1表示跟随手指, 0表示不动",default:1,max:1,min:0}},_registerEvent:function(){},_moveContent:function(e,t){var o=this._flattenVectorByDirection(e);cc.director.getContentScaleFactor();var n=cc.pAdd(this.getContentPosition(),o),i=this.getMaxScrollOffset();n.x=n.x>=-i.x/2-1*this.maxBounceDistance.x?n.x:-i.x/2-1*this.maxBounceDistance.x,n.x=n.x<=i.x/2+1*this.maxBounceDistance.x?n.x:i.x/2+1*this.maxBounceDistance.x,n.y=n.y>=-i.y/2-1*this.maxBounceDistance.x?n.y:-i.y/2-1*this.maxBounceDistance.x,n.y=n.y<=i.y/2+1*this.maxBounceDistance.x?n.y:i.y/2+1*this.maxBounceDistance.x,this.setContentPosition(n);var r=this._getHowMuchOutOfBoundary();this._updateScrollBar(r),this.elastic&&t&&this._startBounceBackIfNeeded()},_handleMoveLogic:function(e){var t=e.getDelta();this._processDeltaMove(cc.pMult(t,this.rate))}}),cc._RF.pop()},{}],ServerTimeMgr:[function(e,t,o){"use strict";cc._RF.push(t,"faaafAya9dBLqL7S4LFSEWp","ServerTimeMgr");e("DataMgr"),Number.MAX_VALUE;var n=cc.Class({ctor:function(){},statics:{instance:null,getInstance:function(){return null==n.instance&&(n.instance=new n),n.instance}},loadServerTime:function(){var e=cc.loader.getXMLHttpRequest();this.onStreamXHREvents(e,"GET"),e.open("GET","https://sec.tclclouds.com/game180412/stamp/q",!0),e.timeout=1e4,e.send()},onStreamXHREvents:function(o,e,t){["loadstart","abort","error","load","loadend","timeout"].forEach(function(e){o["on"+e]=function(){"timeout"===e&&(cc.log("(timeout)"),Number.MAX_VALUE)}}),o.onreadystatechange=function(){if(4===o.readyState&&200<=o.status&&o.status<300)try{var e=JSON.parse(o.responseText).Stamp,t=(new Date).getTime()/1e3;Math.abs(t-e),cc.log("load time Succ nowTimeStamp= "+t)}catch(e){cc.log("load time Failed  "),cc.error("on loadServerTime: "+e.message),Number.MAX_VALUE}else cc.log("load time xhr.readyState = "+o.readyState+" xhr.status = "+o.status)}},isDeviceTimeValid:function(){return!0}});t.exports=n,cc._RF.pop()},{DataMgr:"DataMgr"}],SettingViewCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"ba5abqbsoJFM5Zg4pV2H2Z8","SettingViewCtrl");var n=e("./common/SliderExt"),i=e("./common/DataMgr"),r=e("./common/UtilsCross");cc.Class({extends:cc.Component,properties:{labelVersion:cc.Label,toggleMusic:cc.Toggle,sliderMusic:n,toggleEffect:cc.Toggle,sliderEffect:n},onLoad:function(){this.initView(),this._state=0},initView:function(){var e=i.getInstance().settingObj;this.toggleMusic.isChecked=e.musicOn,this.sliderMusic.interactable=e.musicOn,this.sliderMusic.progress=e.musicVol,this.toggleEffect.isChecked=e.effectOn,this.sliderEffect.interactable=e.effectOn,this.sliderEffect.progress=e.effectVol,this.labelVersion.string=r.getAppVersion()},onVolumeChanged:function(e,t){var o=e.progress;"music"===t?(i.getInstance().settingObj.musicVol=o,Global.audioMgr.setMusicVolume(o)):(i.getInstance().settingObj.effectVol=o,Global.audioMgr.setEffectVolume(o))},onBtnToggle:function(e,t){Global.audioMgr.playEffect(Global.audioMgr.effTouch);var o=e.isChecked;"music"===t?(i.getInstance().settingObj.musicOn=o,(this.sliderMusic.interactable=o)?Global.audioMgr.playLastMusic():Global.audioMgr.stopMusic()):(i.getInstance().settingObj.effectOn=o,(this.sliderEffect.interactable=o)||Global.audioMgr.stopAllEffects())},onBtnFunc:function(e,t){switch(Global.audioMgr.playEffect(Global.audioMgr.effTouch),t){case"guide":cc.log("guide.");break;case"privacy":cc.log("privacy."),cc.sys.openURL("http://tcl-icloudcdn.tclclouds.com/cloudSecurityBackend/game/201805/Privacy-Policy.html");break;case"clause":cc.log("clause."),cc.sys.openURL("http://tcl-icloudcdn.tclclouds.com/cloudSecurityBackend/game/201805/Service.html");break;case"producer":if(cc.log("producer."),0===this._state)this._state=1,this.getComponent(cc.Animation).play("showDesignView",!1).wrapMode=cc.WrapMode.Normal;break;case"purchase":cc.log("purchase."),IapTools.restorePurchase(null,null)}},onBtnBack:function(){0===this._state?Global.eventMgr.emit(Global.config.EVENT_POP_VIEW):(this._state=0,this.getComponent(cc.Animation).play("showDesignView",!1).wrapMode=cc.WrapMode.Reverse);Global.audioMgr.playEffect(Global.audioMgr.effTouch)}}),cc._RF.pop()},{"./common/DataMgr":"DataMgr","./common/SliderExt":"SliderExt","./common/UtilsCross":"UtilsCross"}],ShopViewCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"a2831oNzM5Jpr925F0Br6PO","ShopViewCtrl");var n=e("./common/LabelInteger"),c=(e("./common/GameCfg"),e("./common/DataMgr")),i=e("./common/UtilsOther"),l=e("./model/PropModel"),r=e("./common/CoinsMgr"),a=e("./common/LabelOwnNumCtrl"),s=e("./common/ServerTimeMgr");cc.Class({extends:cc.Component,properties:{salNode:cc.Node,salTabNode:cc.Node,goldNode:cc.Node,goldTabNode:cc.Node,vipNode:cc.Node,vipTabNode:cc.Node,salLabelTime:cc.Label,goldNum1:n,goldNum2:n,goldNum3:n,goldNum4:n,goldPrice1:cc.Label,goldPrice2:cc.Label,goldPrice3:cc.Label,goldPrice4:cc.Label,vipPrice:cc.Label,salPrice1:n,salPrice2:n,salPrice3:n,salNum1:a,salNum2:a,salNum3:a,salGetNum1:cc.Label,salGetNum2:cc.Label,salGetNum3:cc.Label,salProp1:cc.Sprite,salProp2:cc.Sprite,salProp3:cc.Sprite,salBtn1:cc.Button,salBtn2:cc.Button,salBtn3:cc.Button,propAtals:cc.SpriteAtlas,toggleProp:cc.Toggle,toggleCoins:cc.Toggle,toggleVip:cc.Toggle},onLoad:function(){this.OPACITY_NOT_CHECKED=180,this.initUI(),this.updateProp(0),this.schedule(this.updateProp,.5,this)},onEnable:function(){Global.eventMgr.on(Global.config.EVENT_REFRESH_SHOP_PROP,this.initUI,this)},onDisable:function(){Global.eventMgr.off(Global.config.EVENT_REFRESH_SHOP_PROP,this.initUI,this)},initUI:function(){for(var e=c.getInstance().iapObj.shopProps,t=c.getInstance().iapObj,o=1;o<=e.length;o++){var n=e[o-1];this["salProp"+o].spriteFrame=this.propAtals.getSpriteFrame("icon_ig_daojupai_0"+n.propId),this["salPrice"+o].setValue(n.propPrice*n.propNum),this["salGetNum"+o].string="GET "+n.propNum;var i=l.getModel(n.propId).baseData.maxNum,r=l.getModel(n.propId).num;i<=r||t["prop"+o+"hadBuy"]?this["salBtn"+o].interactable=!1:this["salBtn"+o].interactable=!0,this["salNum"+o].setNum(r,i)}for(var a=Global.config.IAPCFG,s=1;s<=4;s++)this["goldPrice"+s].string="$"+a["coins"+s].price,this["goldNum"+s].setValue(a["coins"+s].coins);this.vipPrice.string="$"+a.vip.price},_updatePropNum:function(){for(var e=c.getInstance().iapObj.shopProps,t=c.getInstance().iapObj,o=1;o<=e.length;o++){var n=e[o-1],i=l.getModel(n.propId).baseData.maxNum,r=l.getModel(n.propId).num;(i<=r||t["prop"+o+"hadBuy"])&&(this["salBtn"+o].interactable=!1),this["salNum"+o].setNum(r,i)}},onBtnBuyCoins:function(){this.toggleProp.isChecked=!1,this.toggleCoins.isChecked=!0,this.toggleVip.isChecked=!1,this.onTabChecked(this.toggleCoins,"gold")},onTabChecked:function(e,t){Global.audioMgr.playEffect(Global.audioMgr.effTouch);var o=e.isChecked;if(o)switch(cc.log(t+", "+o),t){case"vip":this.salNode.active=!1,this.salTabNode.opacity=this.OPACITY_NOT_CHECKED,this.goldNode.active=!1,this.goldTabNode.opacity=this.OPACITY_NOT_CHECKED,this.vipNode.active=!0,this.vipTabNode.opacity=255;break;case"gold":this.salNode.active=!1,this.salTabNode.opacity=this.OPACITY_NOT_CHECKED,this.goldNode.active=!0,this.goldTabNode.opacity=255,this.vipNode.active=!1,this.vipTabNode.opacty=this.OPACITY_NOT_CHECKED;break;default:c.getInstance().iapObj.showPropTips=!1,this.salNode.active=!0,this.salTabNode.opacity=255,this.goldNode.active=!1,this.goldTabNode.opacity=this.OPACITY_NOT_CHECKED,this.vipNode.active=!1,this.vipTabNode.opacty=this.OPACITY_NOT_CHECKED}},onSalBuy:function(e,t){Global.audioMgr.playEffect(Global.audioMgr.effTouch);var o=c.getInstance().iapObj,n=-1;switch(t){case"btn1":n=0;break;case"btn2":n=1;break;case"btn3":n=2}if(s.getInstance().isDeviceTimeValid()&&!(o.shopProps.length<=0)){var i=o.shopProps[n].propNum*o.shopProps[n].propPrice;r.costCoins(i,function(){o["prop"+(n+1)+"hadBuy"]=!0,l.getModel(o.shopProps[n].propId).addProp(o.shopProps[n].propNum),this._updatePropNum()}.bind(this),function(){this.onBtnBuyCoins()}.bind(this),!1)}},onGoldBuy:function(e,t){Global.audioMgr.playEffect(Global.audioMgr.effTouch);var o,n,i="";switch(t){case"btn1":i="coins1";break;case"btn2":i="coins2";break;case"btn3":i="coins3";break;case"btn4":i="coins4"}o=i,n=Global.config.IAPCFG[o].coins,r.addCoins(n)},onVipBuy:function(e,t){IapTools.buy("vip",function(e){cc.log("buy vip suc."),c.getInstance().iapObj.vipValid=!0},null),Global.audioMgr.playEffect(Global.audioMgr.effTouch)},updateProp:function(e){if(s.getInstance().isDeviceTimeValid()){var t=i.time(),o=c.getInstance().iapObj;t<o.propRefreshTime&&(this.salLabelTime.string=i.formatTime(o.propRefreshTime-t))}}}),cc._RF.pop()},{"./common/CoinsMgr":"CoinsMgr","./common/DataMgr":"DataMgr","./common/GameCfg":"GameCfg","./common/LabelInteger":"LabelInteger","./common/LabelOwnNumCtrl":"LabelOwnNumCtrl","./common/ServerTimeMgr":"ServerTimeMgr","./common/UtilsOther":"UtilsOther","./model/PropModel":"PropModel"}],SliderExt:[function(e,t,o){"use strict";cc._RF.push(t,"b020a6TORdAnp2rUnHIvkEE","SliderExt");var i=cc.Enum({Horizontal:0,Vertical:1});cc.Class({extends:cc.Slider,properties:{barSprite:{default:null,type:cc.Sprite,notify:function(){0}},enableAutoGrayEffect:{default:!1,tooltip:!1,notify:function(e){this._updateDisabledState()}},interactable:{default:!0,tooltip:!1,notify:function(e){this._updateDisabledState()}}},_handleSliderLogic:function(e){this.interactable&&(this._updateProgress(e),this._emitSlideEvent())},_updateDisabledState:function(){this.handle&&(this.handle.enableAutoGrayEffect=this.enableAutoGrayEffect,this.handle.interactable=this.interactable),this.barSprite&&this.barSprite._sgNode.setState(0),this.enableAutoGrayEffect&&this.barSprite&&!this.interactable&&this.barSprite._sgNode.setState(1)},_updateHandlePosition:function(){if(this.handle){var e=void 0;e=this.direction===i.Horizontal?cc.p(-this.node.width*this.node.anchorX+this.progress*this.node.width,0):cc.p(0,-this.node.height*this.node.anchorY+this.progress*this.node.height);var t=this.node.convertToWorldSpaceAR(e);this.handle.node.position=this.handle.node.parent.convertToNodeSpaceAR(t),this._updateBarSprite()}},_updateProgress:function(e){if(this.handle){var t=null,o=0,n=this.node.convertTouchToNodeSpaceAR(e);this.direction===i.Horizontal?(t=this.node.width/2-this.handle.node.width*this.handle.node.anchorX,o=cc.clamp01((n.x+t)/(2*t),0,1)):this.direction===i.Vertical&&(t=this.node.height/2-this.handle.node.height*this.handle.node.anchorY,o=cc.clamp01((n.y+t)/(2*t),0,1)),this.progress=o,this._updateBarSprite()}},_updateBarSprite:function(){if(this.barSprite){var e=this.node.width*this.progress;this.barSprite.node.width=e,this.barSprite.node.x=this.barSprite.node.anchorX*this.barSprite.node.width-this.node.width*this.node.anchorX}}}),cc._RF.pop()},{}],SpriteRemote:[function(e,t,o){"use strict";cc._RF.push(t,"f93b9VEGo1NFKnj3jl8TuM8","SpriteRemote"),cc.Class({extends:cc.Sprite,properties:{imgAddr:"",spSize:cc.Size},onLoad:function(){this._newSpFrame=null,this.imgAddr&&0<this.imgAddr.length&&this.setSPLink(this.imgAddr)},setSPLink:function(e){e&&0<e.length&&(this.imgAddr=e,cc.loader.load(this.imgAddr,function(e){cc.log("~~~~~SpriteRemote progress:"+e)},function(e,t){if(e)cc.log("~~~~~SprieRemote error:"+e);else if(this._newSpFrame=new cc.SpriteFrame(t),this.node){var o=this.node.width,n=this.node.height;this.getComponent(cc.Sprite).spriteFrame=this._newSpFrame,this.node.width=this.spSize.width?this.spSize.width:o,this.node.height=this.spSize.height?this.spSize.height:n}}.bind(this)))}}),cc._RF.pop()},{}],StarPanelCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"26deePGR+ZAh40jfsuudS/E","StarPanelCtrl");e("./common/DataMgr");cc.Class({extends:cc.Component,properties:{upStarPanel:cc.Node,_showStarNum:0,showStarNum:{type:cc.Integer,min:0,max:3,step:1,get:function(){return this._showStarNum},set:function(e){this._showStarNum=e;for(var t=0;t<3;t++){var o=t+1,n=this.upStarPanel.getChildByName("star"+o);n.opacity=t<e?255:0}}}},start:function(){}}),cc._RF.pop()},{"./common/DataMgr":"DataMgr"}],TipBaseCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"2c845qOJYNBK6DQf1Nx/XS7","TipBaseCtrl");cc.Class({extends:cc.Component,properties:{btnCancel:{default:null,type:cc.Button},btnQuit:{default:null,type:cc.Button},content:{default:null,type:cc.Label},quitFun:{default:null,type:cc.CallFunc},cancelFun:{default:null,type:cc.CallFunc},isClose:!0},setContentTxt:function(e){this.content.string=e},setCancelFun:function(e){this.cancelFun=e},setQuitFun:function(e){this.quitFun=e},start:function(){},init:function(e,t,o,n,i){this.setContentTxt(e),t?this.btnCancel.node.getChildByName("Label").getComponent(cc.Label).string=t:this.btnCancel.node.active=!1,o?this.btnQuit.node.getChildByName("Label").getComponent(cc.Label).string=o:this.btnQuit.node.active=!1,this.setCancelFun(n),this.setQuitFun(i)},cancelLister:function(){Global.eventMgr.emit(Global.config.EVENT_POP_VIEW),this.cancelFun&&this.cancelFun()},quitLister:function(){Global.eventMgr.emit(Global.config.EVENT_POP_VIEW),this.quitFun&&this.quitFun()}});cc._RF.pop()},{}],TipPropCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"2e7ebbNnI9KaYeZGfK/woCJ","TipPropCtrl");var n=e("./../game/GameDataMgr"),i=e("./TipBaseCtrl");cc.Class({extends:i,properties:{propSprite:{default:null,type:cc.Sprite},propPreLabel:{default:null,type:cc.Label},propTotalLabel:{default:null,type:cc.Label},quitBtnLabel:{default:null,type:cc.Label},coinSprite:{default:null,type:cc.Sprite}},setSpriteType:function(e){var o=this,n=e;cc.loader.loadRes("icon_prop",cc.SpriteAtlas,function(e,t){e||(o.propSprite.spriteFrame=t.getSpriteFrame(cc.js.formatStr("icon_ig_daojupai_%s",("00"+n).slice(-2))))})},setBottomLabels:function(e,t){this.propPreLabel.string=e,this.propTotalLabel.string="/"+t},setTotalNum:function(e){},setCurrentNum:function(e,t){this.propPreLabel.string=e+"/"+t},checkNum:function(e){return!!/^[0-9]+.?[0-9]*$/.test(e)},setQuitLabelValue:function(e){cc.log("setQuitLabelValue value is num = "+this.checkNum(e)),this.checkNum(e)?this.coinSprite.node.active=!0:this.coinSprite.node.active=!1,this.quitBtnLabel.string=e},start:function(){n.isInClassic?(this.propPreLabel.node.active=!1,this.propTotalLabel.node.active=!1):(this.propPreLabel.node.active=!0,this.propTotalLabel.node.active=!0)},quitLister:function(){this.isClose&&Global.eventMgr.emit(Global.config.EVENT_POP_VIEW),this.quitFun&&this.quitFun()}}),cc._RF.pop()},{"./../game/GameDataMgr":"GameDataMgr","./TipBaseCtrl":"TipBaseCtrl"}],Toast:[function(e,t,o){"use strict";cc._RF.push(t,"03d9aONB7RDV4ESJK8NB46b","Toast");var C={LENGTH_LONG:3.5,LENGTH_SHORT:2,CENTER:0,TOP:1,TOP_LEFT:2,LEFT:3,BOTTOM_LEFT:4,BOTTOM:5,BOTTOM_RIGHT:6,RIGHT:7,TOP_RIGHT:8,makeText:function(e,t){var p=void 0,d=void 0,f=void 0,g=0,m=0;return new function(e,t){p=e,d=t,this.setGravity=function(e,t,o){f=e,g=t,m=o},this.show=function(){var o=this;if(void 0!==C.bgSpriteFrame){var e=cc.director.getScene().getComponentInChildren(cc.Canvas),t=e.node.width,n=e.node.height;void 0===d&&(d=LENGTH_SHORT);var i=new cc.Node;i.opacity=200;var r=i.addComponent(cc.Sprite);r.type=cc.Sprite.Type.SLICED;var a=i.addComponent(cc.Layout);a.resizeMode=cc.Layout.ResizeMode.CONTAINER;var s=new cc.Node,c=s.addComponent(cc.Label);c.horizontalAlign=cc.Label.HorizontalAlign.CENTER,c.verticalAlign=cc.Label.VerticalAlign.CENTER,c.fontSize=20,c.string=p;var l=c.fontSize/8;a.paddingLeft=l,a.paddingRight=l,a.paddingTop=2,a.paddingBottom=2,p.length*c.fontSize>t/3&&(s.width=t/3,c.overflow=cc.Label.Overflow.RESIZE_HEIGHT),i.addChild(s),C.bgSpriteFrame&&(r.spriteFrame=C.bgSpriteFrame),f==C.CENTER?(s.y=0,s.x=0):f==C.TOP?s.y=s.y+n/5*2:f==C.TOP_LEFT?(s.y=s.y+n/5*2,s.x=s.x+t/5):f==C.LEFT?s.x=s.x+t/5:f==C.BOTTOM_LEFT?(s.y=s.y-n/5*2,s.x=s.x+t/5):f==C.BOTTOM?s.y=s.y-n/5*2:f==C.BOTTOM_RIGHT?(s.y=s.y-n/5*2,s.x=s.x-t/5):f==C.RIGHT?s.x=s.x-t/5:f==C.TOP_RIGHT?(s.y=s.y+n/5*2,s.x=s.x-t/5):s.y=s.y-n/5*2,s.x=s.x+g,s.y=s.y+m,e.node.addChild(i);var u=cc.callFunc(function(e){i.destroy()},o),h=cc.sequence(cc.moveBy(d,cc.p(0,0)),cc.fadeOut(.3),u);i.runAction(h)}else cc.loader.load({uuid:"b43ff3c2-02bb-4874-81f7-f2dea6970f18"},function(e,t){e?cc.error(e):(C.bgSpriteFrame=new cc.SpriteFrame(t),C.bgSpriteFrame.insetTop=3,C.bgSpriteFrame.insetBottom=3,C.bgSpriteFrame.insetLeft=4,C.bgSpriteFrame.insetRight=4,o.show())})}}(e,t)},showText:function(e,t){C.makeText(e,t).show()}};t.exports=C,cc._RF.pop()},{}],UiUpdater:[function(e,t,o){"use strict";cc._RF.push(t,"6bea9e70DdDKYGKRZQO+Ors","UiUpdater");var n=e("./GCONFIG"),i=e("./DataMgr");cc.Class({ctor:function(){},updateUserCoins:function(e){null==e&&(e=i.getInstance().playerObj.coins),Global.eventMgr.emit(n.EVENT_USER_COINS_CHANGED,e)}}),cc._RF.pop()},{"./DataMgr":"DataMgr","./GCONFIG":"GCONFIG"}],UtilsCross:[function(e,t,o){"use strict";cc._RF.push(t,"75324xmCH9J7qPe4IwqrYIj","UtilsCross");var n=n||{};n.pushLocalNotification=function(e,t,o,n,i){if(cc.sys.isNative){void 0===n&&(n=!1);var r="";return cc.sys.platform!==cc.sys.IPHONE&&cc.sys.platform!==cc.sys.IPAD||(r=jsb.reflection.callStaticMethod("HKLocalNotification","pushLocalNoti:message:withSecond:repeats:key:",e,t,o,n,i)),r}cc.log("only native can use iap.")},n.getAppVersion=function(){var e="V";return cc.sys.platform===cc.sys.IPHONE||cc.sys.platform===cc.sys.IPAD?e+=jsb.reflection.callStaticMethod("UtilsNative","getAppVersion"):(cc.sys.platform,cc.sys.ANDROID,e+="1.0.1"),e},t.exports=n,cc._RF.pop()},{}],UtilsOther:[function(o,e,t){"use strict";cc._RF.push(e,"7809f7t8zJNAIaSlG+sRWg8","UtilsOther");var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=o("./encrypt/Md5"),r=o("./CSVParser"),h=o("./../FlyEffectCtrl"),m=m||{};m.arrayRmObj=function(e,t){var o=e.indexOf(t);e.splice(o,1)},m.arrayPopByIdx=function(e,t){var o=e[t];return e.splice(t,1),o},m.valueInArray=function(e,t){for(var o=e.length,n=0;n<o;n++)if(e[n]==t)return!0;return!1},m.shuffle=function(e){var t=void 0,o=void 0,n=void 0;for(t=e.length-1;0<t;t--)o=Math.floor(Math.random()*(t+1)),n=e[t],e[t]=e[o],e[o]=n;return e},m.clearArrayValue=function(e,t,o){for(var n=0;n<t;n++)e[n]=o},m.createObjectWithArray=function(e,t){var o={};for(var n in e)o[e[n]]=t;return o},m.arrayToDict=function(e,t){var o={},n=null;for(var i in e)o[(n=e[i])[t]]=n;return o},m.dictToArray=function(e){var t=[];for(var o in e)e.hasOwnProperty(o)&&e[o]&&t.push(e[o]);return t},m.objectToArrayExcludeNumber=function(e,t,o){var n=void 0;n=isArray(t)?t:[];var i=void 0;if(isNumber(o)){var r=o.toString();for(i in e)e.hasOwnProperty(i)&&e[i]&&r!=i&&n.push(e[i])}else for(i in e)e.hasOwnProperty(i)&&e[i]&&n.push(e[i]);return n},m.time=function(){return parseInt(Date.now()/1e3)},m.time2second=function(e,t,o,n,i,r){var a=new Date(e,t-1,o,n,i,r).getTime();return parseInt(a/1e3)},m.getTimeAfterDays=function(e,t){cc.assert(e,"getTimeForDayAfterDays:time is null!");var o=null;return o=cc.isNumber(e)?new Date(1e3*e):new Date(e),new Date(o.getTime()+24*t*60*60*1e3)},m.getDaysDiff=function(e,t){var o;cc.assert(e&&t,"getDaysDiff: date must be not null!"),e=m.isNumber(e)?new Date(1e3*e):new Date(e),t=m.isNumber(t)?new Date(1e3*t):new Date(t);var n=new Date(e.getFullYear(),e.getMonth(),e.getDate()),i=new Date(t.getFullYear(),t.getMonth(),t.getDate());return o=parseInt(Math.abs(i-n)/1e3/60/60/24),o*=n<=i?1:-1},m.getTimeForDay=function(e){return(e=e?cc.isNumber(e)?new Date(1e3*e):new Date(e):new Date).getFullYear()+"-"+(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+(e.getDate()<10?"0"+e.getDate():e.getDate())},m.formatTime=function(e){var t=void 0;if(0<=e){var o=Math.floor(e/3600),n=Math.floor(e/60)%60,i=e%60,r=parseInt(o/24);if(1==r)return r+" day";if(1<r)return r+" days";t=0<r?r+"day "+("00"+(o-=24*r)).slice(-2)+":":0<o?("00"+o).slice(-2)+":":"",n<10&&(t+="0"),t+=n+":",i<10&&(t+="0"),t+=parseInt(i)}return t},m.getThousandSeparatorString=function(e){return e.toString().split("").reverse().join("").replace(/(\d{3}(?=\d)(?!\d+\.|$))/g,"$1,").split("").reverse().join("")},m.getKMBString=function(e){return this.isNumber(e)?1<=e/1e9?this.getThousandSeparatorString(e/1e9)+"B":1<=e/1e6?this.getThousandSeparatorString(e/1e6)+"M":1<=e/1e4?this.getThousandSeparatorString(e/1e3)+"K":this.getThousandSeparatorString(e):e},m.getLastCutOffDay=function(e,t){var o=t-e;return o<0?-1:o=parseInt(o/86400)},m._dumpObject=function(e,t,o,n,i,r){if(!(m.D(r)&&r<o)){var a=void 0,s=void 0,c=void 0,l=void 0,u=void 0;switch(Object.prototype.toString.call(t).slice(8,-1)){case"Number":case"String":a='"'+t.toString()+'"',e&&(a=e+a),g(a,o,n);break;case"Undefined":a="UNDEFINED!",e&&(a=e+a),g(a,o,n);break;case"Boolean":a=t.toString(),e&&(a=e+a),g(a,o,n);break;case"Object":a="{",e&&(a=e+a),g(a,o,n);var h=void 0;for(h in t)t.hasOwnProperty(h)&&(c='"'+h+'" : ',s=(e?e.length:0)-2+n,_dumpObject(c,t[h],o+1,s,i,r));if(a="}",0<(l=e?e.length:0)){u="";var p=void 0;for(p=0;p<l;++p)u+=" ";a=u+a}g(a,o,n);break;case"Array":a="[",e&&(a=e+a),g(a,o,n);var d=void 0;for(d=0;d<t.length;++d)c=d+" : ",s=(e?e.length:0)-2+n,_dumpObject(c,t[d],o+1,s,i,r);if(a="]",0<(l=e?e.length:0)){u="";var f=void 0;for(f=0;f<l;++f)u+=" ";a=u+a}g(a,o,n);break;case"Function":i||(a=t.toString().replace(/function\s?/im,"").split(")")[0]+")",e&&(a=e+a),g(a,o,n))}}function g(e,t,o){for(;0<t;)e="  "+e,--t;if(0<o){var n="",i=void 0;for(i=0;i<o;++i)n+=" ";e=n+e}cc.log(e)}},m.dumpObject=function(e,t,o){m._dumpObject(void 0,e,0,0,t||!1,o)},m.D=function(e){return void 0!==e},m.DNN=function(e){return null!=e},m.isFunction=function(e){return"function"==typeof e},m.isNumber=function(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)},m.isString=function(e){return"string"==typeof e||"[object String]"===Object.prototype.toString.call(e)},m.isArray=function(e){return Array.isArray(e)||"object"===(void 0===e?"undefined":s(e))&&"[object Array]"===Object.prototype.toString.call(e)},m.isUndefined=function(e){return void 0===e},m.isObject=function(e){return"object"===(void 0===e?"undefined":s(e))&&"[object Object]"===Object.prototype.toString.call(e)},m.isEmpty=function(e){return Array.isArray(e)&&0===e.length||Object.prototype.isPrototypeOf(e)&&0===Object.keys(e).length},m.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===Object.prototype.toString.call(e)},m.clone=function(e,t){t||(t=e.constructor?new e.constructor:{});var o=void 0,n=void 0;for(o in e)e.hasOwnProperty(o)&&("object"===(void 0===(n=e[o])?"undefined":s(n))&&n?t[o]=clone(n,null):t[o]=n);return t},m.getStringFromFile=function(e){return cc.sys.isNative?jsb.fileUtils.getStringFromFile(e):function(e){if(cc._isNodeJs)return o("fs").readFileSync(e).toString();var t=this.getXMLHttpRequest();return t.timeout=0,t.open("GET",e,!1),/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)?t.setRequestHeader("Accept-Charset","utf-8"):t.overrideMimeType&&t.overrideMimeType("text/plain; charset=utf-8"),t.send(null),4===!t.readyState||200!==t.status?null:t.responseText}.bind(cc.loader)(e)},m.loadRemoteImg=function(e,o){if(cc.sys.isBrowser)return cc.log("Remote img load web"),void cc.loader.load(e,function(e){cc.log("Remote img load progress:"+e)},function(e,t){e?cc.log("Remote img load error:"+e):(cc.log("Remote img load success."),o(t))});cc.log("Remote img load: native");var n=jsb.fileUtils.getWritablePath()+"img/",i=n+c.md5_hex(e)+".png";function r(){cc.loader.load(i,function(e,t){e?cc.error(e):o(t)})}if(jsb.fileUtils.isFileExist(i))return cc.log("Remote is find"+i),void r();var t=function(e){cc.log(void 0===e?"undefined":s(e)),cc.log(e);var t=new Uint8Array(e);cc.log(void 0===t?"undefined":s(t)),cc.log(t.length),void 0!==e?(jsb.fileUtils.isDirectoryExist(n)||jsb.fileUtils.createDirectory(n),cc.log("111111"+i),jsb.fileUtils.writeDataToFile(new Uint8Array(e),i)?(cc.log("Remote img save succeed."),cc.log("22222"),r()):cc.log("Remote img save failed.")):cc.log("Remote img download failed.")},a=new XMLHttpRequest;a.onreadystatechange=function(){cc.log("xhr.readyState  "+a.readyState),cc.log("xhr.status  "+a.status),4===a.readyState&&(200===a.status?(a.responseType="arraybuffer",t(a.response)):t(null))}.bind(this),a.open("GET",e,!0),a.send()},m.checkTouchIsHit=function(e,t){return cc.rectContainsPoint(t.getBoundingBoxToWorld(),e)},m.createCliper=function(e){var t=new cc.Sprite(e),o=new cc.ClippingNode;return o.attr({stencil:t,anchorX:.5,anchorY:.5,alphaThreshold:.8}),o},m.convertBoundingBoxToWorld=function(e){if(!e)return cc.rect();var t=e.convertToWorldSpace(cc.p()),o=e.convertToWorldSpace(cc.pFromSize(e.getContentSize()));return cc.rect(t.x,t.y,o.x-t.x,o.y-t.y)},m.getPositionByAnchor=function(e,t){if(!e)return cc.p();var o=e.getPosition();e.getBoundingBox();return o.x+=e.width*(t.x-e.anchorX),o.y+=e.height*(t.y-e.anchorY),o},m.runShakeAction=function(e,t,o){e.runAction(cc.repeat(cc.sequence(cc.moveBy(.02,cc.p(0,t)),cc.moveBy(.04,cc.p(0,2*-t)),cc.moveBy(.02,cc.p(0,t))),o))},m.randomByWeight=function(e,o){if(!m.isArray(e)||!m.isString(o))return null;var t=0;t=e.reduce(function(e,t){return e+=t[o]},t),cc.log("sumWeight:"+t);var n=0,i=Math.random()*t,r=null;for(var a in e)if(i<(n+=(r=e[a])[o]))return r;return r},m.randomInteger=function(e,t){return e+Math.round((t-e)*Math.random())},m.parse=function(e,t){for(var o=new r(e,t),n=[];o.hasNext();){var i=o.nextRow();n.push(i)}return n},m.parseOneLine=function(e,t){for(var o=new r(e,t),n=[];o.hasNext();){var i=o.nextRow();n.push(i)}return n.length<=1?n[0]:n},m.bindColumns=function(e,n,i){return n||(n=e.shift()),e.map(function(e){for(var t={},o=0;o<e.length;o++)t[n[o]]=i?isNaN(e[o])?e[o]:Number(e[o]):e[o];return t})},m.bindColumnsSimple=function(e,n){return n||(n=e.shift()),e.map(function(e){for(var t={},o=0;o<e.length;o++)t[n[o]]=CSV.parseOneSimple(e[o]);return t})},m.runFlyEffect=function(e,t,o,n,i){var r=cc.instantiate(Global.assetMgr.prefabFlyEffect);t.addChild(r);var a=r.getComponent(h);a.type=e;var s=t.convertToNodeSpaceAR(o.parent.convertToWorldSpaceAR(o.getPosition())),c=t.convertToNodeSpaceAR(n.parent.convertToWorldSpaceAR(n.getPosition())),l=cc.pDistance(s,c);r.setPosition(s);var u=Math.min(1,l/800);r.runAction(cc.sequence(cc.moveTo(u,c),cc.callFunc(function(){a.pop(),i&&(i(),i=null)}),cc.delayTime(2),cc.removeSelf()))},e.exports=m,cc._RF.pop()},{"./../FlyEffectCtrl":"FlyEffectCtrl","./CSVParser":"CSVParser","./encrypt/Md5":"Md5",fs:void 0}],ViewBase:[function(e,t,o){"use strict";cc._RF.push(t,"694b6jq9VVLs7ax3wMlHk7q","ViewBase"),cc.Class({extends:cc.Component,properties:{onShowHandler:{default:null,type:cc.Component.EventHandler,tooltip:"视图显示时的回掉"},onHideHandler:{default:null,type:cc.Component.EventHandler,tooltip:"视图消失时的回掉"},aniClipShow:{default:null,type:cc.AnimationClip,tooltip:"出现动画"},aniClipHide:{default:null,type:cc.AnimationClip,tooltip:"消失动画"},mask:{default:null,type:cc.Node,tooltip:"半透明遮罩"}},start:function(){},onBtnRemove:function(){Global.eventMgr.emit(Global.config.EVENT_POP_VIEW),Global.audioMgr.playEffect(Global.audioMgr.effTouch)}}),cc._RF.pop()},{}],ViewMgr:[function(e,t,o){"use strict";cc._RF.push(t,"981f3vJkZhPjbyqp7Nh8M6i","ViewMgr");var a=e("./GCONFIG"),n=e("./../game/GameLevelMgr"),i=cc.Class({ctor:function(){this._views=[],this.rootNode=null,this.loading=null,Global.eventMgr.on(a.EVENT_POP_VIEW,this.popView,this),Global.eventMgr.on(a.EVENT_CHANGE_SCENE,function(){this.beforeChangeScene()},this)},statics:{_instance:null,getInstance:function(){return i._instance||(i._instance=new i),i._instance}},beforeChangeScene:function(){cc.log("---before change scene."),this.removeAllView()},pushView:function(e,t,o){if(this._views.push(e),!this.rootNode){var n=cc.Canvas.instance.node;this.rootNode=new cc.Node,this.rootNode.width=n.width,this.rootNode.height=n.height,this.rootNode.setLocalZOrder(a.LOCAL_ZINDEX_MAX),n.addChild(this.rootNode)}this.rootNode.addChild(e);var i=e.getComponent("ViewBase");cc.assert(i,"view must add component ViewBase.");var r=e.getComponent(cc.Animation);r||(r=e.addComponent(cc.Animation)),i.aniClipHide&&r.addClip(i.aniClipHide,"aniHide"),i.aniClipShow&&(r.addClip(i.aniClipShow,"aniShow"),o?r.play("aniShow"):r.play("aniShow").once("finished",function(){i.onShowHandler&&i.onShowHandler.emit()})),o&&i.onShowHandler&&i.onShowHandler.emit(),t&&i.mask&&(i.mask.active=!1)},popView:function(){var e=this.getTopView();e&&this.removeView(e)},removeView:function(e){var t=this._views.indexOf(e);if(!(t<0)){this._views.splice(t,1);var o=e.getComponent("ViewBase"),n=e.getComponent(cc.Animation);o.aniClipHide?n.play("aniHide").once("finished",function(){o.onHideHandler&&o.onHideHandler.emit(),e.destroy()}):(o.onHideHandler&&o.onHideHandler.emit(),e.destroy())}},getTopView:function(){return 0<this._views.length?this._views[this._views.length-1]:null},removeAllView:function(){for(var e=0;e<this._views.length;e++){this._views[e].destroy()}this.loading&&(this.loading.parent=null,this.loading.destroy(),this.loading=null),this.rootNode&&(this.rootNode.parent=null,this.rootNode.destroy(),this.rootNode=null),this._views=[]},pushLoading:function(){if(!this.loading){if(this.loading=cc.instantiate(Global.assetManager.loadingPrefab),this.loading.setLocalZOrder(a.LOCAL_ZINDEX_MAX),!this.rootNode){var e=cc.Canvas.instance.node;this.rootNode=new cc.Node,this.rootNode.setLocalZOrder(a.LOCAL_ZINDEX_MAX),this.rootNode.width=e.width,this.rootNode.height=e.height,e.addChild(this.rootNode)}this.rootNode.addChild(this.loading)}},popLoading:function(){this.loading&&(this.loading.removeFromParent(),this.loading.destroy(),this.loading=null)},showGameSucView:function(){var e=cc.instantiate(Global.assetMgr.prefabGameSuc);this.pushView(e)},showGameFailedView:function(){var e=cc.instantiate(Global.assetMgr.prefabGameFailed);this.pushView(e)},showChestRewardView:function(){var e=cc.instantiate(Global.assetMgr.prefabChestReward);this.pushView(e)},showGameClassicEntry:function(){var e=cc.instantiate(Global.assetMgr.prefabGameClassicEntry);this.pushView(e)},showGameClassicEnd:function(){var e=cc.instantiate(Global.assetMgr.prefabGameClassicEnd);this.pushView(e)},showGamePropRecommend:function(){var e=cc.instantiate(Global.assetMgr.prefabGamePropRecommend);this.pushView(e)},showSettingView:function(){var e=cc.instantiate(Global.assetMgr.prefabSetting);this.pushView(e)},showLevelTipsView:function(e){n.getInstance().curLevel=e;var t=cc.instantiate(Global.assetMgr.prefabLevelTips);this.pushView(t)},showShopView:function(){var e=cc.instantiate(Global.assetMgr.prefabShop);this.pushView(e)},showClassicExitTipView:function(e,t,o){var n=cc.instantiate(Global.assetMgr.prefabBaseTipShowView),i=n.getComponent("TipBaseCtrl");i.setContentTxt(e),i.setCancelFun(t),i.setQuitFun(o),this.pushView(n)},showClassicPropTipView:function(e,t,o,n,i,r,a,s){var c=cc.instantiate(Global.assetMgr.prefabTipShowView),l=c.getComponent("TipPropCtrl");l.setContentTxt(i),l.setCancelFun(r),l.setQuitFun(a),l.isClose=s,l.setSpriteType(e),l.setCurrentNum(o,n),l.setTotalNum(n),l.setQuitLabelValue(t),this.pushView(c)},showPropsView:function(){var e=cc.instantiate(Global.assetMgr.prefabGamePropView);this.pushView(e)},showChestCollectView:function(){var e=cc.instantiate(Global.assetMgr.prefabChestCollect);this.pushView(e)},showChestCollectResView:function(e){var t=cc.instantiate(Global.assetMgr.prefabChestCollectRes);t.getComponent("ChestCollectResView").init(e),this.pushView(t)},showNormalTipView:function(e,t,o,n,i){var r=cc.instantiate(Global.assetMgr.prefabBaseTipShowView);r.getComponent("TipBaseCtrl").init(e,t,o,n,i),this.pushView(r)}});t.exports=i,cc._RF.pop()},{"./../game/GameLevelMgr":"GameLevelMgr","./GCONFIG":"GCONFIG"}]},{},["CoinsPanelCtrl","FlyEffectCtrl","GameFailedViewCtrl","GameFinishViewBase","GameMgr","GameSucViewCtrl","HelloWorld","LevelTipsCtrl","LoginCtrl","PropBubbleCtrl","SettingViewCtrl","ShopViewCtrl","StarPanelCtrl","ChestCollectCard","ChestCollectCtrl","ChestCollectResView","ChestCollectViewCtrl","ChestRewardCtrl","ChestRewardViewCtrl","AssetMgr","AudioMgr","AutoScaleFixedWidth","BtnCtrl","CSVParser","CoinsMgr","DataMgr","DataObject","Facebook","FacebookMgr","GCONFIG","GameCfg","Global","GraySprite","IAP","IAPMgr","IapTools","LabelInteger","LabelOwnNumCtrl","ProgressBarExt","ScrollViewFixed","ServerTimeMgr","SliderExt","SpriteRemote","TipBaseCtrl","TipPropCtrl","Toast","UiUpdater","UtilsCross","UtilsOther","ViewBase","ViewMgr","Algo","Encrypt","Md5","PropBaseData","GameClassicEndCtrl","GameClassicEntryCtrl","GameClassicTargetCtrl","GameClassicTargetEndCtrl","GameCoinsEffectCtrl","GameCtrl","GameDataMgr","GameLevelMgr","GameProgressCtrl","GamePropBarCtrl","GamePropCtrl","GamePropMgr","GamePropRecommendCtrl","PokerCtrl","PokerTableCtrl","IslandLayerCtrl","IslandSceneCtrl","LevelNodeCtrl","ClassicGameModel","Poker","PokerTable","PropModel","GamePropsCtrl"]);
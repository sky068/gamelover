require=function e(t,i,n){function s(a,c){if(!i[a]){if(!t[a]){var o="function"==typeof require&&require;if(!c&&o)return o(a,!0);if(l)return l(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var r=i[a]={exports:{}};t[a][0].call(r.exports,function(e){var i=t[a][1][e];return s(i?i:e)},r,r.exports,e,t,i,n)}return i[a].exports}for(var l="function"==typeof require&&require,a=0;a<n.length;a++)s(n[a]);return s}({Config:[function(e,t,i){"use strict";cc._RFpush(t,"14503Ztv4ZIQ7m7RhW0MXWg","Config");var n=n||{};n.gearInfo=["2x","6x","2x","4x","5x","4x","8x","4x","3x","5x","3x","10x","6x","2x","2x","3x","10x","8x"],t.exports=n,cc._RFpop()},{}],HelloWorld:[function(e,t,i){"use strict";cc._RFpush(t,"280c3rsZJJKnZ9RqbALVwtK","HelloWorld"),cc.Class({"extends":cc.Component,properties:{label:{"default":null,type:cc.Label},text:"Hello, World!"},onLoad:function(){this.label.string=this.text},update:function(e){}}),cc._RFpop()},{}],Wheel2:[function(e,t,i){"use strict";cc._RFpush(t,"43655YKkbBBgZnejEy9xj3Y","Wheel2"),cc.Class({"extends":cc.Component,properties:{spinBtn:{"default":null,type:cc.Button,visible:!0,displayName:"SpinBtn"},wheelSp:{"default":null,type:cc.Sprite},maxSpeed:{"default":3,type:cc.Float,max:10,min:2},duration:{"default":3,type:cc.Float,max:5,min:1},acc:{"default":.1,type:cc.Float,max:1,min:.01},targetID:{"default":0,type:cc.Integer,max:17,min:0},effectAudio:{"default":null,url:cc.AudioClip}},onLoad:function(){cc.log("....onload"),this.wheelState=0,this.curSpeed=0,this.spinTime=0,this.gearNum=18,this.defaultAngle=10,this.gearAngle=360/this.gearNum,this.effectFlag=0,this.finalAngle=360-this.targetID*this.gearAngle+this.defaultAngle,this.wheelSp.node.rotation=this.defaultAngle,this.spinBtn.node.on(cc.Node.EventType.TOUCH_END,function(e){cc.log("begin spin"),0==this.wheelState&&(this.decAngle=720,this.wheelState=1,this.curSpeed=0,this.spinTime=0)}.bind(this))},start:function(){cc.log("....start")},update:function(e){if(0!=this.wheelState)if(cc.log("......state=%d",this.wheelState),this.effectFlag+=this.curSpeed,this.effectFlag>=this.gearAngle&&(cc.audioEngine.playEffect(this.effectAudio,!1),this.effectFlag=0),1==this.wheelState)if(cc.log("....开始旋转,speed:"+this.curSpeed),this.spinTime+=e,this.wheelSp.node.rotation=this.wheelSp.node.rotation+this.curSpeed,this.curSpeed<=this.maxSpeed)this.curSpeed+=this.acc;else{if(this.spinTime<this.duration)return;cc.log("....开始减速"),this.wheelSp.node.rotation=this.defaultAngle,this.wheelState=2}else if(2==this.wheelState){cc.log("......减速");var t=this.wheelSp.node.rotation,i=.02*(this.finalAngle-t);this.finalAngle-t;i>this.maxSpeed&&(i=this.maxSpeed),t+=i,this.wheelSp.node.rotation=t,i<=.1&&(this.wheelSp.node.rotation=this.finalAngle,this.wheelState=0)}}}),cc._RFpop()},{}],Wheel:[function(e,t,i){"use strict";cc._RFpush(t,"5261c81JlpM0JY8b6TQZadt","Wheel"),cc.Class({"extends":cc.Component,properties:{spinBtn:{"default":null,type:cc.Button,visible:!0,displayName:"SpinBtn"},wheelSp:{"default":null,type:cc.Sprite},maxSpeed:{"default":5,type:cc.Float,max:10,min:2},duration:{"default":3,type:cc.Float,max:5,min:1,tooltip:"减速前旋转时间"},acc:{"default":.1,type:cc.Float,max:.2,min:.01,tooltip:"加速度"},targetID:{"default":0,type:cc.Integer,max:17,min:0,tooltip:"指定结束时的齿轮"},springback:{"default":!0,tooltip:"旋转结束是否回弹"},effectAudio:{"default":null,url:cc.AudioClip}},onLoad:function(){cc.log("....onload"),this.wheelState=0,this.curSpeed=0,this.spinTime=0,this.gearNum=18,this.defaultAngle=10,this.gearAngle=360/this.gearNum,this.wheelSp.node.rotation=this.defaultAngle,this.finalAngle=0,this.effectFlag=0,cc.sys.isBrowser||cc.loader.loadRes("Sound/game_turntable",function(e,t){e&&cc.log("...err:"+e)}),this.spinBtn.node.on(cc.Node.EventType.TOUCH_END,function(e){cc.log("begin spin"),0===this.wheelState&&(this.decAngle=720,this.wheelState=1,this.curSpeed=0,this.spinTime=0)}.bind(this))},start:function(){},caculateFinalAngle:function(e){this.finalAngle=360-this.targetID*this.gearAngle+this.defaultAngle,this.springback&&(this.finalAngle+=this.gearAngle)},editBoxDidBegin:function(e){},editBoxDidChanged:function(e){},editBoxDidEndEditing:function(e){var t=parseInt(e.string);return isNaN(t)?(cc.sys.isBrowser?alert("please input a number!"):cc.log(".....invalid input"),void(this.targetID=Math.round(Math.random()*(this.gearNum-1)))):void(this.targetID=t)},update:function(e){if(0!==this.wheelState)if(this.effectFlag+=this.curSpeed,!cc.sys.isBrowser&&this.effectFlag>=this.gearAngle&&(this.audioID,this.audioID=cc.audioEngine.playEffect(cc.url.raw("resources/Sound/game_turntable.mp3")),this.effectFlag=0),1==this.wheelState)if(this.spinTime+=e,this.wheelSp.node.rotation=this.wheelSp.node.rotation+this.curSpeed,this.curSpeed<=this.maxSpeed)this.curSpeed+=this.acc;else{if(this.spinTime<this.duration)return;this.finalAngle=360-this.targetID*this.gearAngle+this.defaultAngle,this.maxSpeed=this.curSpeed,this.springback&&(this.finalAngle+=this.gearAngle),this.wheelSp.node.rotation=this.finalAngle,this.wheelState=2}else if(2==this.wheelState){var t=this.wheelSp.node.rotation,i=t-this.finalAngle;if(this.curSpeed=this.maxSpeed*((this.decAngle-i)/this.decAngle)+.2,this.wheelSp.node.rotation=t+this.curSpeed,this.decAngle-i<=0)if(this.wheelState=0,this.wheelSp.node.rotation=this.finalAngle,this.springback){var n=new cc.rotateBy(.5,(-this.gearAngle)),s=cc.sequence(new cc.delayTime(.3),n,cc.callFunc(this.showRes,this));this.wheelSp.node.runAction(s)}else this.showRes()}},showRes:function(){var t=e("Config");cc.sys.isBrowser?alert("You have got "+t.gearInfo[this.targetID]):cc.log(t.gearInfo[this.targetID])}}),cc._RFpop()},{Config:"Config"}]},{},["Config","HelloWorld","Wheel2","Wheel"]);